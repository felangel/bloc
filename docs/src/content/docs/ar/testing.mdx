---
title: الاختبار (Testing)
description: أساسيات كيفية كتابة اختبارات للـ blocs الخاصة بك.
---

import CounterBlocSnippet from '~/components/testing/CounterBlocSnippet.astro';
import AddDevDependenciesSnippet from '~/components/testing/AddDevDependenciesSnippet.astro';
import CounterBlocTestImportsSnippet from '~/components/testing/CounterBlocTestImportsSnippet.astro';
import CounterBlocTestMainSnippet from '~/components/testing/CounterBlocTestMainSnippet.astro';
import CounterBlocTestSetupSnippet from '~/components/testing/CounterBlocTestSetupSnippet.astro';
import CounterBlocTestInitialStateSnippet from '~/components/testing/CounterBlocTestInitialStateSnippet.astro';
import CounterBlocTestBlocTestSnippet from '~/components/testing/CounterBlocTestBlocTestSnippet.astro';

تم تصميم Bloc ليكون سهل الاختبار إلى حدٍ كبير. في هذا القسم، سنستعرض كيفية كتابة
اختبارات وحدة (unit tests) للـ bloc.

لأغراض التبسيط، سنقوم بكتابة اختبارات لـ `CounterBloc` الذي أنشأناه في
[المفاهيم الأساسية](/ar/bloc-concepts).

للتذكير، فإن تنفيذ `CounterBloc` يبدو كالتالي:

<CounterBlocSnippet />

## الإعداد (Setup)

قبل البدء في كتابة الاختبارات، نحتاج إلى إضافة إطار عمل للاختبار إلى تبعيات
المشروع.

نحتاج إلى إضافة حزمتَي [test](https://pub.dev/packages/test) و
[bloc_test](https://pub.dev/packages/bloc_test) إلى مشروعنا.

<AddDevDependenciesSnippet />

## الاختبار (Testing)

لنبدأ بإنشاء ملف لاختبارات `CounterBloc` باسم `counter_bloc_test.dart` واستيراد
حزمة الاختبار.

<CounterBlocTestImportsSnippet />

بعد ذلك، نحتاج إلى إنشاء دالة `main` بالإضافة إلى مجموعة اختبارات (test group).

<CounterBlocTestMainSnippet />

:::note

تُستخدم المجموعات (Groups) لتنظيم الاختبارات الفردية، وكذلك لإنشاء سياق يمكن من
خلاله مشاركة دوال `setUp` و `tearDown` بين جميع الاختبارات داخل المجموعة.

:::

لنبدأ بإنشاء مثيل من `CounterBloc` سيتم استخدامه عبر جميع اختباراتنا.

<CounterBlocTestSetupSnippet />

الآن يمكننا البدء في كتابة اختباراتنا الفردية.

<CounterBlocTestInitialStateSnippet />

:::note

يمكن تشغيل جميع الاختبارات باستخدام الأمر `dart test`.

:::

في هذه المرحلة، يجب أن يكون لدينا أول اختبار ناجح! الآن دعونا نكتب اختبارًا أكثر
تقدمًا باستخدام حزمة [bloc_test](https://pub.dev/packages/bloc_test).

<CounterBlocTestBlocTestSnippet />

يجب أن نتمكن من تشغيل الاختبارات والتأكد من أن جميعها ناجحة.

بهذا نكون قد انتهينا. ينبغي أن يكون الاختبار أمرًا سهلًا، وأن نشعر بالثقة عند
إجراء التعديلات أو إعادة هيكلة الكود.

يمكنك الرجوع إلى
[تطبيق Weather App](https://github.com/felangel/bloc/tree/master/examples/flutter_weather)
للاطلاع على مثال لتطبيق مختبَر بالكامل.
