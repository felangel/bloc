---
title: Flutter Todos
description: ุฏููู ูุชุนูู ูุจูุงุก ุชุทุจูู ููุงู (Todos) ูู ููุงุชุฑ ุจุงุณุชุฎุฏุงู ููุชุจุฉ bloc.
sidebar:
  order: 6
---

import RemoteCode from '~/components/code/RemoteCode.astro';
import FlutterCreateSnippet from '~/components/tutorials/flutter-todos/FlutterCreateSnippet.astro';
import ActivateVeryGoodCLISnippet from '~/components/tutorials/flutter-todos/ActivateVeryGoodCLISnippet.astro';
import FlutterCreatePackagesSnippet from '~/components/tutorials/flutter-todos/FlutterCreatePackagesSnippet.astro';
import ProjectStructureSnippet from '~/components/tutorials/flutter-todos/ProjectStructureSnippet.astro';
import VeryGoodPackagesGetSnippet from '~/components/tutorials/flutter-todos/VeryGoodPackagesGetSnippet.astro';
import HomePageTreeSnippet from '~/components/tutorials/flutter-todos/HomePageTreeSnippet.astro';
import TodosOverviewPageTreeSnippet from '~/components/tutorials/flutter-todos/TodosOverviewPageTreeSnippet.astro';
import StatsPageTreeSnippet from '~/components/tutorials/flutter-todos/StatsPageTreeSnippet.astro';
import EditTodosPageTreeSnippet from '~/components/tutorials/flutter-todos/EditTodosPageTreeSnippet.astro';

![advanced](https://img.shields.io/badge/level-advanced-red.svg)

ูู ูุฐุง ุงูุฏููู ุงูุชุนููููุ ุณูููู ุจุจูุงุก ุชุทุจูู ููุงู (Todos) ุจุงุณุชุฎุฏุงู ููุงุชุฑ ูุน ููุชุจุฉ Bloc.

![demo](~/assets/tutorials/flutter-todos.gif)

## ุงูููุงุถูุน ุงูุฑุฆูุณูุฉ

- [Bloc ู Cubit](/bloc-concepts#cubit-vs-bloc) ูุฅุฏุงุฑุฉ ุญุงูุงุช ุงูููุฒุงุช ุงููุฎุชููุฉ.
- [ุงููููููุฉ ุงูุทุจููุฉ](/architecture) ููุตู ุงูุงูุชูุงูุงุช/ุงููุณุคูููุงุช ูุชุณููู ุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู.
- [BlocObserver](/bloc-concepts#blocobserver) ููุฑุงูุจุฉ ุชุบููุฑุงุช ุงูุญุงูุฉ.
- [BlocProvider](/flutter-bloc-concepts#blocprovider)ุ ููุฏุฌูุช ูู Flutter ูููุฑ Bloc ููุฃุจูุงุก.
- [BlocBuilder](/flutter-bloc-concepts#blocbuilder)ุ ููุฏุฌูุช ูู Flutter ูุชููู ุจูุงุก ุงูููุฏุฌูุช ุงุณุชุฌุงุจุฉู ููุญุงูุงุช ุงูุฌุฏูุฏุฉ.
- [BlocListener](/flutter-bloc-concepts#bloclistener)ุ ููุฏุฌูุช ูู Flutter ูููุฐ ุชุฃุซูุฑุงุช ุฌุงูุจูุฉ ุงุณุชุฌุงุจุฉู ูุชุบูุฑุงุช ุงูุญุงูุฉ.
- [RepositoryProvider](/flutter-bloc-concepts#repositoryprovider)ุ ููุฏุฌูุช ูู Flutter ูููุฑ ูุณุชูุฏุน (repository) ููุฃุจูุงุก.
- [Equatable](/faqs#when-to-use-equatable) ูููุน ุนูููุงุช ุฅุนุงุฏุฉ ุงูุจูุงุก ุบูุฑ ุงูุถุฑูุฑูุฉ.
- [MultiBlocListener](/flutter-bloc-concepts#multibloclistener)ุ ููุฏุฌูุช ูู Flutter ูููู ุงูุชุนุดูุด ุนูุฏ ุงุณุชุฎุฏุงู ุนุฏุฉ BlocListeners.

## ุงูุฅุนุฏุงุฏ

ุณูุจุฏุฃ ุจุฅูุดุงุก ูุดุฑูุน Flutter ุฌุฏูุฏ ููููุง ุจุงุณุชุฎุฏุงู  
[very_good_cli](https://pub.dev/packages/very_good_cli).

<FlutterCreateSnippet />

:::note

ูู ุจุชุซุจูุช `very_good_cli` ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ ุงูุชุงูู

<ActivateVeryGoodCLISnippet />

:::

ุจุนุฏ ุฐููุ ุณูููู ุจุฅูุดุงุก ุงูุญุฒู `todos_api`ุ `local_storage_todos_api`ุ ู  
`todos_repository` ุจุงุณุชุฎุฏุงู `very_good_cli`:

<FlutterCreatePackagesSnippet />

ุจุฅููุงููุง ุจุนุฏ ุฐูู ุงุณุชุจุฏุงู ูุญุชููุงุช ููู `pubspec.yaml` ุจู:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/pubspec.yaml"
	title="pubspec.yaml"
/>

ูุฃุฎูุฑูุงุ ูููู ุจุชุซุจูุช ุฌููุน ุงูุชุจุนููุงุช:

<VeryGoodPackagesGetSnippet />

## ูููููุฉ ุงููุดุฑูุน

ูุฌุจ ุฃู ุชุจุฏู ูููููุฉ ูุดุฑูุน ุงูุชุทุจูู ูุฏููุง ุนูู ุงููุญู ุงูุชุงูู:

<ProjectStructureSnippet />

ูููู ุจุชูุณูู ุงููุดุฑูุน ุฅูู ุนุฏุฉ ุญุฒู ููุญูุงุธ ุนูู ุชุจุนูุงุช ูุงุถุญุฉ ูุตุฑูุญุฉ ููู ุญุฒูุฉ ูุน ุญุฏูุฏ ูุงุถุญุฉ ุชูุฑุถ [ูุจุฏุฃ ุงููุณุคูููุฉ ุงููุงุญุฏุฉ](https://en.wikipedia.org/wiki/Single-responsibility_principle). ุชุคุฏู ูุฐู ุงูุทุฑููุฉ ูู ุชูุธูู ุงููุดุฑูุน ุฅูู ููุงุฆุฏ ุนุฏูุฏุฉ ุชุดููุ ูููู ูุง ุชูุชุตุฑ ุนูู:

- ุณูููุฉ ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูุญุฒู ุนุจุฑ ูุดุงุฑูุน ูุชุนุฏุฏุฉ  
- ุชุญุณููุงุช ูู ุงูู CI/CD ูู ุญูุซ ุงูููุงุกุฉ (ุชุดุบูู ุงููุญูุตุงุช ููุท ุนูู ุงูููุฏ ุงูุฐู ุชู ุชุบููุฑู)  
- ุณูููุฉ ุตูุงูุฉ ุงูุญุฒู ุจูุนุฒู ุนู ุจุนุถูุง ูุน ูุฌููุนุงุช ุงุฎุชุจุงุฑ ูุฎุตุตุฉุ ูุฅุตุฏุงุฑ ูุณุฎ ุฏูุงููุฉุ ูุฏูุฑุฉ/ุฅููุงุน ุฅุตุฏุงุฑ ูุงุถุญุฉ  

## ุงูุจููุฉ ุงููุนูุงุฑูุฉ

![ูุฎุทุท ุจููุฉ ุชุทุจูู ุงูููุงู](~/assets/tutorials/todos-architecture.png)

ุชูุธูู ุงูููุฏ ุนูู ุดูู ุทุจูุงุช ุฃูุฑ ุจุงูุบ ุงูุฃูููุฉ ููุณุงุนุฏูุง ุนูู ุชุทููุฑ ุงูุชุทุจูู ุจุณุฑุนุฉ ูุซูุฉ. ูู ุทุจูุฉ ุชุชุญูู ูุณุคูููุฉ ูุงุญุฏุฉ ููุทุ ููููู ุงุณุชุฎุฏุงููุง ูุงุฎุชุจุงุฑูุง ุจุดูู ูุณุชูู. ูุฐุง ูุณูุญ ููุง ุจุญุตุฑ ุงูุชุนุฏููุงุช ุฏุงุฎู ุทุจูุฉ ูุนููุฉ ูุชูููู ุชุฃุซูุฑูุง ุนูู ูุงูู ุงูุชุทุจูู. ุจุงูุฅุถุงูุฉ ุฅูู ุฐููุ ูุตู ุงูุทุจูุงุช ูู ุงูุชุทุจูู ูุณูุญ ููุง ุจุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูููุชุจุงุช ุจุณูููุฉ ุนุจุฑ ูุดุงุฑูุน ูุชุนุฏุฏุฉุ ุฎุงุตุฉ ูููุง ูุชุนูู ุจุทุจูุฉ ุงูุจูุงูุงุช.

ูุชููู ุชุทุจูููุง ูู ุซูุงุซ ุทุจูุงุช ุฑุฆูุณูุฉ:

- ุทุจูุฉ ุงูุจูุงูุงุช
- ุทุจูุฉ ุงููุฌุงู (Domain)
- ุทุจูุฉ ุงููููุฒุงุช
  - ุทุจูุฉ ุงูุนุฑุถ/UI (widgets)
  - ููุทู ุงูุนูู (blocs/cubits)

**ุทุจูุฉ ุงูุจูุงูุงุช**

ูุฐู ุงูุทุจูุฉ ูู ุงูุฃุฏูู ูู ุงูููููุ ููู ูุณุคููุฉ ุนู ุฌูุจ ุงูุจูุงูุงุช ุงูุฎุงู ูู ูุตุงุฏุฑ ุฎุงุฑุฌูุฉ ูุซู ููุงุนุฏ ุงูุจูุงูุงุชุ ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (APIs)ุ ูุบูุฑูุง. ุงูุญุฒู (packages) ูู ุทุจูุฉ ุงูุจูุงูุงุช ุนุงุฏุฉ ูุง ุชุนุชูุฏ ุนูู ุฃู ุฌุฒุก ูู ุทุจูุฉ ุงูุนุฑุถุ ููููู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงููุง ุฃู ุญุชู ูุดุฑูุง ุนูู [pub.dev](https://pub.dev) ูุญุฒูุฉ ูุณุชููุฉ. ูู ูุฐุง ุงููุซุงูุ ุชุชุถูู ุทุจูุฉ ุงูุจูุงูุงุช ูุฏููุง ุญุฒูุชูู `todos_api` ู `local_storage_todos_api`.

**ุทุจูุฉ ุงููุฌุงู**

ุชุฌูุน ูุฐู ุงูุทุจูุฉ ุจูู ูุฒูุฏ ุจูุงูุงุช ุฃู ุฃูุซุฑ ูุชุทุจู "ููุงุนุฏ ุงูุนูู/ุงูุฃุนูุงู" ุนูู ุงูุจูุงูุงุช. ูู ูููู ูู ูุฐู ุงูุทุจูุฉ ูุณูู repository ูุชุฏูุฑ ูู repository ูุฌุงููุง ูุงุญุฏูุง ุนุงุฏุฉู. ุงูุญุฒู ูู ุทุจูุฉ ุงูู repository ููุจุบู ุฃู ุชุชุนุงูู ููุท ูุน ุทุจูุฉ ุงูุจูุงูุงุช. ูู ูุฐุง ุงููุซุงูุ ุชุชููู ุทุจูุฉ ุงูู repository ูุฏููุง ูู ุญุฒูุฉ `todos_repository`.

**ุทุจูุฉ ุงููููุฒุงุช**

ุชุญุชูู ูุฐู ุงูุทุจูุฉ ุนูู ุฌููุน ุงูููุฒุงุช ูุญุงูุงุช ุงูุงุณุชุฎุฏุงู ุงูุฎุงุตุฉ ุจุงูุชุทุจูู. ุชุชุถูู ูู ููุฒุฉ ุนุงุฏุฉู ุจุนุถ ุนูุงุตุฑ ุงููุงุฌูุฉ (UI) ูููุทู ุงูุนูู. ูุฌุจ ุฃู ุชููู ุงูููุฒุงุช ูุณุชููุฉ ุนู ุจุนุถูุง ุงูุจุนุถ ูุชุณููู ุฅุถุงูุชูุง ุฃู ุฅุฒุงูุชูุง ุฏูู ุงูุชุฃุซูุฑ ุนูู ุจููุฉ ูุงุนุฏุฉ ุงูููุฏ. ุถูู ูู ููุฒุฉุ ูุชู ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูููุฒุฉ ูููุทู ุงูุนูู ุจูุงุณุทุฉ blocs. ุชุชูุงุนู ุงูู blocs ูุน ุจุฏูู ุฃู ูุน ูุณุชูุฏุนุงุช (repositories) ูุชุนุฏุฏุฉ. ุชุณุชุฌูุจ ุงูู blocs ููุฃุญุฏุงุซ (events) ูุชุตุฏุฑ ุงูุญุงูุงุช (states) ุงูุชู ุชุคุฏู ุฅูู ุชุบููุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู. ุงูุฃุฏูุงุช (widgets) ูู ูู ููุฒุฉ ุชุนุชูุฏ ุนุงุฏุฉู ุนูู ุงูู bloc ุงูููุงุธุฑ ูุชููู ุจุนุฑุถ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุจูุงุกู ุนูู ุงูุญุงูุฉ ุงูุญุงููุฉ. ูููู ููุงุฌูุฉ ุงููุณุชุฎุฏู ุฅุนูุงู ุงูู bloc ุจุฅุฏุฎุงูุงุช ุงููุณุชุฎุฏู ุนุจุฑ ุงูุฃุญุฏุงุซ. ูู ูุฐุง ุงููุซุงูุ ูุชููู ุชุทุจูููุง ูู ุงูููุฒุงุช ุงูุชุงููุฉ: `home`ุ `todos_overview`ุ `stats`ุ ู `edit_todos`.

ุงูุขู ุจุนุฏ ุฃู ุงุณุชุนุฑุถูุง ุงูุทุจูุงุช ุนูู ูุณุชูู ุนุงููุ ููุจุฏุฃ ุจุจูุงุก ุชุทุจูููุง ุจุฏุกูุง ูู ุทุจูุฉ ุงูุจูุงูุงุช!

## ุทุจูุฉ ุงูุจูุงูุงุช

ุทุจูุฉ ุงูุจูุงูุงุช ูู ุงูุทุจูุฉ ุงูุฃุฏูู ูู ุชุทุจูููุง ูุชุชููู ูู ูููุฑู ุงูุจูุงูุงุช ุงูุฎุงู. ุงูุญุฒู ุงูููุฌูุฏุฉ ูู ูุฐู ุงูุทุจูุฉ ุชูุนูู ุฃุณุงุณุงู ุจูุตุฏุฑ ุงูุจูุงูุงุช ูููููุฉ ุงูุญุตูู ุนูููุง. ูู ุญุงูุชูุงุ ุณุชุชููู ุทุจูุฉ ุงูุจูุงูุงุช ูู `TodosApi`ุ ููู ูุงุฌูุฉ (interface)ุ ู`LocalStorageTodosApi`ุ ููู ุชูููุฐ ูู `TodosApi` ูุนุชูุฏ ุนูู `shared_preferences`.

### TodosApi

ุญุฒูุฉ `todos_api` ุณุชุตุฏุฑ ูุงุฌูุฉ ุนุงูุฉ ููุชูุงุนู ูุน ูุฅุฏุงุฑุฉ ุงูููุงู (todos). ูุงุญููุง ุณูููู ุจุชูููุฐ `TodosApi` ุจุงุณุชุฎุฏุงู `shared_preferences`. ูุฌูุฏ ุชุฌุฑูุฏ (abstraction) ูุฌุนู ูู ุงูุณูู ุฏุนู ุชูููุฐุงุช ุฃุฎุฑู ุฏูู ุงูุญุงุฌุฉ ูุชุบููุฑ ุฃู ุฌุฒุก ุขุฎุฑ ูู ุงูุชุทุจูู. ุนูู ุณุจูู ุงููุซุงูุ ูููููุง ูุงุญููุง ุฅุถุงูุฉ `FirestoreTodosApi` ุงูุชู ุชุณุชุฎุฏู `cloud_firestore` ุจุฏูุงู ูู `shared_preferences` ูุน ุชุบููุฑุงุช ุจุฑูุฌูุฉ ุทูููุฉ ูู ุจุงูู ุงูุชุทุจูู.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/packages/todos_api/pubspec.yaml"
	title="packages/todos_api/pubspec.yaml"
/>

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/packages/todos_api/lib/src/todos_api.dart"
	title="packages/todos_api/lib/src/todos_api.dart"
/>

#### ูููุฐุฌ Todo

ุจุนุฏ ุฐูู ุณููุนุฑูู ูููุฐุฌ `Todo`.

ุฃูู ูุง ูุฌุจ ููุงุญุธุชู ูู ุฃู ูููุฐุฌ `Todo` ูุง ูุนูุด ุฏุงุฎู ุชุทุจูููุง ูุจุงุดุฑุฉ โ ุจู ูู ุฌุฒุก ูู ุญุฒูุฉ `todos_api`. ุงูุณุจุจ ูู ุฐูู ูู ุฃู `TodosApi` ุชูุนุฑูู ูุงุฌูุงุช ุจุฑูุฌูุฉ ุชูุฑุฌุน ุฃู ุชุณุชูุจู ูุงุฆูุงุช `Todo`. ุงููููุฐุฌ ูู ุชูุซูู ุฏูุฑุชู (Dart) ูููุงุฆู ุงูุฎุงู `Todo` ุงูุฐู ุณูุชู ุชุฎุฒููู ูุงุณุชุฑุฌุงุนู.

ูุณุชุฎุฏู ูููุฐุฌ `Todo` ููุชุจุฉ  
[json_serializable](https://pub.dev/packages/json_serializable) ููุนุงูุฌุฉ ุงูุณูุฑูุงูุงูุฒูุดู (serialization) ูููู (deserialization) ูู ูุฅูู JSON. ุฅุฐุง ููุช ุชุชุจุน ูุฐุง ุงูุดุฑุญุ ุณูุชูุฌุจ ุนููู ุชุดุบูู  
[ุฎุทูุฉ ุชูููุฏ ุงูุฃููุงุฏ](https://pub.dev/packages/json_serializable#running-the-code-generator) ูุญู ุฃุฎุทุงุก ุงููุชุฑุฌู.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/packages/todos_api/lib/src/models/todo.dart"
	title="packages/todos_api/lib/src/models/todo.dart"
/>

ูููุฑ `json_map.dart` ุชุนุฑูู ููุน (typedef) ูููุณุงุนุฏุฉ ูู ูุฑุงุฌุนุฉ ุงูุฃููุงุฏ ูุงูุชูููุญ (linting).

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/packages/todos_api/lib/src/models/json_map.dart"
	title="packages/todos_api/lib/src/models/json_map.dart"
/>

ูููุฐุฌ `Todo` ููุนุฑูู ูู `todos_api/models/todo.dart` ููุชู ุชุตุฏูุฑู ุนุจุฑ `package:todos_api/todos_api.dart`.

#### ุชุญุฏูุซ ุงูุชุตุฏูุฑุงุช

ูููุฐุฌ `Todo` ู `TodosApi` ูุชู ุชุตุฏูุฑููุง ุนุจุฑ ูููุงุช ุงูุจุฑููู (barrel files). ูุงุญุธ ููู ุฃููุง ูุง ูุณุชูุฑุฏ ุงููููุฐุฌ ูุจุงุดุฑุฉุ ุจู ูุณุชูุฑุฏูุง ูู `lib/src/todos_api.dart` ูุน ุฅุดุงุฑุฉ ุฅูู ููู ุงูุจุฑููู ุงูุฎุงุต ุจุงูุญุฒูุฉ:
`import 'package:todos_api/todos_api.dart';`. ุญุฏูุซ ูููุงุช ุงูุจุฑููู ูุฐู ูุญู ุฃู ุฃุฎุทุงุก ุงุณุชูุฑุงุฏ ูุชุจููุฉ:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/packages/todos_api/lib/src/models/models.dart"
	title="packages/todos_api/lib/src/models/models.dart"
/>

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/packages/todos_api/lib/todos_api.dart"
	title="packages/todos_api/lib/todos_api.dart"
/>

#### Streams ููุงุจู Futures

ูู ูุณุฎุฉ ุณุงุจูุฉ ูู ูุฐุง ุงูุฏุฑุณุ ูุงูุช `TodosApi` ุชุนุชูุฏ ุนูู `Future` ูููุณุช ุนูู `Stream`.

ููุซุงู ุนูู API ูุจูู ุนูู `Future`ุ ุฑุงุฌุน  
[ุชูููุฐ ุจุฑุงูู ุฅูุฌุงู ูู ุนููุงุช ุนูุงุฑุฉ ุงูุชุทุจููุงุช](https://github.com/brianegan/flutter_architecture_samples/tree/master/todos_repository_core).

ูููู ุฃู ูุชููู ุงูุชูููุฐ ุงููุงุฆู ุนูู `Future` ูู ุทุฑูููู: `loadTodos` ู`saveTodos` (ูุงุญุธ ุงูุฌูุน). ูุฐุง ูุนูู ุฃูู ูุฌุจ ุชูููุฑ ูุงุฆูุฉ ูุงููุฉ ูู ุงูููุงู ูู ูู ูุฑุฉ ูุชู ูููุง ุงุณุชุฏุนุงุก ุงูุทุฑููุฉ.

- ุฅุญุฏู ุงููููุฏ ูู ูุฐุง ุงูุฃุณููุจ ูู ุฃู ุนูููุงุช CRUD ุงูููุงุณูุฉ (ุฅูุดุงุกุ ูุฑุงุกุฉุ ุชุญุฏูุซุ ุญุฐู) ุชุชุทูุจ ุฅุฑุณุงู ุงููุงุฆูุฉ ุงููุงููุฉ ููููุงู ูุน ูู ุงุณุชุฏุนุงุก. ุนูู ุณุจูู ุงููุซุงูุ ูู ุดุงุดุฉ ุฅุถุงูุฉ ูููุฉุ ูุง ูููููุง ููุท ุฅุฑุณุงู ุงููููุฉ ุงููุถุงูุฉุ ุจู ูุฌุจ ุชุชุจุน ุงููุงุฆูุฉ ุงููุงููุฉ ูุฅุฑุณุงู ุงููุงุฆูุฉ ุงูุฌุฏูุฏุฉ ูุงููุฉ ุนูุฏ ุญูุธ ุงูุชุบููุฑุงุช.
- ููุฏ ุขุฎุฑ ูู ุฃู `loadTodos` ุชูุฏู ุงูุจูุงูุงุช ููุฑุฉ ูุงุญุฏุฉ ููุท. ูุฐูู ูุฌุจ ุฃู ูุญุชูู ุงูุชุทุจูู ุนูู ููุทู ูุทูุจ ุงูุชุญุฏูุซุงุช ุจุดูู ุฏูุฑู.

ูู ุงูุชูููุฐ ุงูุญุงููุ ุชุชูุญ `TodosApi` ุฏูู `Stream<List<Todo>>` ุนุจุฑ `getTodos()` ูุงูุฐู ูููู ุจุฅุจูุงุบ ุฌููุน ุงููุดุชุฑููู ุจุงูุชุญุฏูุซุงุช ูู ุงูููุช ุงูุญูููู ุนูุฏ ุญุฏูุซ ุชุบููุฑุงุช ูู ูุงุฆูุฉ ุงูููุงู.

ุจุงูุฅุถุงูุฉ ุฅูู ุฐููุ ูููู ุฅูุดุงุก ุงูููุงู ูุญุฐููุง ูุชุญุฏูุซูุง ุจุดูู ูููุฑุฏ. ุนูู ุณุจูู ุงููุซุงูุ ูุชู ุญุฐู ุงููููุฉ ุฃู ุญูุธูุง ุจุชูุฑูุฑ ุงููููุฉ ูุญุฏูุง ููุท ููุณูุท. ูุง ููุฒู ุชูููุฑ ุงููุงุฆูุฉ ุงููุงููุฉ ุงููุญุฏุซุฉ ูู ูู ูุฑุฉ.

### LocalStorageTodosApi

ุชููู ูุฐู ุงูุญุฒูุฉ ุจุชูููุฐ `todos_api` ุจุงุณุชุฎุฏุงู  
ุญุฒูุฉ [`shared_preferences`](https://pub.dev/packages/shared_preferences).

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/packages/local_storage_todos_api/pubspec.yaml"
	title="packages/local_storage_todos_api/pubspec.yaml"
/>

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/packages/local_storage_todos_api/lib/src/local_storage_todos_api.dart"
	title="packages/local_storage_todos_api/lib/src/local_storage_todos_api.dart"
/>

## ุทุจูุฉ ุงููุณุชูุฏุน (Repository Layer)

ููุนุฏู [ุงููุณุชูุฏุน](/architecture#repository) ุฌุฒุกูุง ูู ุทุจูุฉ ููุทู ุงูุนูู/ุงูุฃุนูุงู. ูุนุชูุฏ ุงููุณุชูุฏุน ุนูู ูุงุญุฏ ุฃู ุฃูุซุฑ ูู ูุฒูุฏู ุงูุจูุงูุงุช ุงูุฐูู ูุง ููุชูููู ูููุฉ ููุทููุฉ ููุฃุนูุงูุ ููุฌูุน ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (APIs) ุงูุฎุงุตุฉ ุจูู ูู ูุงุฌูุงุช ุชููุฑ ูููุฉ ุฃุนูุงู. ุจุงูุฅุถุงูุฉ ุฅูู ุฐููุ ูุณุงุนุฏ ูุฌูุฏ ุทุจูุฉ ุงููุณุชูุฏุน ูู ุชุฌุฑูุฏ ุนูููุฉ ุงูุญุตูู ุนูู ุงูุจูุงูุงุช ุนู ุจููุฉ ุงูุชุทุจููุ ููุง ูุชูุญ ููุง ุชุบููุฑ ููุงู ุฃู ุทุฑููุฉ ุชุฎุฒูู ุงูุจูุงูุงุช ุฏูู ุงูุชุฃุซูุฑ ุนูู ุจุงูู ุฃุฌุฒุงุก ุงูุชุทุจูู.

### TodosRepository

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/packages/todos_repository/lib/src/todos_repository.dart"
	title="packages/todos_repository/lib/src/todos_repository.dart"
/>

ูุชุทูุจ ุฅูุดุงุก ูุณุฎุฉ ูู ุงููุณุชูุฏุน ุชุญุฏูุฏ `TodosApi`ุ ุงูุฐู ูุงูุดูุงู ุณุงุจููุง ูู ูุฐุง ุงูุฏูููุ ูุฐุง ูููุง ุจุฅุถุงูุชู ูุงุนุชูุงุฏ ูู ููู `pubspec.yaml` ุงูุฎุงุต ุจูุง:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/packages/todos_repository/pubspec.yaml"
	title="packages/todos_repository/pubspec.yaml"
/>

#### ุชุตุฏูุฑ ุงูููุชุจุฉ

ุจุงูุฅุถุงูุฉ ุฅูู ุชุตุฏูุฑ ูุตู `TodosRepository`ุ ูููู ุฃูุถูุง ุจุชุตุฏูุฑ ูููุฐุฌ `Todo` ูู ุญุฒูุฉ `todos_api`. ุชุณุงูู ูุฐู ุงูุฎุทูุฉ ูู ููุน ุงูุฑุจุท ุงููุซูู ุจูู ุงูุชุทุจูู ููุฒูุฏู ุงูุจูุงูุงุช.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/packages/todos_repository/lib/todos_repository.dart"
	title="packages/todos_repository/lib/todos_repository.dart"
/>

ูุฑุฑูุง ุฅุนุงุฏุฉ ุชุตุฏูุฑ ููุณ ูููุฐุฌ `Todo` ูู `todos_api` ุจุฏูุงู ูู ุชุนุฑูู ูููุฐุฌ ูููุตู ูู `todos_repository`ุ ูุฃููุง ูู ูุฐู ุงูุญุงูุฉ ููุชูู ุงูุณูุทุฑุฉ ุงููุงููุฉ ุนูู ูููุฐุฌ ุงูุจูุงูุงุช. ูู ุงูุนุฏูุฏ ูู ุงูุญุงูุงุชุ ูู ูููู ูุฒูุฏ ุงูุจูุงูุงุช ุดูุฆูุง ููููู ุงูุชุญูู ููู. ูู ูุฐู ุงูุญุงูุงุชุ ูุตุจุญ ูู ุงูุถุฑูุฑู ุจุดูู ูุชุฒุงูุฏ ุงูุญูุงุธ ุนูู ุชุนุฑููุงุช ุงูููุงุฐุฌ ุงูุฎุงุตุฉ ุจู ุฏุงุฎู ุทุจูุฉ ุงููุณุชูุฏุน ููุญูุงุธ ุนูู ุณูุทุฑุฉ ูุงููุฉ ุนูู ุงููุงุฌูุฉ ูุนูุฏ ุงูู API.

## ุทุจูุฉ ุงูุฎุงุตูุฉ (Feature Layer)

### ููุทุฉ ุงูุฏุฎูู (Entrypoint)

ููุทุฉ ุงูุฏุฎูู ูุชุทุจูููุง ูู `main.dart`. ูู ูุฐู ุงูุญุงูุฉุ ููุงู ุซูุงุซ ูุณุฎ:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/main_development.dart"
	title="lib/main_development.dart"
/>

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/main_staging.dart"
	title="lib/main_staging.dart"
/>

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/main_production.dart"
	title="lib/main_production.dart"
/>

ุฃุจุฑุฒ ูุง ูููุฒ ูุฐู ุงููุณุฎ ูู ุฃู ุงูุชูููุฐ ุงูููููุณ ูู
`local_storage_todos_api` ูุชู ุฅูุดุงุคู ุฏุงุฎู ูู ููุทุฉ ุฏุฎูู.

### ุงูุจูุชุณุชุฑุงุจ (Bootstrapping)

`bootstrap.dart` ูููู ุจุชุญููู ูุฑุงูุจ ุงูู `BlocObserver` ุงูุฎุงุต ุจูุง ูููุดุฆ ูุณุฎุฉ ูู
`TodosRepository`.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/bootstrap.dart"
	title="lib/bootstrap.dart"
/>

### ุงูุชุทุจูู (App)

`App` ูุบูู ููุฏูุฑ ุงูููุฌุช `RepositoryProvider` ุงูุฐู ูููุฑ ุงูู repository ูุฌููุน ุงูุฃุจูุงุก. ุจูุง ุฃู ุดุฌุฑุชู ุงูู widgets ุงูุฎุงุตุฉ ุจุตูุญุฉ `EditTodoPage` ูุตูุญุฉ `HomePage` ูู ููุญุฏุฑุงุช ูู `App`ุ
ููููู ูุฌููุน ุงูู blocs ูุงูู cubits ุงููุตูู ุฅูู ุงูู repository.

`AppView` ูููู ุจุฅูุดุงุก ุชุทุจูู `MaterialApp` ููุถุจุท ุงูุซูู ูุงูุชุนุฑูุจ (ุงูุชุฑุฌูุฉ).

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/app/app.dart"
	title="lib/app/app.dart"
/>

### ุงูุซูู (Theme)

ูููุฑ ูุฐุง ุชุนุฑูู ุงูุซูู ูููุถุน ุงููุงุชุญ ูุงูุบุงูู.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/theme/theme.dart"
	title="lib/theme/theme.dart"
/>

### ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (Home)

ุงูููุฒุฉ ุงูุฑุฆูุณูุฉ ูุณุคููุฉ ุนู ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุชุจููุจ ุงููุฎุชุงุฑ ุญุงููุงู ูุนุฑุถ ุงูุดุฌุฑุฉ ุงููุฑุนูุฉ ุงูููุงุณุจุฉ.

#### HomeState

ููุงู ุญุงูุชุงู ููุท ูุฑุชุจุทุชุงู ุจุงูุดุงุดุชูู: `todos` ู `stats`.

:::note

`EditTodo` ูู ูุณุงุฑ ูููุตู ูุฐูู ููุณุช ุฌุฒุกูุง ูู `HomeState`.

:::

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/home/cubit/home_state.dart"
	title="lib/home/cubit/home_state.dart"
/>

#### HomeCubit

ุงูู cubit ููุงุณุจ ููุง ุจุณุจุจ ุจุณุงุทุฉ ููุทู ุงูุนูู. ูุฏููุง ุฏุงูุฉ ูุงุญุฏุฉ `setTab` ูุชุบููุฑ ุงูุชุจููุจ.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/home/cubit/home_cubit.dart"
	title="lib/home/cubit/home_cubit.dart"
/>

#### HomeView

ุงูููู `view.dart` ูู ููู ุชุฌููุนู (barrel file) ูุตุฏุฑ ูู ููููุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงููุชุนููุฉ ุจููุฒุฉ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/home/view/view.dart"
	title="lib/home/view/view.dart"
/>

ุงูููู `home_page.dart` ูุญุชูู ุนูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ููุตูุญุฉ ุงูุฌุฐุฑูุฉ ุงูุชู ูุฑุงูุง ุงููุณุชุฎุฏู ุนูุฏ ุฅุทูุงู ุงูุชุทุจูู.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/home/view/home_page.dart"
	title="lib/home/view/home_page.dart"
/>

ุชูุซูู ูุจุณุท ูุดุฌุฑุฉ ุงูููุฌุช ุงูุฎุงุตุฉ ุจู `HomePage` ูู:

<HomePageTreeSnippet />

ุชูุฏู `HomePage` ูุณุฎุฉ ูู `HomeCubit` ุฅูู `HomeView`. ูุณุชุฎุฏู `HomeView` ุงูุฏุงูุฉ `context.select` ูุฅุนุงุฏุฉ ุงูุจูุงุก ุจุดูู ุงูุชูุงุฆู ูููุง ุชุบูุฑ ุงูุชุจููุจ. ูุฐุง ูุณูุญ ููุง ุจุงุฎุชุจุงุฑ ุงูููุฌุช `HomeView` ุจุณูููุฉ ุนู ุทุฑูู ุชูููุฑ ูุณุฎุฉ Mock ูู `HomeCubit` ูุชูุซูู ุงูุญุงูุฉ (stubbing state).

ุดุฑูุท ุงูุชุทุจูู ุงูุณููู (`BottomAppBar`) ูุญุชูู ุนูู ุฃุฒุฑุงุฑ `HomeTabButton` ุงูุชู ุชุณุชุฏุนู `setTab` ุนูู `HomeCubit`. ูุชู ุงูุญุตูู ุนูู ูุณุฎุฉ ุงูู cubit ุนุจุฑ `context.read` ููุชู ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ ุงูููุงุณุจุฉ ุนูู ูุฐู ุงููุณุฎุฉ.

:::caution

`context.read` ูุง ูุณุชูุน ููุชุบููุฑุงุชุ ูุณุชุฎุฏู ููุท ูููุตูู ุฅูู `HomeCubit` ูุงุณุชุฏุนุงุก `setTab`.

:::

### ููุฎุต ุงูููุงู (TodosOverview)

ููุฒุฉ ููุฎุต ุงูููุงู ุชุชูุญ ูููุณุชุฎุฏููู ุฅุฏุงุฑุฉ ููุงููู ูู ุฎูุงู ุงูุฅูุดุงุกุ ุงูุชุนุฏููุ ุงูุญุฐูุ ูุงูุชุตููุฉ.

#### ุฃุญุฏุงุซ TodosOverviewEvent

ูููุดุฆ ุงูููู `todos_overview/bloc/todos_overview_event.dart` ููุนุฑู ููู ุงูุฃุญุฏุงุซ.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/todos_overview/bloc/todos_overview_event.dart"
	title="lib/todos_overview/bloc/todos_overview_event.dart"
/>

- `TodosOverviewSubscriptionRequested`: ูุฐุง ูู ุงูุญุฏุซ ุงูุฐู ููุทูู ุนูุฏ ุจุฏุก ุงูุชุดุบูู. ุนูุฏ ุงุณุชูุจุงููุ ูููู ุงูู bloc ุจุงูุงุดุชุฑุงู ูู ุชูุงุฑ ุงูููุงู ูู `TodosRepository`.
- `TodosOverviewTodoDeleted`: ูุฐุง ุงูุญุฏุซ ูุญุฐู ูููุฉ.
- `TodosOverviewTodoCompletionToggled`: ูููู ุจุชุจุฏูู ุญุงูุฉ ุฅููุงู ุงููููุฉ.
- `TodosOverviewToggleAllRequested`: ูุจุฏู ุญุงูุฉ ุฅููุงู ูู ุงูููุงู.
- `TodosOverviewClearCompletedRequested`: ูุญุฐู ูู ุงูููุงู ุงูููุชููุฉ.
- `TodosOverviewUndoDeletionRequested`: ูุชุฑุงุฌุน ุนู ุญุฐู ูููุฉุ ุนูู ุณุจูู ุงููุซุงู ูู ุญุงูุฉ ุงูุญุฐู ุจุงูุฎุทุฃ.
- `TodosOverviewFilterChanged`: ูุฃุฎุฐ ูุฑุดุญ ุงูุนุฑุถ `TodosViewFilter` ููุณูุท ููุบูุฑ ุงูุนุฑุถ ุจุชุทุจูู ุงูููุชุฑ.

#### ุงูุญุงูุฉ TodosOverviewState

ูููุดุฆ ุงูููู `todos_overview/bloc/todos_overview_state.dart` ููุนุฑู ููู ุงูุญุงูุฉ.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/todos_overview/bloc/todos_overview_state.dart"
	title="lib/todos_overview/bloc/todos_overview_state.dart"
/>

`TodosOverviewState` ูุญุชูุธ ุจูุงุฆูุฉ ุงูููุงูุ ุงููุฑุดุญ ุงููุดุทุ ุงููููุฉ ุงููุญุฐููุฉ ุงูุฃุฎูุฑุฉ (`lastDeletedTodo`)ุ ูุงูุญุงูุฉ ุงูุนุงูุฉ.

:::note

ุฅูู ุฌุงูุจ ุงูู getters ูุงูู setters ุงูุงูุชุฑุงุถูุฉุ ูุฏููุง getter ูุฎุตุต ูุณูู `filteredTodos`. ูุณุชุฎุฏู ูุงุฌูุฉ ุงููุณุชุฎุฏู `BlocBuilder` ูููุตูู ุฅูุง ุฅูู `state.filteredTodos` ุฃู `state.todos`.

:::

#### ุงูู Bloc - TodosOverviewBloc

ูููุดุฆ ุงูููู `todos_overview/bloc/todos_overview_bloc.dart`.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/todos_overview/bloc/todos_overview_bloc.dart"
	title="lib/todos_overview/bloc/todos_overview_bloc.dart"
/>

:::note

ุงูู bloc ูุง ููุดุฆ ูุณุฎุฉ ูู `TodosRepository` ุฏุงุฎูููุง.
ุจุฏูุงู ูู ุฐููุ ูุนุชูุฏ ุนูู ุญูู ูุณุฎุฉ ุงูู repository ุนุจุฑ ุงููููุดุฆ (constructor).

:::

##### ุนูุฏ ุทูุจ ุงูุงุดุชุฑุงู (onSubscriptionRequested)

ุนูุฏ ุฅุถุงูุฉ ุญุฏุซ `TodosOverviewSubscriptionRequested`ุ ูุจุฏุฃ ุงูู bloc ุจุฅุตุฏุงุฑ ุญุงูุฉ `loading`. ูู ุงูููุงุจูุ ูููู ููุงุฌูุฉ ุงููุณุชุฎุฏู ุนุฑุถ ูุคุดุฑ ุชุญููู.

ุจุนุฏ ุฐููุ ูุณุชุฎุฏู `emit.forEach<List<Todo>>( ... )` ุงูุชู ุชูุดุฆ ุงุดุชุฑุงููุง ุนูู ุชูุงุฑ ุงูููุงู ูู `TodosRepository`.

:::caution

`emit.forEach()` ููุณุช ููุณูุง `forEach()` ุงููุณุชุฎุฏูุฉ ูู ุงูููุงุฆู. ูุฐู ุงูุฏุงูุฉ ุชุณูุญ ููู bloc ุจุงูุงุดุชุฑุงู ูู `Stream` ูุฅุตุฏุงุฑ ุญุงูุฉ ุฌุฏูุฏุฉ ูุน ูู ุชุญุฏูุซ.

:::

:::note

`stream.listen` ูุง ูุชู ุงุณุชุฏุนุงุคู ูุจุงุดุฑุฉู ูู ูุฐุง ุงูุฏููู. ุงุณุชุฎุฏุงู
`await emit.forEach()` ูู ููุท ุฃุญุฏุซ ููุงุดุชุฑุงู ูู ุชูุงุฑุงุช ูุณูุญ ููู bloc ุจุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงู ุฏุงุฎูููุง.

:::

ุจูุฌุฑุฏ ุงูุชุนุงูู ูุน ุงูุงุดุชุฑุงูุ ุณูุชู ุงูุชุนุงูู ูุน ุงูุฃุญุฏุงุซ ุงูุฃุฎุฑู ูุซู ุฅุถุงูุฉุ ุชุนุฏููุ ูุญุฐู ุงูููุงู.

##### ุนูุฏ ุญูุธ ุงููููุฉ (onTodoSaved)

`_onTodoSaved` ุจุจุณุงุทุฉ ูุณุชุฏุนู `_todosRepository.saveTodo(event.todo)`.

:::note

`emit` ูุง ูุชู ุงุณุชุฏุนุงุคู ูู ุฏุงุฎู `onTodoSaved` ูุงูุนุฏูุฏ ูู ูุนุงูุฌุงุช ุงูุฃุญุฏุงุซ ุงูุฃุฎุฑู.
ุจุฏูุงู ูู ุฐููุ ุชููู ูุฐู ุงููุนุงูุฌุงุช ุจุฅุนูุงู ุงูู repository ุงูุฐู ูุตุฏุฑ ูุงุฆูุฉ ูุญุฏุซุฉ ุนุจุฑ ุชูุงุฑ ุงูููุงู. ุฑุงุฌุน ูุณู [ุชุฏูู ุงูุจูุงูุงุช](#data-flow) ููุฒูุฏ ูู ุงูุชูุงุตูู.

:::

##### ุงูุชุฑุงุฌุน (Undo)

ููุฒุฉ ุงูุชุฑุงุฌุน ุชุชูุญ ูููุณุชุฎุฏููู ุงุณุชุนุงุฏุฉ ุขุฎุฑ ุนูุตุฑ ุชู ุญุฐูู.

`_onTodoDeleted` ูููู ุจุดูุฆูู: ุฃููุงูุ ูุตุฏุฑ ุญุงูุฉ ุฌุฏูุฏุฉ ูุน ุงููููุฉ ุงูุชู ุณูุชู ุญุฐููุง. ุซู ูุญุฐู ุงููููุฉ ุนู ุทุฑูู ุงุณุชุฏุนุงุก ุงูู repository.

`_onUndoDeletionRequested` ููููุฐ ุนูุฏ ุงุณุชูุจุงู ุญุฏุซ ุทูุจ ุงูุชุฑุงุฌุน ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู.

ูููู `_onUndoDeletionRequested` ุจูุง ููู:

- ูุญูุธ ูุคูุชูุง ูุณุฎุฉ ูู ุงููููุฉ ุงููุญุฐููุฉ ุงูุฃุฎูุฑุฉ.
- ูุญุฏุซ ุงูุญุงูุฉ ุจุฅุฒุงูุฉ `lastDeletedTodo`.
- ูุนูุณ ุนูููุฉ ุงูุญุฐู.

##### ุงูุชุตููุฉ (Filtering)

`_onFilterChanged` ูุตุฏุฑ ุญุงูุฉ ุฌุฏูุฏุฉ ูุน ุงูููุชุฑ ุงูุฌุฏูุฏ.

#### ุงูููุงุฐุฌ (Models)

ููุฌุฏ ููู ูููุฐุฌ ูุงุญุฏ ูุชุนุงูู ูุน ุชุตููุฉ ุงูุนุฑุถ.

`todos_view_filter.dart` ูู enum ููุซู ุงูุซูุงุซุฉ ููุงุชุฑ ููุฑุคูุฉ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฏูุงู ูุชุทุจูู ุงูููุชุฑ.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/todos_overview/models/todos_view_filter.dart"
	title="lib/todos_overview/models/todos_view_filter.dart"
/>

`models.dart` ูู ููู ุชุฌููุนู ูุฅุนุงุฏุฉ ุงูุชุตุฏูุฑ.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/todos_overview/models/models.dart"
	title="lib/todos_overview/models/models.dart"
/>

ุจุนุฏ ุฐููุ ููููู ูุธุฑุฉ ุนูู `TodosOverviewPage`.

#### ุตูุญุฉ ููุฎุต ุงูููุงู TodosOverviewPage

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/todos_overview/view/todos_overview_page.dart"
	title="lib/todos_overview/view/todos_overview_page.dart"
/>

ุชูุซูู ูุจุณุท ูุดุฌุฑุฉ ุงูููุฌุช ุงูุฎุงุตุฉ ุจู `TodosOverviewPage` ูู:

<TodosOverviewPageTreeSnippet />

ุชูุงููุง ูุซู ููุฒุฉ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉุ ุชููู `TodosOverviewPage` ุจุชูููุฑ ูุณุฎุฉ ูู
`TodosOverviewBloc` ููุดุฌุฑุฉ ุงููุฑุนูุฉ ุนุจุฑ `BlocProvider<TodosOverviewBloc>`ุ
ููุง ููุชุตุฑ ูุทุงู ูุฐุง ุงูู bloc ุนูู ุงูููุฌุชุงุช ุงูููุฌูุฏุฉ ุชุญุช `TodosOverviewPage` ููุท.

ููุงู ุซูุงุซ ููุฏุฌุชุงุช ุชุณุชูุน ููุชุบููุฑุงุช ูู `TodosOverviewBloc`.

1. ุงูุฃููู ูู `BlocListener` ูุณุชูุน ููุฃุฎุทุงุก. ุงูุฏุงูุฉ `listener` ุชูุณุชุฏุนู ููุท ุญูู ูุนูุฏ `listenWhen` ุงููููุฉ `true`. ุฅุฐุง ูุงูุช ุงูุญุงูุฉ `TodosOverviewStatus.failure`ุ ูุชู ุนุฑุถ `SnackBar`.

2. ูุฏููุง ุฃูุถูุง `BlocListener` ุขุฎุฑ ูุณุชูุน ูุนูููุงุช ุงูุญุฐู. ุนูุฏ ุญุฐู ูููุฉุ
   ูุนุฑุถ `SnackBar` ูุน ุฒุฑ ุงูุชุฑุงุฌุน. ุฅุฐุง ุถุบุท ุงููุณุชุฎุฏู ุนูู ุงูุชุฑุงุฌุนุ ูุชู ุฅุถุงูุฉ ุญุฏุซ `TodosOverviewUndoDeletionRequested` ุฅูู ุงูู bloc.

3. ูุฃุฎูุฑูุง ูุณุชุฎุฏู `BlocBuilder` ูุจูุงุก ูุงุฆูุฉ ุชุธูุฑ ุงูููุงู.

ุดุฑูุท ุงูุชุทุจูู (`AppBar`) ูุญุชูู ุนูู ุนูููุชูู ูุฑููุน ููุงุฆู (dropdowns)
ููุชุตููุฉ ูุงูุชุนุฏูู ุนูู ุงูููุงู.

:::note

ุงูุฃุญุฏุงุซ `TodosOverviewTodoCompletionToggled` ู `TodosOverviewTodoDeleted`
ุชูุช ุฅุถุงูุชูุง ุฅูู ุงูู bloc ุจุงุณุชุฎุฏุงู `context.read`.

:::

ุงูููู `view.dart` ูู ููู ุชุฌููุนู ูุตุฏุฑ `todos_overview_page.dart`.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/todos_overview/view/view.dart"
	title="lib/todos_overview/view/view.dart"
/>

#### ุงูููุฌุชุงุช (Widgets)

`widgets.dart` ูู ููู ุชุฌููุนู ุขุฎุฑ ูุตุฏุฑ ุฌููุน ุงูููููุงุช ุงููุณุชุฎุฏูุฉ ุถูู ููุฒุฉ `todos_overview`.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/todos_overview/widgets/widgets.dart"
	title="lib/todos_overview/widgets/widgets.dart"
/>

`todo_list_tile.dart` ูู `ListTile` ููู ุนูุตุฑ ูููุฉ.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/todos_overview/widgets/todo_list_tile.dart"
	title="lib/todos_overview/widgets/todo_list_tile.dart"
/>

`todos_overview_options_button.dart` ูุนุฑุถ ุฎูุงุฑูู ููุชุญูู ุจุงูููุงู:

- `toggleAll`
- `clearCompleted`

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/todos_overview/widgets/todos_overview_options_button.dart"
	title="lib/todos_overview/widgets/todos_overview_options_button.dart"
/>

`todos_overview_filter_button.dart` ูุนุฑุถ ุซูุงุซุฉ ุฎูุงุฑุงุช ููุชุตููุฉ:

- `all`
- `activeOnly`
- `completedOnly`

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/todos_overview/widgets/todos_overview_filter_button.dart"
	title="lib/todos_overview/widgets/todos_overview_filter_button.dart"
/>

### ุงูุฅุญุตุงุฆูุงุช (Stats)

ููุฒุฉ ุงูุฅุญุตุงุฆูุงุช ุชุนุฑุถ ูุนูููุงุช ุนู ุงูููุงู ุงููุดุทุฉ ูุงูููุชููุฉ.

#### StatsState

`StatsState` ูุญุชูุธ ุจูุนูููุงุช ููุฎุตุฉ ูุญุงูุฉ `StatsStatus` ุงูุญุงููุฉ.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/stats/bloc/stats_state.dart"
	title="lib/stats/bloc/stats_state.dart"
/>

#### StatsEvent

ูุฏู `StatsEvent` ุญุฏุซ ูุญูุฏ ูู `StatsSubscriptionRequested`:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/stats/bloc/stats_event.dart"
	title="lib/stats/bloc/stats_event.dart"
/>

#### StatsBloc

`StatsBloc` ูุนุชูุฏ ุนูู `TodosRepository` ููุง ูู ุงูุญุงู ูุน `TodosOverviewBloc`.
ูุดุชุฑู ูู ุชูุงุฑ ุงูููุงู ุนุจุฑ `_todosRepository.getTodos`.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/stats/bloc/stats_bloc.dart"
	title="lib/stats/bloc/stats_bloc.dart"
/>

#### ูุงุฌูุฉ ุงูุฅุญุตุงุฆูุงุช (Stats View)

`view.dart` ูู ุงูููู ุงูุชุฌููุนู ุงูุฎุงุต ุจุตูุญุฉ ุงูุฅุญุตุงุฆูุงุช `stats_page`.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/stats/view/view.dart"
	title="lib/stats/view/view.dart"
/>

`stats_page.dart` ูุญุชูู ุนูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ููุตูุญุฉ ุงูุชู ุชุนุฑุถ ุฅุญุตุงุกุงุช ุงูููุงู.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/stats/view/stats_page.dart"
	title="lib/stats/view/stats_page.dart"
/>

ุชูุซูู ูุจุณุท ูุดุฌุฑุฉ ุงูููุฌุช ุงูุฎุงุตุฉ ุจู `StatsPage` ูู:

<StatsPageTreeSnippet />

:::caution

ูู ูู `TodosOverviewBloc` ู `StatsBloc` ูุชูุงุตูุงู ูุน `TodosRepository`,
ููู ูู ุงูููู ููุงุญุธุฉ ุฃูู ูุง ููุฌุฏ ุชูุงุตู ูุจุงุดุฑ ุจูู ุงูู blocs. ุฑุงุฌุน ูุณู [ุชุฏูู ุงูุจูุงูุงุช](#data-flow)
ููุฒูุฏ ูู ุงูุชูุงุตูู.

:::

### ุชุนุฏูู ุงููููุฉ (EditTodo)

ููุฒุฉ `EditTodo` ุชุชูุญ ูููุณุชุฎุฏููู ุชุนุฏูู ูููุฉ ููุฌูุฏุฉ ูุญูุธ ุงูุชุบููุฑุงุช.

#### EditTodoState

`EditTodoState` ูุญุชูุธ ุจุงููุนูููุงุช ุงููุงุฒูุฉ ุฃุซูุงุก ุชุนุฏูู ูููุฉ.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/edit_todo/bloc/edit_todo_state.dart"
	title="lib/edit_todo/bloc/edit_todo_state.dart"
/>

#### ุฃุญุฏุงุซ EditTodoEvent

ุงูุฃุญุฏุงุซ ุงูุชู ูุณุชุฌูุจ ููุง ุงูู bloc ูู:

- `EditTodoTitleChanged`
- `EditTodoDescriptionChanged`
- `EditTodoSubmitted`

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/edit_todo/bloc/edit_todo_event.dart"
	title="lib/edit_todo/bloc/edit_todo_event.dart"
/>

#### EditTodoBloc

`EditTodoBloc` ูุนุชูุฏ ุนูู `TodosRepository` ูุซู `TodosOverviewBloc`
ู `StatsBloc`.

:::caution

ุนูู ุนูุณ ุงูู blocs ุงูุฃุฎุฑูุ `EditTodoBloc` ูุง ูุดุชุฑู ูู `_todosRepository.getTodos`.
ุฅูู bloc "ูููุชุงุจุฉ ููุท" ูุนูู ุฃูู ูุง ูุญุชุงุฌ ููุฑุงุกุฉ ุงููุนูููุงุช ูู ุงูู repository.

:::

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/edit_todo/bloc/edit_todo_bloc.dart"
	title="lib/edit_todo/bloc/edit_todo_bloc.dart"
/>

##### ุชุฏูู ุงูุจูุงูุงุช (Data Flow)

ุฑุบู ูุฌูุฏ ุงูุนุฏูุฏ ูู ุงูููุฒุงุช ุงูุชู ุชุนุชูุฏ ุนูู ููุณ ูุงุฆูุฉ ุงูููุงูุ ูุง ููุฌุฏ ุชูุงุตู ูุจุงุดุฑ ุจูู ุงูู blocs. ุจุฏูุงู ูู ุฐููุ ูู ููุฒุฉ ูุณุชููุฉ ูุชุนุชูุฏ ุนูู
`TodosRepository` ููุงุณุชูุงุน ููุชุบููุฑุงุช ูู ูุงุฆูุฉ ุงูููุงูุ ุจุงูุฅุถุงูุฉ ูุฃุฏุงุก ุงูุชุญุฏูุซุงุช ุนูููุง.

ุนูู ุณุจูู ุงููุซุงูุ ููุฒุฉ `EditTodos` ูุง ุชุนุฑู ุดูุฆูุง ุนู ููุฒุงุช `TodosOverview` ุฃู
`Stats`.

ุนูุฏ ุฅุฑุณุงู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุญุฏุซ `EditTodoSubmitted`:

- `EditTodoBloc` ูุชููู ููุทู ุงูุนูู ุจุชุญุฏูุซ ุงูู `TodosRepository`.
- `TodosRepository` ููุจูุบ ูู ูู `TodosOverviewBloc` ู `StatsBloc`.
- `TodosOverviewBloc` ู `StatsBloc` ููุจูุบุงู ุงููุงุฌูุฉ ุงูุชู ุชููู ุจุงูุชุญุฏูุซ ููููุง ููุญุงูุฉ ุงูุฌุฏูุฏุฉ.

#### ุตูุญุฉ ุชุนุฏูู ุงููููุฉ (EditTodoPage)

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_todos/lib/edit_todo/view/edit_todo_page.dart"
	title="lib/edit_todo/view/edit_todo_page.dart"
/>

ุชูุงููุง ูุซู ุงูููุฒุงุช ุงูุณุงุจูุฉุ ุชููุฑ `EditTodosPage` ูุณุฎุฉ ูู `EditTodosBloc` ุนุจุฑ `BlocProvider`.
ุนูู ุนูุณ ุงูููุฒุงุช ุงูุฃุฎุฑูุ ุตูุญุฉ `EditTodosPage` ูู ูุณุงุฑ ูููุตู ูููุฐุง ุชููุฑ ุทุฑููุฉ `static` ุงุณููุง `route`.
ูุฐุง ูุณูู ุฏูุน ุงูุตูุญุฉ ุนูู ููุฏุณ ุงูุชููู ุนุจุฑ `Navigator.of(context).push(...)`.

ุชูุซูู ูุจุณุท ูุดุฌุฑุฉ ุงูููุฌุช ุงูุฎุงุตุฉ ุจู `EditTodosPage` ูู:

<EditTodosPageTreeSnippet />

## ุงูููุฎุต

ูุฐุง ูู ุดูุกุ ููุฏ ุฃููููุง ุงูุฏุฑุณ ุงูุชุนูููู! ๐

ููููู ุงูุนุซูุฑ ุนูู ุงูููุฏ ุงููุตุฏุฑู ุงููุงูู ููุฐุง ุงููุซุงูุ ุจูุง ูู ุฐูู ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ ูุงูู widgetุ  
[ููุง](https://github.com/felangel/bloc/tree/master/examples/flutter_todos).