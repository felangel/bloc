---
title: ุชุทุจูู ุงูุทูุณ Flutter
description: ุฏููู ูุชุนููู ูุจูุงุก ุชุทุจูู ุทูุณ ูู Flutter ุจุงุณุชุฎุฏุงู ููุชุจุฉ Bloc.
sidebar:
  order: 5
---

import RemoteCode from '~/components/code/RemoteCode.astro';
import FlutterCreateSnippet from '~/components/tutorials/flutter-weather/FlutterCreateSnippet.astro';
import FeatureTreeSnippet from '~/components/tutorials/flutter-weather/FeatureTreeSnippet.astro';
import FlutterCreateApiClientSnippet from '~/components/tutorials/flutter-weather/FlutterCreateApiClientSnippet.astro';
import OpenMeteoModelsTreeSnippet from '~/components/tutorials/flutter-weather/OpenMeteoModelsTreeSnippet.astro';
import LocationJsonSnippet from '~/components/tutorials/flutter-weather/LocationJsonSnippet.astro';
import LocationDartSnippet from '~/components/tutorials/flutter-weather/LocationDartSnippet.astro';
import WeatherJsonSnippet from '~/components/tutorials/flutter-weather/WeatherJsonSnippet.astro';
import WeatherDartSnippet from '~/components/tutorials/flutter-weather/WeatherDartSnippet.astro';
import OpenMeteoModelsBarrelTreeSnippet from '~/components/tutorials/flutter-weather/OpenMeteoModelsBarrelTreeSnippet.astro';
import OpenMeteoLibrarySnippet from '~/components/tutorials/flutter-weather/OpenMeteoLibrarySnippet.astro';
import BuildRunnerBuildSnippet from '~/components/tutorials/flutter-weather/BuildRunnerBuildSnippet.astro';
import OpenMeteoApiClientTreeSnippet from '~/components/tutorials/flutter-weather/OpenMeteoApiClientTreeSnippet.astro';
import LocationSearchMethodSnippet from '~/components/tutorials/flutter-weather/LocationSearchMethodSnippet.astro';
import GetWeatherMethodSnippet from '~/components/tutorials/flutter-weather/GetWeatherMethodSnippet.astro';
import FlutterTestCoverageSnippet from '~/components/tutorials/flutter-weather/FlutterTestCoverageSnippet.astro';
import FlutterCreateRepositorySnippet from '~/components/tutorials/flutter-weather/FlutterCreateRepositorySnippet.astro';
import RepositoryModelsBarrelTreeSnippet from '~/components/tutorials/flutter-weather/RepositoryModelsBarrelTreeSnippet.astro';
import WeatherRepositoryLibrarySnippet from '~/components/tutorials/flutter-weather/WeatherRepositoryLibrarySnippet.astro';
import WeatherCubitTreeSnippet from '~/components/tutorials/flutter-weather/WeatherCubitTreeSnippet.astro';
import WeatherBarrelDartSnippet from '~/components/tutorials/flutter-weather/WeatherBarrelDartSnippet.astro';

![advanced](https://img.shields.io/badge/level-advanced-red.svg)

ูู ูุฐุง ุงูุฏุฑุณุ ุณูุจูู ุชุทุจูู ุทูุณ ูู Flutter ููุถุญ ููููุฉ ุฅุฏุงุฑุฉ ุนุฏุฉ cubits ูุชูููุฐ
ุงูุชุฎุตูุต ุงูุฏููุงูููู ููุซููุงุชุ ูุงูุณุญุจ ููุชุญุฏูุซุ ูุงูุนุฏูุฏ ูู ุงูููุฒุงุช ุงูุฃุฎุฑู. ุณูุนุชูุฏ
ุชุทุจูู ุงูุทูุณ ุนูู ุฌูุจ ุจูุงูุงุช ุงูุทูุณ ุงูุญูุฉ ูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุงูุนุงูุฉ
OpenMeteoุ ูุณูุดุฑุญ ููููุฉ ูุตู ุงูุชุทุจูู ุฅูู ุทุจูุงุช (ุงูุจูุงูุงุชุ ุงููุณุชูุฏุนุ ููุทู ุงูุฃุนูุงูุ
ูุทุจูุฉ ุงูุนุฑุถ).

![demo](~/assets/tutorials/flutter-weather.gif)

## ูุชุทูุจุงุช ุงููุดุฑูุน

ูุฌุจ ุฃู ูุชูุญ ุชุทุจูููุง ูููุณุชุฎุฏููู ูุง ููู:

- ุงูุจุญุซ ุนู ูุฏููุฉ ูู ุฎูุงู ุตูุญุฉ ูุฎุตุตุฉ ููุจุญุซ
- ุนุฑุถ ุชูุซูู ุจุตุฑู ูุฑูุญ ูุจูุงูุงุช ุงูุทูุณ ุงูุชู ูุชู ุฌูุจูุง ูู  
  [Open Meteo API](https://open-meteo.com)
- ุชุบููุฑ ูุญุฏุงุช ุงูููุงุณ ุงููุนุฑูุถุฉ (ูุชุฑู ููุงุจู ุฅูุจูุฑูุงู)

ุจุงูุฅุถุงูุฉ ุฅูู ุฐููุ

- ูุฌุจ ุฃู ูุนูุณ ููุถูุน ุงูุชุทุจูู ุญุงูุฉ ุงูุทูุณ ูููุฏููุฉ ุงููุฎุชุงุฑุฉ
- ูุฌุจ ุฃู ุชุณุชูุฑ ุญุงูุฉ ุงูุชุทุจูู ุนุจุฑ ุงูุฌูุณุงุช: ุฃู ูุฌุจ ุฃู ูุชุฐูุฑ ุงูุชุทุจูู ุญุงูุชู ุจุนุฏ
  ุงูุฅุบูุงู ูุฅุนุงุฏุฉ ุงููุชุญ (ุจุงุณุชุฎุฏุงู  
  [HydratedBloc](https://github.com/felangel/bloc/tree/master/packages/hydrated_bloc))

## ุงูููุงููู ุงูุฑุฆูุณูุฉ

- ูุฑุงูุจุฉ ุชุบููุฑุงุช ุงูุญุงูุฉ ุจุงุณุชุฎุฏุงู [BlocObserver](/ar/bloc-concepts#blocobserver).
- [BlocProvider](/ar/flutter-bloc-concepts#blocprovider)ุ ููู Widget ูู Flutter
  ุชููุฑ bloc ูุฃุจูุงุฆูุง.
- [BlocBuilder](/ar/flutter-bloc-concepts#blocbuilder)ุ ููู Widget ูู Flutter
  ุชุชููู ุฅุนุงุฏุฉ ุงูุจูุงุก ุงุณุชุฌุงุจุฉู ููุญุงูุงุช ุงูุฌุฏูุฏุฉ.
- ุชุฌูุจ ุนูููุงุช ุฅุนุงุฏุฉ ุงูุจูุงุก ุบูุฑ ุงูุถุฑูุฑูุฉ ุจุงุณุชุฎุฏุงู
  [Equatable](/ar/faqs/#ูุชู-ูุฌุจ-ุงุณุชุฎุฏุงู-equatable).
- [RepositoryProvider](/ar/flutter-bloc-concepts#repositoryprovider)ุ ููู Widget
  ูู Flutter ุชููุฑ repository ูุฃุจูุงุฆูุง.
- [BlocListener](/ar/flutter-bloc-concepts#bloclistener)ุ ููู Widget ูู Flutter
  ุชุณุชุฏุนู ููุฏ ุงููุณุชูุน ุงุณุชุฌุงุจุฉู ูุชุบูุฑุงุช ุงูุญุงูุฉ ูู ุงูู bloc.
- [MultiBlocProvider](/ar/flutter-bloc-concepts#multiblocprovider)ุ ููู Widget
  ูู Flutter ุงูุชู ุชุฌูุน ุนุฏุฉ `BlocProvider` ูู ูุงุญุฏ.
- [BlocConsumer](/ar/flutter-bloc-concepts#blocconsumer)ุ ููู Widget ูู Flutter
  ุชููุฑ builder ู listener ููุงุดุชุฑุงู ูู ุญุงูุงุช ุฌุฏูุฏุฉ.
- [HydratedBloc](https://github.com/felangel/bloc/tree/master/packages/hydrated_bloc)
  ูุฅุฏุงุฑุฉ ุงูุญุงูุฉ ูุญูุธูุง ุจุดูู ูุณุชูุฑ.

## ุงูุฅุนุฏุงุฏ

ูุจุฏุงูุฉ ุงูุนููุ ุฃูุดุฆ ูุดุฑูุน Flutter ุฌุฏูุฏูุง.

<FlutterCreateSnippet />

### ูููู ุงููุดุฑูุน

ุณูุชููู ุชุทุจูููุง ูู ููุฒุงุช ูููุตูุฉ ูู ูุฌูุฏุงุช ูุฎุตุตุฉ ููุง. ูุฐุง ูุณูุญ ููุง ุจุงูุชูุณุน ูุน
ุฒูุงุฏุฉ ุนุฏุฏ ุงูููุฒุงุช ููุณูุญ ูููุทูุฑูู ุจุงูุนูู ุนูู ููุฒุงุช ูุฎุชููุฉ ุจุดูู ูุชูุงุฒู.

ูููู ุชูุณูู ุชุทุจูููุง ุฅูู ุฃุฑุจุน ููุฒุงุช ุฑุฆูุณูุฉ: **search, settings, theme, weather**.
ุฏุนูุง ููุดุฆ ูุฐู ุงููุฌูุฏุงุช.

<FeatureTreeSnippet />

### ุงูุจููุฉ ุงููุนูุงุฑูุฉ

ููููุง ูุฅุฑุดุงุฏุงุช [bloc architecture](/ar/architecture)ุ ุณูุชููู ุชุทุจูููุง ูู ุนุฏุฉ
ุทุจูุงุช.

ูู ูุฐุง ุงูุฏุฑุณุ ุชููู ูู ุทุจูุฉ ุจุงูููุงู ุงูุชุงููุฉ:

- **Data**: ุฌูุจ ุจูุงูุงุช ุงูุทูุณ ุงูุฎุงู ูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (API)
- **Repository**: ุชุฌุฑูุฏ ุทุจูุฉ ุงูุจูุงูุงุช ูุชูููุฑ ููุงุฐุฌ ูุทุงู ุงูุนูู (domain models)
  ููุชู ุงุณุชููุงููุง ุฏุงุฎู ุงูุชุทุจูู
- **Business Logic**: ุฅุฏุงุฑุฉ ุญุงูุฉ ูู ููุฒุฉ (ูุนูููุงุช ุงููุญุฏุฉุ ุชูุงุตูู ุงููุฏููุฉุ
  ุงูุณูุงุชุ ุฅูุฎ)
- **Presentation**: ุนุฑุถ ูุนูููุงุช ุงูุทูุณ ูุฌูุน ูุฏุฎูุงุช ุงููุณุชุฎุฏููู (ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุชุ
  ุตูุญุฉ ุงูุจุญุซุ ุฅูุฎ)

## ุทุจูุฉ ุงูุจูุงูุงุช

ูู ูุฐุง ุงูุชุทุจููุ ุณูููู ุจุงููุตูู ุฅูู  
[Open Meteo API](https://open-meteo.com).

ุณูุฑูุฒ ุนูู ููุทุชู ููุงูุฉ (Endpoints) ุงูุฃุณุงุณูุฉ:

- `https://geocoding-api.open-meteo.com/v1/search?name=$city&count=1` ููุญุตูู
  ุนูู  
  ูููุน ุฌุบุฑุงูู ูุงุณู ูุฏููุฉ ูุนูู
- `https://api.open-meteo.com/v1/forecast?latitude=$latitude&longitude=$longitude&current_weather=true`  
  ููุญุตูู
  ุนูู ุญุงูุฉ ุงูุทูุณ ููููุน ูุญุฏุฏ

ุงูุชุญ  
[https://geocoding-api.open-meteo.com/v1/search?name=chicago&count=1](https://geocoding-api.open-meteo.com/v1/search?name=chicago&count=1)  
ูู ูุชุตูุญู ููุงุทูุงุน ุนูู ุงูุงุณุชุฌุงุจุฉ ููุฏููุฉ ุดููุงุบู. ุณูุณุชุฎุฏู ูููุชู  
`latitude` ู `longitude` ูู ุงูุงุณุชุฌุงุจุฉ ูููุตูู ุฅูู ููุทุฉ ููุงูุฉ ุงูุทูุณ.

ููู `latitude`/`longitude` ูุดููุงุบู ูู `41.85003`/`-87.65005`. ููููู ุงูุชูุฌู ุฅูู  
[https://api.open-meteo.com/v1/forecast?latitude=43.0389&longitude=-87.90647&current_weather=true](https://api.open-meteo.com/v1/forecast?latitude=43.0389&longitude=-87.90647&current_weather=true)  
ูู ูุชุตูุญู ูุชุฑู ุงูุงุณุชุฌุงุจุฉ ุงูุฎุงุตุฉ ุจุญุงูุฉ ุงูุทูุณ ูู ุดููุงุบู ูุงูุชู ุชุญุชูู ุนูู ุฌููุน
ุงูุจูุงูุงุช ุงูุชู ุณูุญุชุงุฌูุง ูุชุทุจูููุง.

### ุนููู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช OpenMeteo API

ุนููู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช OpenMeteo ูุณุชูู ุนู ุชุทุจูููุง. ูุฐููุ ุณูููู ุจุฅูุดุงุฆู ูุญุฒูุฉ
ุฏุงุฎููุฉ (ููููููุง ุญุชู ูุดุฑู ุนูู  
[pub.dev](https://pub.dev)). ุจุนุฏ ุฐููุ ูุณุชุทูุน ุงุณุชุฎุฏุงู ุงูุญุฒูุฉ ุจุฅุถุงูุชูุง ุฅูู
`pubspec.yaml` ูู ุทุจูุฉ repositoryุ ุงูุชู ุณุชุชููู ุทูุจุงุช ุงูุจูุงูุงุช ูุชุทุจูู ุงูุทูุณ
ุงูุฑุฆูุณู ูุฏููุง.

ุฃูุดุฆ ูุฌูุฏูุง ุฌุฏูุฏูุง ุนูู ูุณุชูู ุงููุดุฑูุน ุจุงุณู `packages`. ูุฐุง ุงููุฌูุฏ ุณูุญุชูู ุฌููุน
ุญุฒููุง ุงูุฏุงุฎููุฉ.

ุฏุงุฎู ูุฐุง ุงููุฌูุฏุ ููุฐ ุฃูุฑ `flutter create` ุงููุฏูุฌ ูุฅูุดุงุก ุญุฒูุฉ ุฌุฏูุฏุฉ ุจุงุณู
`open_meteo_api` ูุนููู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช.

<FlutterCreateApiClientSnippet />

### ูููุฐุฌ ุจูุงูุงุช ุงูุทูุณ

ุจุนุฏ ุฐููุ ูููู ุจุฅูุดุงุก ูููู `location.dart` ู `weather.dart` ุงูุฐู ุณูุญุชููุงู ุงูููุงุฐุฌ
(Models) ูุงุณุชุฌุงุจุงุช ููุงุท ููุงูุฉ ุงูู API ุงูุฎุงุตุฉ ุจุงููููุน ูุงูุทูุณ.

<OpenMeteoModelsTreeSnippet />

#### ูููุฐุฌ ุงููููุน

ูุฌุจ ุฃู ูุฎุฒู ูููุฐุฌ `location.dart` ุงูุจูุงูุงุช ุงูุชู ุชุนูุฏ ูู API ุงููููุนุ ูุงูุชู ุชุจุฏู
ููุง ููู:

<LocationJsonSnippet />

ููุฐุง ููู `location.dart` ููุฏ ุงูุชูุฏู ูุงูุฐู ูุฎุฒู ุงูุงุณุชุฌุงุจุฉ ุฃุนูุงู:

<LocationDartSnippet />

#### ูููุฐุฌ ุงูุทูุณ

ุจุนุฏูุงุ ููุชูู ุฅูู ุงูุนูู ุนูู `weather.dart`. ูุฌุจ ุฃู ูุฎุฒู ูููุฐุฌ ุงูุทูุณ ุงูุจูุงูุงุช ุงูุชู
ุชุนูุฏ ูู API ุงูุทูุณุ ุงููุงุฑุฏุฉ ููุง ููู:

<WeatherJsonSnippet />

ููุฐุง ููู `weather.dart` ููุฏ ุงูุชูุฏู ุงูุฐู ูุฎุฒู ุงูุงุณุชุฌุงุจุฉ ุฃุนูุงู:

<WeatherDartSnippet />

### ูููุงุช ุงูุจุฑููู (Barrel Files)

ูุฃุซูุงุก ุชูุงุฌุฏูุง ููุงุ ุฏุนููุง ูููุดุฆ ุจุณุฑุนุฉ  
[barrel file](https://adrianfaciu.dev/posts/barrel-files/)  
ูุชูุธูู ูุชูููู ุชุนููุฏ ุงูุงุณุชูุฑุงุฏุงุช ูุฏููุง ูุณุชูุจูุงู.

ุฃูุดุฆ ููู `models.dart` ูููู ุจุฑููู (barrel) ูุตุฏูุฑ ููู ุงููููุฐุฌุงู:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/lib/src/models/models.dart"
	title="packages/open_meteo_api/lib/src/models/models.dart"
/>

ูููู ุฃูุถุงู ุจุฅูุดุงุก ููู ุจุฑููู ุนูู ูุณุชูู ุงูุญุฒูุฉ ุจุงุณู `open_meteo_api.dart`

<OpenMeteoModelsBarrelTreeSnippet />

ูู ุงูููู ุงูุฃุนูู ูุณุชูู `open_meteo_api.dart`ุ ูููุง ุจุชุตุฏูุฑ ุงูููุงุฐุฌ:

<OpenMeteoLibrarySnippet />

### ุงูุฅุนุฏุงุฏ

ูุญุชุงุฌ ูุฃู ูุชููู ูู  
[ุงูุชุณูุณู ูุงูุชูููู ุงูุชุณูุณูู (serialization/deserialization)](https://en.wikipedia.org/wiki/Serialization)  
ูููุงุฐุฌูุง ููู ูุชููู ูู ุงูุชุนุงูู ูุน ุจูุงูุงุช ุงูู API. ููููุงู ุจุฐููุ ุณูุถูู ุทุฑู `toJson`
ู `fromJson` ูููุงุฐุฌูุง.

ูุจุงูุฅุถุงูุฉ ูุฐููุ ูุญุชุงุฌ ุทุฑููุฉ ูุฅุฌุฑุงุก  
[ุทูุจุงุช ุงูุดุจูุฉ ุนุจุฑ HTTP](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods)  
ูุฌูุจ ุงูุจูุงูุงุช ูู API. ูุญุณู ุงูุญุธุ ููุงู ุงูุนุฏูุฏ ูู ุงูุญุฒู ุงูุดุนุจูุฉ ููููุงู ุจูุฐู
ุงููููุฉ.

ุณูุณุชุฎุฏู ุญุฒู:  
[json_annotation](https://pub.dev/packages/json_annotation)ุ  
[json_serializable](https://pub.dev/packages/json_serializable)ุ ู  
[build_runner](https://pub.dev/packages/build_runner)  
ูุชูููุฏ ุทุฑู `toJson` ู`fromJson` ุชููุงุฆููุง.

ููู ุฎุทูุฉ ูุณุชูุจููุฉุ ุณูุณุชุฎุฏู ุฃูุถุงู ุญุฒูุฉ  
[http](https://pub.dev/packages/http)  
ูุฅุฑุณุงู ุทูุจุงุช ุงูุดุจูุฉ ููุงุฌูุฉ ุงูุทูุณ ููุชููู ุชุทุจูููุง ูู ุนุฑุถ ุจูุงูุงุช ุงูุทูุณ ุงูุญุงููุฉ.

ูููุถูู ูุฐู ุงูุชุจุนูุงุช ุฅูู `pubspec.yaml`.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/pubspec.yaml"
	title="packages/open_meteo_api/pubspec.yaml"
/>

:::note

ุชุฐูุฑ ุชุดุบูู ุงูุฃูุฑ `flutter pub get` ุจุนุฏ ุฅุถุงูุฉ ุงูุชุจุนูุงุช.

:::

### (ุฅุนุงุฏุฉ)ุงูุชุณูุณู Serialization/Deserialization

ููู ูุนูู ุชูููุฏ ุงูุฃููุงุฏุ ูุญุชุงุฌ ุฅูู ุชูููุฒ ุงูููุฏ ูุฏููุง ุจุงุณุชุฎุฏุงู ูุง ููู:

- `@JsonSerializable` ูุชุนููู ุงูููุงุณุงุช ุงููุงุจูุฉ ููุชุณูุณู
- `@JsonKey` ูุชูููุฑ ุชูุซููุงุช ูุตูุฉ ูุฃุณูุงุก ุงูุญููู
- `@JsonValue` ูุชูููุฑ ุชูุซููุงุช ูุตูุฉ ูููู ุงูุญููู
- ุชูููุฐ `JSONConverter` ูุชุญููู ุชูุซููุงุช ุงููุงุฆู ุฅูู ุชูุซููุงุช JSON

ููู ููู ูุญุชุงุฌ ุฃูุถุงู ุฅูู:

- ุงุณุชูุฑุงุฏ `json_annotation`
- ุชุถููู ุงูููุฏ ุงูููููุฏ ุจุงุณุชุฎุฏุงู ูููุฉ ุงูููุชุงุญ  
  [part](https://dart.dev/tools/pub/create-packages#organizing-a-package)
- ุชุถููู ุทุฑู `fromJson` ูุนูููุฉ ุงูุชูููู ุงูุชุณูุณูู (deserialization)

#### ูููุฐุฌ ุงููููุน

ูุฐุง ูู ููู ูููุฐุฌ `location.dart` ูุงููุงู:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/lib/src/models/location.dart"
	title="packages/open_meteo_api/lib/src/models/location.dart"
/>

#### ูููุฐุฌ ุงูุทูุณ

ููุฐุง ูู ููู ูููุฐุฌ `weather.dart` ูุงููุงู:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/lib/src/models/weather.dart"
	title="packages/open_meteo_api/lib/src/models/weather.dart"
/>

#### ุฅูุดุงุก ููู ุงูุจูุงุก (Build File)

ูู ูุฌูุฏ `open_meteo_api`ุ ุฃูุดุฆ ููููุง ุจุงุณู `build.yaml`. ูุฏู ูุฐุง ุงูููู ูู ุงูุชุนุงูู
ูุน ุงููุฑููุงุช ูู ุชุณููุงุช ุงูุญููู ุฏุงุฎู  
`json_serializable`.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/build.yaml"
	title="packages/open_meteo_api/build.yaml"
/>

#### ุชูููุฏ ุงูุฃููุงุฏ (Code Generation)

ููุณุชุฎุฏู `build_runner` ูุชูููุฏ ุงูุฃููุงุฏ ุงููุทููุจุฉ.

<BuildRunnerBuildSnippet />

ูู ุงูููุชุฑุถ ุฃู ููููุฏ `build_runner` ุงููููุงุช `location.g.dart` ู `weather.g.dart`.

### ุนููู OpenMeteo API

ุฏุนููุง ููุดุฆ ุนููู ุงูู API ุงูุฎุงุต ุจูุง ูู ููู `open_meteo_api_client.dart` ุฏุงุฎู ูุฌูุฏ
`src`. ูุฌุจ ุฃู ุชุจุฏู ุจููุฉ ูุดุฑูุนูุง ููุง ููู:

<OpenMeteoApiClientTreeSnippet />

ุงูุขู ูููููุง ุงุณุชุฎุฏุงู ุญุฒูุฉ  
[http](https://pub.dev/packages/http)  
ุงูุชู ุฃุถููุงูุง ุณุงุจููุง ุฅูู ููู `pubspec.yaml` ูุฅุฌุฑุงุก ุทูุจุงุช HTTP ุฅูู ูุงุฌูุฉ ุงูุทูุณ
ูุงุณุชุฎุฏุงู ูุฐู ุงููุนูููุงุช ูู ุชุทุจูููุง.

ุณููููุฑ ุนููู API ุงูุฎุงุต ุจูุง ุทุฑููุชูู:

- `locationSearch` ุงูุชู ุชุนูุฏ `Future<Location>`
- `getWeather` ุงูุชู ุชุนูุฏ `Future<Weather>`

#### ุงูุจุญุซ ุนู ุงููููุน

ุชุตู ุทุฑููุฉ `locationSearch` ุฅูู API ุงููููุน ูุชุทุฑุญ ุฃุฎุทุงุก ูู ุงูููุน  
`LocationRequestFailure` ุนูุฏ ุงูุญุงุฌุฉ. ุงูุทุฑุญ ุงูููุงุฆู ููุทุฑููุฉ ููุง ููู:

<LocationSearchMethodSnippet />

#### ุงูุญุตูู ุนูู ุงูุทูุณ

ุจููุณ ุงูุทุฑููุฉุ ุชุตู ุทุฑููุฉ `getWeather` ุฅูู API ุงูุทูุณ ูุชุทุฑุญ ุฃุฎุทุงุก ูู ุงูููุน  
`WeatherRequestFailure`. ุงูุดูู ุงูููุงุฆู ููุทุฑููุฉ ูุงูุชุงูู:

<GetWeatherMethodSnippet />

ุงูููู ุงูููุชูู ูุจุฏู ุจุงูุดูู ุงูุชุงูู:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/lib/src/open_meteo_api_client.dart"
	title="packages/open_meteo_api/lib/src/open_meteo_api_client.dart"
/>

#### ุชุญุฏูุซุงุช ูููุงุช ุงูุจุฑููู

ูููููู ูุฐู ุงูุญุฒูุฉ ุจุฅุถุงูุฉ ุนููู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุฅูู ููู ุงูุจุฑููู.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/lib/open_meteo_api.dart"
	title="packages/open_meteo_api/lib/open_meteo_api.dart"
/>

### ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ (Unit Tests)

ูู ุงูููู ุจุดูู ุฎุงุต ูุชุงุจุฉ ุงุฎุชุจุงุฑุงุช ูุญุฏุฉ ูุทุจูุฉ ุงูุจูุงูุงุช ูุฃููุง ุฃุณุงุณ ุชุทุจูููุง.
ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ ุณุชููุญูุง ุงูุซูุฉ ุฃู ุงูุญุฒูุฉ ุชุนูู ููุง ูู ูุชููุน.

#### ุงูุฅุนุฏุงุฏ

ูู ุงูุณุงุจูุ ุฃุถููุง ุญุฒูุฉ  
[test](https://pub.dev/packages/test)  
ุฅูู ููู pubspec.yaml ูุงูุชู ุชุชูุญ ูุชุงุจุฉ ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ ุจุณูููุฉ.

ุณูู ูููู ุจุฅูุดุงุก ููู ุงุฎุชุจุงุฑ ูุนููู API ุจุงูุฅุถุงูุฉ ุฅูู ูููุงุช ุงุฎุชุจุงุฑ ููู ูููุฐุฌ ูู
ุงููููุฐุฌูู.

#### ุงุฎุชุจุงุฑุงุช ุงููููุน

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/test/location_test.dart"
	title="packages/open_meteo_api/test/location_test.dart"
/>

#### ุงุฎุชุจุงุฑุงุช ุงูุทูุณ

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/test/weather_test.dart"
	title="packages/open_meteo_api/test/weather_test.dart"
/>

#### ุงุฎุชุจุงุฑุงุช ุนููู API

ุจุนุฏูุงุ ููุฎุชุจุฑ ุนููู API ุงูุฎุงุต ุจูุง. ูุฌุจ ุฃู ูุชุญูู ูู ุฃู ุนููู API ูุชุนุงูู ุจุดูู ุตุญูุญ
ูุน ูู ุทูุจุงุช ุงูู APIุ ุจูุง ูู ุฐูู ุงูุณููุงุฑูููุงุช ุงูุญุฏูุฉ (Edge Cases).

:::note

ูุง ูุฑุบุจ ูู ุฃู ุชุณุชุฎุฏู ุงุฎุชุจุงุฑุงุชูุง ุทูุจุงุช API ุญููููุฉ ูุฃู ูุฏููุง ูู ุงุฎุชุจุงุฑ ููุทู ุนููู
ุงูู API (ุจูุง ูู ุฐูู ุฌููุน ุงูุณููุงุฑูููุงุช ุงูุญุฏูุฉ) ูููุณ ุงูู API ููุณู. ููุถูุงู ุจูุฆุฉ
ุงุฎุชุจุงุฑ ูุชุณูุฉ ููุชุญูู ุจูุงุ ุณูุณุชุฎุฏู  
[mocktail](https://github.com/felangel/mocktail)  
(ูุงูุชู ุฃุถููุงูุง ูุณุจููุง ูู `pubspec.yaml`) ููุญุงูุงุฉ ุนููู ุงูู `http`.

:::

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/test/open_meteo_api_client_test.dart"
	title="packages/open_meteo_api/test/open_meteo_api_client_test.dart"
/>

#### ุชุบุทูุฉ ุงูุงุฎุชุจุงุฑุงุช (Test Coverage)

ูุฃุฎูุฑูุงุ ุฏุนููุง ูุฌูุน ุชุบุทูุฉ ุงูุงุฎุชุจุงุฑุงุช ููุชุฃูุฏ ูู ุฃููุง ุบุทููุง ูู ุณุทุฑ ูู ุงูููุฏ ุนูู
ุงูุฃูู ุจุญุงูุฉ ุงุฎุชุจุงุฑ ูุงุญุฏุฉ.

<FlutterTestCoverageSnippet />

## ุทุจูุฉ ุงููุณุชูุฏุน (Repository Layer)

ุงููุฏู ูู ุทุจูุฉ ุงููุณุชูุฏุน ูู ุชุฌุฑูุฏ ุทุจูุฉ ุงูุจูุงูุงุช ูุชุณููู ุงูุงุชุตุงู ูุน ุทุจูุฉ ุงูู bloc.
ุนูุฏ ุงูููุงู ุจุฐููุ ูุนุชูุฏ ุจููุฉ ุงูููุฏ ุงูุฃุณุงุณู ูุฏููุง ููุท ุนูู ุงูุฏูุงู ุงููุนุฑูุถุฉ ูู ุฎูุงู
ุทุจูุฉ ุงููุณุชูุฏุน ุจุฏููุง ูู ุงูุงุนุชูุงุฏ ุนูู ุชูููุฐุงุช ูุฒูุฏ ุงูุจูุงูุงุช ุงููุญุฏุฏุฉ. ูุฐุง ูุณูุญ ููุง
ุจุชุบููุฑ ูุฒูุฏู ุงูุจูุงูุงุช ุฏูู ุงูุชุฃุซูุฑ ุนูู ุฃู ููุฏ ูู ูุณุชูู ุงูุชุทุจูู. ุนูู ุณุจูู ุงููุซุงูุ
ุฅุฐุง ูุฑุฑูุง ุงูุงูุชูุงู ุจุนูุฏูุง ุนู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุงูุฎุงุตุฉ ุจุงูุทูุณ ุงูุชู ูุณุชุฎุฏููุง
ุญุงููุงูุ ูุฌุจ ุฃู ูุชููู ูู ุฅูุดุงุก ุนููู API ุฌุฏูุฏ ูุงุณุชุจุฏุงูู ุฏูู ุงูุญุงุฌุฉ ูุชุนุฏูู ูุงุฌูุฉ
API ุงูุนุงูุฉ ูุทุจูุฉ ุงููุณุชูุฏุน ุฃู ุทุจูุงุช ุงูุชุทุจูู.

### ุงูุฅุนุฏุงุฏ

ุฏุงุฎู ูุฌูุฏ ุงูุญุฒู `packages`ุ ููุฐ ุงูุฃูุฑ ุงูุชุงูู:

<FlutterCreateRepositorySnippet />

ุณูุณุชุฎุฏู ููุณ ุงูุญุฒู ุงูููุฌูุฏุฉ ูู ุญุฒูุฉ `open_meteo_api` ุจูุง ูู ุฐูู ุญุฒูุฉ
`open_meteo_api` ูู ุงูุฎุทูุฉ ุงูุณุงุจูุฉ. ุญุฏูุซ ููู `pubspec.yaml` ุซู ููุฐ ุงูุฃูุฑ
`flutter pub get`.

:::note

ูุณุชุฎุฏู ูุณุงุฑ `path` ูุชุญุฏูุฏ ูููุน `open_meteo_api` ููุง ูุณูุญ ููุง ุจุงูุชุนุงูู ูุนูุง ููุง
ูู ูุงูุช ุญุฒูุฉ ุฎุงุฑุฌูุฉ ูู `pub.dev`.

:::

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/weather_repository/pubspec.yaml"
	title="packages/weather_repository/pubspec.yaml"
/>

### ููุงุฐุฌ Weather Repository

ุณูููู ุจุฅูุดุงุก ููู ุฌุฏูุฏ `weather.dart` ูุชุนุฑูู ูููุฐุฌ ุงูุทูุณ ุงูุฎุงุต ุจุงููุฌุงู
(domain-specific). ูุฐุง ุงููููุฐุฌ ุณูุญุชูู ููุท ุนูู ุงูุจูุงูุงุช ุฐุงุช ุงูุตูุฉ ุจุญุงูุงุช ุงูุนูู
ูุฏููุง โ ุจูุนูู ุขุฎุฑุ ูุฌุจ ุฃู ูููู ููุตูููุง ุชูุงููุง ุนู ุนููู ุงูู API ูุตูุบุฉ ุงูุจูุงูุงุช
ุงูุฎุงู. ููุง ูู ูุนุชุงุฏุ ุณููุดุฆ ุฃูุถูุง ููู ุจุฑููู `models.dart` ูุชุฌููุน ุงูููุงุฐุฌ.

<RepositoryModelsBarrelTreeSnippet />

ูุฐู ุงููุฑุฉุ ุณูุญุชูู ูููุฐุฌ ุงูุทูุณ ูุฏููุง ููุท ุนูู ุงูุฎุตุงุฆุต
`location, temperature, condition`. ุณูุณุชูุฑ ุฃูุถูุง ูู ุชุฑููุฒ ููุฏูุง ููุณูุงุญ ุจุนูููุงุช
ุงูุชุณูุณู ูุงูุชุณูุณู ุงูุนูุณู (serialization & deserialization).

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/weather_repository/lib/src/models/weather.dart"
	title="packages/weather_repository/lib/src/models/weather.dart"
/>

ูู ุจุชุญุฏูุซ ููู ุงูุจุฑููู ุงูุฐู ุฃูุดุฃูุงู ุณุงุจููุง ููุดูู ุงูููุงุฐุฌ.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/weather_repository/lib/src/models/models.dart"
	title="packages/weather_repository/lib/src/models/models.dart"
/>

#### ุฅูุดุงุก ููู Build

ููุง ูู ุงูุณุงุจูุ ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ููู `build.yaml` ุจุงููุญุชููุงุช ุงูุชุงููุฉ:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/weather_repository/build.yaml"
	title="packages/weather_repository/build.yaml"
/>

#### ุชูููุฏ ุงูููุฏ

ููุง ูุนููุง ูู ุงูุณุงุจูุ ููุฐ ุงูุฃูุฑ ุงูุชุงูู ูุชูููุฏ ุชูููุฐ ุนูููุงุช (de)serialization.

<BuildRunnerBuildSnippet />

#### ููู ุงูุจุฑููู (Barrel File)

ูููุดุฆ ุฃูุถูุง ููู ุจุฑููู ุนูู ูุณุชูู ุงูุญุฒูุฉ ุจุงุณู  
`packages/weather_repository/lib/weather_repository.dart` ูุชุตุฏูุฑ ุงูููุงุฐุฌ:

<WeatherRepositoryLibrarySnippet />

### Weather Repository

ุงููุฏู ุงูุฃุณุงุณู ูู `WeatherRepository` ูู ุชูููุฑ ูุงุฌูุฉ ุชุฌุฑูุฏูุฉ ููุฒูุฏ ุงูุจูุงูุงุช. ูู
ูุฐู ุงูุญุงูุฉุ ุณุชุนุชูุฏ `WeatherRepository` ุนูู `WeatherApiClient` ูุณุชุนุฑุถ ุฏุงูุฉ ุนุงูุฉ
ูุงุญุฏุฉ ููุทุ ููู `getWeather(String city)`.

:::note

ูุณุชูููู `WeatherRepository` ุบูุฑ ูุทูุนูู ุนูู ุชูุงุตูู ุงูุชูููุฐ ุงูุฏุงุฎููุฉ ูุซู ุญูููุฉ
ุฅุฌุฑุงุก ุทูุจูู ุดุจูููู ุฅูู ูุงุฌูุฉ ุงูุทูุณ. ุงููุฏู ูู `WeatherRepository` ูู ูุตู ุงูู
"ูุงุฐุง" ุนู ุงูู "ููู" โ ุจูุนูู ุฃููุง ูุฑูุฏ ุทุฑููุฉ ูุฌูุจ ุงูุทูุณ ููุฏููุฉ ูุนููุฉุ ููููุง ูุง
ููุชู ุจููููุฉ ุฃู ูู ุฃูู ุชุฃุชู ุงูุจูุงูุงุช.

:::

#### ุงูุฅุนุฏุงุฏ

ูููู ุจุฅูุดุงุก ููู `weather_repository.dart` ุฏุงุฎู ูุฌูุฏ `src` ูู ุงูุญุฒูุฉุ ููุนูู ุนูู
ุชูููุฐ ุงูุฑูุจู.

ุงูุฏุงูุฉ ุงูุฑุฆูุณูุฉ ุงูุชู ุณูุฑูุฒ ุนูููุง ูู `getWeather(String city)`. ูููููุง ุชูููุฐูุง
ุจุงุณุชุฎุฏุงู ููุงููุชูู ุฅูู ุนููู ุงูู API ููุง ููู:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/weather_repository/lib/src/weather_repository.dart"
	title="packages/weather_repository/lib/src/weather_repository.dart"
/>

#### ููู ุงูุจุฑููู (Barrel File)

ูู ุจุชุญุฏูุซ ููู ุงูุจุฑููู ุงูุฐู ุฃูุดุฃูุงู ุณุงุจููุง.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/weather_repository/lib/weather_repository.dart"
	title="packages/weather_repository/lib/weather_repository.dart"
/>

### ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ

ุชูุงููุง ููุง ูู ุงูุญุงู ูุน ุทุจูุฉ ุงูุจูุงูุงุชุ ูู ุงูุถุฑูุฑู ุงุฎุชุจุงุฑ ุทุจูุฉ ุงููุณุชูุฏุน ูุถูุงู ุตุญุฉ
ููุทู ุงููุฌุงู. ูุงุฎุชุจุงุฑ `WeatherRepository`ุ ุณูุณุชุฎุฏู ููุชุจุฉ
[mocktail](https://github.com/felangel/mocktail). ุณูููู ุจูุญุงูุงุฉ ุนููู ุงูู API
ุงูุฃุณุงุณู ูุงุฎุชุจุงุฑ ููุทู `WeatherRepository` ุถูู ุจูุฆุฉ ูุฎุชุจุฑูุฉ ููุนุฒููุฉ.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/weather_repository/test/weather_repository_test.dart"
	title="packages/weather_repository/test/weather_repository_test.dart"
/>

## ุทุจูุฉ ููุทู ุงูุฃุนูุงู

ูู ุทุจูุฉ ููุทู ุงูุฃุนูุงูุ ุณูุณุชุฎุฏู ูููุฐุฌ ูุฌุงู ุงูุทูุณ ูู  
`WeatherRepository`  
ูุณูุนุฑุถ ูููุฐุฌูุง ุฎุงุตูุง ุจุงููุฒุงูุง ุนูู ูุณุชูู ุงูููุฒุฉ ููุชู ุนุฑุถู ูููุณุชุฎุฏู ุนุจุฑ ูุงุฌูุฉ
ุงููุณุชุฎุฏู.

:::note

ูุฐุง ูู ุงูููุน ุงูุซุงูุซ ุงููุฎุชูู ูู ูููุฐุฌ ุงูุทูุณ ุงูุฐู ูุทุจูู. ูู ุนููู APIุ ูุงู ูููุฐุฌ
ุงูุทูุณ ูุฏููุง ูุญุชูู ุนูู ูู ุงููุนูููุงุช ุงูุชู ุชุฑุฌุนูุง ุงูู API. ูู ุทุจูุฉ ุงููุณุชูุฏุนุ ูุงู
ูููุฐุฌ ุงูุทูุณ ูุญุชูู ููุท ุนูู ุงููููุฐุฌ ุงููุฌุฑุฏ ุจูุงุกู ุนูู ุญุงูุฉ ุงูุนูู/ุงูุฃุนูุงู ูุฏููุง. ูู
ูุฐู ุงูุทุจูุฉุ ุณูููู ูููุฐุฌ ุงูุทูุณ ูุฏููุง ูุญุชูู ููุท ุนูู ุงููุนูููุงุช ุฐุงุช ุงูุตูุฉ ุงููุงุฒูุฉ
ุฎุตูุตูุง ููุฌููุนุฉ ุงูููุฒุงุช ุงูุญุงููุฉ.

:::

### ุงูุฅุนุฏุงุฏ

ุจูุง ุฃู ุทุจูุฉ ููุทู ุงูุฃุนูุงู ุชูุน ุฏุงุฎู ุงูุชุทุจูู ุงูุฑุฆูุณูุ ูุญุชุงุฌ ุฅูู ุชุนุฏูู ููู  
`pubspec.yaml`  
ููุดุฑูุน `flutter_weather` ุจุฃูููู ูุฅุถุงูุฉ ุฌููุน ุงูุญุฒู ุงูุชู ุณูุณุชุฎุฏููุง.

- ุงุณุชุฎุฏุงู [equatable](https://pub.dev/packages/equatable) ูุชูุญ ููุซููุงุช ุญุงูุฉ
  ุงูุชุทุจูู ุฅููุงููุฉ ุงูููุงุฑูุฉ ุจุงุณุชุฎุฏุงู ูุนุงูู ุงููุณุงูุงุฉ `==`. ูู ุงูุฎูููุฉุ ูููู bloc
  ุจููุงุฑูุฉ ุงูุญุงูุงุช ููุฑู ุฅุฐุง ูุง ูุงูุช ูุชุณุงููุฉุ ูุฅุฐุง ูู ุชูู ูุฐููุ ุณูุคุฏู ุฐูู ุฅูู
  ุฅุนุงุฏุฉ ุจูุงุก. ูุฐุง ูุถูู ุฃู ุดุฌุฑุฉ Widget ุณุชูุนุงุฏ ุจูุงุคูุง ููุท ุนูุฏ ุงูุถุฑูุฑุฉ ููุญูุงุธ ุนูู
  ุงูุฃุฏุงุก ุณุฑูุนูุง ููุชุฌุงูุจูุง.
- ูููููุง ุชุญุณูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุจุงุณุชุฎุฏุงู ุญุฒูุฉ  
  [google_fonts](https://pub.dev/packages/google_fonts).
- ุชููุฑ [HydratedBloc](https://pub.dev/packages/hydrated_bloc) ุฅููุงููุฉ ุญูุธ ุญุงูุฉ
  ุงูุชุทุจูู ุนูุฏ ุฅุบูุงูู ูุฅุนุงุฏุฉ ูุชุญู.
- ุณูููู ุจุฅุถุงูุฉ ุญุฒูุฉ `weather_repository` ุงูุชู ุฃูุดุฃูุงูุง ููุชู ูุชูููููุง ูู ุฌูุจ
  ุจูุงูุงุช ุงูุทูุณ ุงูุญุงููุฉ!

ูุฃุบุฑุงุถ ุงูุงุฎุชุจุงุฑุ ุณูุถูู ุงูุญุฒู ุงููุนุชุงุฏุฉ `test`ุ ุจุงูุฅุถุงูุฉ ุฅูู `mocktail` ูุชูููุฏ
ุงูุชุจุนูุงุชุ ู  
[bloc_test](https://pub.dev/packages/bloc_test)  
ูุชุณููู ุงุฎุชุจุงุฑ ูุญุฏุงุช ููุทู ุงูุฃุนูุงู ุฃู ุงูู blocs!

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/pubspec.yaml"
	title="pubspec.yaml"
/>

ุจุนุฏูุงุ ุณูุนูู ุนูู ุทุจูุฉ ุงูุชุทุจูู ุถูู ุฏููู ููุฒุฉ `weather`.

### ูููุฐุฌ ุงูุทูุณ

ุงููุฏู ูู ูููุฐุฌ ุงูุทูุณ ูู ูุชุงุจุนุฉ ุจูุงูุงุช ุงูุทูุณ ุงูุชู ูุนุฑุถูุง ุชุทุจูููุงุ ุจุงูุฅุถุงูุฉ ุฅูู
ุฅุนุฏุงุฏุงุช ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ (ุณูุณููุณ ุฃู ููุฑููุงูุช).

ุฃูุดุฆ ุงูููู `flutter_weather/lib/weather/models/weather.dart`:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/models/weather.dart"
	title="lib/weather/models/weather.dart"
/>

### ุฅูุดุงุก ููู ุงูุจูุงุก

ุฃูุดุฆ ููู `build.yaml` ูุทุจูุฉ ููุทู ุงูุฃุนูุงู.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/build.yaml"
	title="build.yaml"
/>

### ุชูููุฏ ุงูููุฏ

ุดุบูู ุงูุฃูุฑ `build_runner` ูุชูููุฏ ุชุทุจููุงุช ุงูุชุณูุณู ุงูุนูุณู (de)serialization.

<BuildRunnerBuildSnippet />

### ููู ุงูุจุฑููู (Barrel File)

ุฏุนูุง ูุตุฏุฑ ููุงุฐุฌูุง ูู ููู ุงูุจุฑููู  
(`flutter_weather/lib/weather/models/models.dart`):

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/models/models.dart"
	title="lib/weather/models/models.dart"
/>

ุซู ูููุดุฆ ููู ุจุฑููู ุฑุฆูุณู ูููุฒุฉ ุงูุทูุณ  
(`flutter_weather/lib/weather/weather.dart`);

<WeatherBarrelDartSnippet />

### ุงูุทูุณ

ุณูุณุชุฎุฏู `HydratedCubit` ูุชูููู ุชุทุจูููุง ูู ุญูุธ ุญุงูุฉ ุงูุชุทุจูู ูุงุณุชุนุงุฏุชูุงุ ุญุชู ุจุนุฏ
ุฅุบูุงู ุงูุชุทุจูู ูุฅุนุงุฏุฉ ูุชุญู.

:::note

`HydratedCubit` ูู ุงูุชุฏุงุฏ ูู `Cubit` ูุชููู ุญูุธ ูุงุณุชุนุงุฏุฉ ุงูุญุงูุฉ ุนุจุฑ ุงูุฌูุณุงุช.

:::

#### ุญุงูุฉ ุงูุทูุณ

ุจุงุณุชุฎุฏุงู  
[Bloc VSCode](https://marketplace.visualstudio.com/items?itemName=FelixAngelov.bloc)  
ุฃู  
[Bloc IntelliJ](https://plugins.jetbrains.com/plugin/12129-bloc)  
ุงูุชุญ ุงููุงุฆูุฉ ุงูุณูุงููุฉ ุนูู ูุฌูุฏ `weather` ูุฃูุดุฆ cubit ุฌุฏูุฏ ุงุณูู `Weather`. ูุฌุจ ุฃู
ูููู ูููู ุงููุดุฑูุน ููุง ููู:

<WeatherCubitTreeSnippet />

ููุงู ุฃุฑุจุน ุญุงูุงุช ูููู ุฃู ูููู ุนูููุง ุชุทุจูู ุงูุทูุณ:

- `initial` ูุจู ุชุญููู ุฃู ุดูุก
- `loading` ุฃุซูุงุก ุทูุจ ุงูุจูุงูุงุช ูู ุงูู API
- `success` ุฅุฐุง ูุฌุญ ุทูุจ ุงูู API
- `failure` ุฅุฐุง ูุดู ุทูุจ ุงูู API

ุณูููุซู ูุฐุง ุงูู enum ุงููุณูู `WeatherStatus` ุงูุญุงูุงุช ุงูุณุงุจูุฉ.

ูุฌุจ ุฃู ุชุจุฏู ุญุงูุฉ ุงูุทูุณ ุงููุงููุฉ ููุง ููู:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/cubit/weather_state.dart"
	title="lib/weather/cubit/weather_state.dart"
/>

#### Weather Cubit

ุจุนุฏ ุชุนุฑูู `WeatherState`ุ ููููุชุจ `WeatherCubit` ุงูุฐู ูุนุฑุถ ุงูุทุฑู ุงูุชุงููุฉ:

- `fetchWeather(String? city)` ูุณุชุฎุฏู ูุณุชูุฏุน ุงูุทูุณ ููุญุงููุฉ ุฌูุจ ูุงุฆู ุงูุทูุณ
  ูููุฏููุฉ ุงููุนุทุงุฉ
- `refreshWeather()` ูุฌูุจ ูุงุฆู ุทูุณ ุฌุฏูุฏ ุจุงุณุชุฎุฏุงู ูุณุชูุฏุน ุงูุทูุณ ุงุนุชูุงุฏูุง ุนูู
  ุงูุญุงูุฉ ุงูุญุงููุฉ
- `toggleUnits()` ูุจุฏูู ุงููุญุฏุงุช ุจูู ุณูุณููุณ ูููุฑููุงูุช
- `fromJson(Map<String, dynamic> json)`ุ `toJson(WeatherState state)` ุชูุณุชุฎุฏู
  ููุญูุธ ูุงูุงุณุชุนุงุฏุฉ

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/cubit/weather_cubit.dart"
	title="lib/weather/cubit/weather_cubit.dart"
/>

:::note

ูุง ุชูุณู ุชูููุฏ ููุฏ (de)serialization ุนุจุฑ:

<BuildRunnerBuildSnippet />
:::

### ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ

ูุซู ุทุจูุงุช ุงูุจูุงูุงุช ูุงููุณุชูุฏุนุ ูู ุงูุถุฑูุฑู ุงุฎุชุจุงุฑ ูุญุฏุฉ ุทุจูุฉ ููุทู ุงูุฃุนูุงู ูุถูุงู ุฃู
ููุทู ุงูููุฒุฉ ูุนูู ููุง ูู ูุชููุน. ุณูุนุชูุฏ ุนูู  
[bloc_test](https://pub.dev/packages/bloc_test)  
ุฅูู ุฌุงูุจ `mocktail` ู`test`.

ุฏุนููุง ูุถูู ุงูุญุฒู `test`ุ `bloc_test`ุ ู`mocktail` ุฅูู ูุณู  
`dev_dependencies`.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/pubspec.yaml"
	title="pubspec.yaml"
/>

:::note

ุชุชูุญ ุญุฒูุฉ [bloc_test](https://pub.dev/packages/bloc_test) ุชุฌููุฒ ุงูู blocs ุจุณูููุฉ
ููุงุฎุชุจุงุฑุ ูุน ุงูุชุนุงูู ูุน ุชุบูุฑุงุช ุงูุญุงูุฉ ูุงูุชุญูู ูู ุงููุชุงุฆุฌ ุจุทุฑููุฉ ููุญุฏุฉ.

:::

#### ุงุฎุชุจุงุฑุงุช Weather Cubit

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/test/weather/cubit/weather_cubit_test.dart"
	title="test/weather/cubit/weather_cubit_test.dart"
/>

## ุทุจูุฉ ุงูุนุฑุถ

### ุตูุญุฉ ุงูุทูุณ

ุณูุจุฏุฃ ุจู `WeatherPage` ุงูุชู ุชุณุชุฎุฏู `BlocProvider` ูุชูููุฑ instance ูู
`WeatherCubit` ูุดุฌุฑุฉ Widget.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/view/weather_page.dart"
	title="lib/weather/view/weather_page.dart"
/>

ุณุชูุงุญุธ ุฃู ูุฐู ุงูุตูุญุฉ ุชุนุชูุฏ ุนูู Widget `SettingsPage` ู`SearchPage`ุ ุงููุชูู
ุณููุดุฆููุง ุจุนุฏ ุฐูู.

### ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช

ุชุชูุญ ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช ูููุณุชุฎุฏููู ุชุญุฏูุซ ุชูุถููุงุชูู ููุญุฏุงุช ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/settings/view/settings_page.dart"
	title="lib/settings/view/settings_page.dart"
/>

### ุตูุญุฉ ุงูุจุญุซ

ุชููู ุตูุญุฉ ุงูุจุญุซ ุงููุณุชุฎุฏููู ูู ุฅุฏุฎุงู ุงุณู ุงููุฏููุฉ ุงููุฑุบูุจุฉ ูุชุนูุฏ ูุชูุฌุฉ ุงูุจุญุซ ุฅูู
ุงููุณุงุฑ ุงูุณุงุจู ุนุจุฑ `Navigator.of(context).pop`.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/search/view/search_page.dart"
	title="lib/search/view/search_page.dart"
/>

### Widgets ุงูุทูุณ

ุณูุนุฑุถ ุงูุชุทุจูู ุดุงุดุงุช ูุฎุชููุฉ ุงุนุชูุงุฏูุง ุนูู ุงูุญุงูุงุช ุงูุฃุฑุจุน ุงููุญุชููุฉ ูู
`WeatherCubit`.

#### ุญุงูุฉ WeatherEmpty

ุชุนุฑุถ ูุฐู ุงูุดุงุดุฉ ุนูุฏูุง ูุง ุชููู ููุงู ุจูุงูุงุช ููุนุฑุถ ูุฃู ุงููุณุชุฎุฏู ูู ูุฎุชูุฑ ูุฏููุฉ ุจุนุฏ.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/widgets/weather_empty.dart"
	title="lib/weather/widgets/weather_empty.dart"
/>

#### ุญุงูุฉ WeatherError

ุชุนุฑุถ ูุฐู ุงูุดุงุดุฉ ูู ุญุงู ุญุฏูุซ ุฎุทุฃ.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/widgets/weather_error.dart"
	title="lib/weather/widgets/weather_error.dart"
/>

#### ุญุงูุฉ WeatherLoading

ุชุนุฑุถ ูุฐู ุงูุดุงุดุฉ ุฃุซูุงุก ุฌูุจ ุงูุชุทุจูู ููุจูุงูุงุช.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/widgets/weather_loading.dart"
	title="lib/weather/widgets/weather_loading.dart"
/>

#### ุญุงูุฉ WeatherPopulated

ุชุนุฑุถ ูุฐู ุงูุดุงุดุฉ ุจุนุฏ ุฃู ูุฎุชุงุฑ ุงููุณุชุฎุฏู ูุฏููุฉ ููุชู ุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/widgets/weather_populated.dart"
	title="lib/weather/widgets/weather_populated.dart"
/>

### ููู ุงูุจุฑููู (Barrel File)

ูููู ุจุฅุถุงูุฉ ูุฐู ุงูุญุงูุงุช ุฅูู ููู ุจุฑููู ูุชูุธูู ุนูููุงุช ุงูุงุณุชูุฑุงุฏ ูุฌุนููุง ุฃูุธู.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/widgets/widgets.dart"
	title="lib/weather/widgets/widgets.dart"
/>

### ููุทุฉ ุงูุฏุฎูู

ููุจุบู ุฃู ูููู ููู `main.dart` ุจุชููุฆุฉ ุชุทุจูู `WeatherApp` ู`BlocObserver` (ูุฃุบุฑุงุถ
ุงูุชุตุญูุญ)ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฅุนุฏุงุฏ `HydratedStorage` ููุญูุงุธ ุนูู ุงูุญุงูุฉ ุนุจุฑ ุงูุฌูุณุงุช.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/main.dart"
	title="lib/main.dart"
/>

Widget `app.dart` ุชุชููู ุจูุงุก ุนุฑุถ `WeatherPage` ุงูุฐู ุฃูุดุฃูุงู ุณุงุจููุง ูุชุณุชุฎุฏู
`BlocProvider` ูุญูู ุงูู `WeatherCubit`.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/app.dart"
	title="lib/app.dart"
/>

### ุงุฎุชุจุงุฑุงุช Widgets

ุชูููุฑ ููุชุจุฉ [`bloc_test`](https://pub.dev/packages/bloc_test) ุฃูุถูุง `MockBlocs`
ู `MockCubits` ุงูุชู ุชุฌุนู ูู ุงูุณูู ุงุฎุชุจุงุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู. ูููููุง ูุญุงูุงุฉ ุญุงูุงุช ุงูู
cubits ุงููุฎุชููุฉ ูุงูุชุฃูุฏ ูู ุงุณุชุฌุงุจุฉ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุจุดูู ุตุญูุญ.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/test/weather/view/weather_page_test.dart"
	title="test/weather/view/weather_page_test.dart"
/>

:::note

ูุณุชุฎุฏู `MockWeatherCubit` ูุน ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช `when` ูู ููุชุจุฉ `mocktail` ูู
ุฃุฌู ูุญุงูุงุฉ ุงูุญุงูุฉ ุงูุฎุงุตุฉ ุจู cubit ูู ูู ุญุงูุฉ ุงุฎุชุจุงุฑ. ูุฐุง ูุณูุญ ููุง ุจูุญุงูุงุฉ ุฌููุน
ุงูุญุงูุงุช ูุงูุชุญูู ูู ุฃู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุชุชุตุฑู ุจุดูู ุตุญูุญ ุชุญุช ูู ุงูุธุฑูู.

:::

## ุงูููุฎุต

ูุฐุง ูู ุดูุกุ ููุฏ ุฃููููุง ุงูุฏุฑุณ ุงูุชุนูููู! ๐

ูููููุง ุชุดุบูู ุงูุชุทุจูู ุงูููุงุฆู ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ `flutter run`.

ูููู ุงูุนุซูุฑ ุนูู ุงูุฃููุงุฏ ุงูุจุฑูุฌูุฉ ุงููุตุฏุฑูุฉ ุงููุงููุฉ ููุฐุง ุงููุซุงูุ ุจูุง ูู ุฐูู
ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ ูุงุฎุชุจุงุฑุงุช Widgetsุ
[ููุง](https://github.com/felangel/bloc/tree/master/examples/flutter_weather).
