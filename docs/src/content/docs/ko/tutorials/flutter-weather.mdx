---
title: Flutter Weather
description: Flutterμ—μ„ blocμ„ μ‚¬μ©ν•μ—¬ λ‚ μ”¨ μ•±μ„ κµ¬ν„ν•λ” μ‹¬μΈµ κ°€μ΄λ“.
sidebar:
  order: 5
---

import RemoteCode from '~/components/code/RemoteCode.astro';
import FlutterCreateSnippet from '~/components/tutorials/flutter-weather/FlutterCreateSnippet.astro';
import FeatureTreeSnippet from '~/components/tutorials/flutter-weather/FeatureTreeSnippet.astro';
import FlutterCreateApiClientSnippet from '~/components/tutorials/flutter-weather/FlutterCreateApiClientSnippet.astro';
import OpenMeteoModelsTreeSnippet from '~/components/tutorials/flutter-weather/OpenMeteoModelsTreeSnippet.astro';
import LocationJsonSnippet from '~/components/tutorials/flutter-weather/LocationJsonSnippet.astro';
import LocationDartSnippet from '~/components/tutorials/flutter-weather/LocationDartSnippet.astro';
import WeatherJsonSnippet from '~/components/tutorials/flutter-weather/WeatherJsonSnippet.astro';
import WeatherDartSnippet from '~/components/tutorials/flutter-weather/WeatherDartSnippet.astro';
import OpenMeteoModelsBarrelTreeSnippet from '~/components/tutorials/flutter-weather/OpenMeteoModelsBarrelTreeSnippet.astro';
import OpenMeteoLibrarySnippet from '~/components/tutorials/flutter-weather/OpenMeteoLibrarySnippet.astro';
import BuildRunnerBuildSnippet from '~/components/tutorials/flutter-weather/BuildRunnerBuildSnippet.astro';
import OpenMeteoApiClientTreeSnippet from '~/components/tutorials/flutter-weather/OpenMeteoApiClientTreeSnippet.astro';
import LocationSearchMethodSnippet from '~/components/tutorials/flutter-weather/LocationSearchMethodSnippet.astro';
import GetWeatherMethodSnippet from '~/components/tutorials/flutter-weather/GetWeatherMethodSnippet.astro';
import FlutterTestCoverageSnippet from '~/components/tutorials/flutter-weather/FlutterTestCoverageSnippet.astro';
import FlutterCreateRepositorySnippet from '~/components/tutorials/flutter-weather/FlutterCreateRepositorySnippet.astro';
import RepositoryModelsBarrelTreeSnippet from '~/components/tutorials/flutter-weather/RepositoryModelsBarrelTreeSnippet.astro';
import WeatherRepositoryLibrarySnippet from '~/components/tutorials/flutter-weather/WeatherRepositoryLibrarySnippet.astro';
import WeatherCubitTreeSnippet from '~/components/tutorials/flutter-weather/WeatherCubitTreeSnippet.astro';
import WeatherBarrelDartSnippet from '~/components/tutorials/flutter-weather/WeatherBarrelDartSnippet.astro';

![advanced](https://img.shields.io/badge/level-advanced-red.svg)

μ΄λ² νν† λ¦¬μ–Όμ—μ„λ” Flutterλ΅ λ‚ μ”¨ μ•±μ„ λ§λ“¤μ–΄ μ—¬λ¬ cubitμ„ κ΄€λ¦¬ν•μ—¬ λ™μ  ν…λ§,
λ‹Ήκ²¨μ„ μƒλ΅κ³ μΉ¨ λ“±μ„ κµ¬ν„ν•λ” λ°©λ²•μ„ λ³΄μ—¬μ¤λ‹λ‹¤. λ‚ μ”¨ μ•±μ€ κ³µκ° OpenMeteo
APIμ—μ„ μ‹¤μ‹κ°„ λ‚ μ”¨ λ°μ΄ν„°λ¥Ό κ°€μ Έμ¤κ³  μ• ν”λ¦¬μΌ€μ΄μ…μ„ λ μ΄μ–΄(λ°μ΄ν„°, λ¦¬ν¬μ§€ν† λ¦¬,
λΉ„μ¦λ‹μ¤ λ΅μ§, ν”„λ μ  ν…μ΄μ…)λ΅ λ¶„λ¦¬ν•λ” λ°©λ²•μ„ λ³΄μ—¬μ¤λ‹λ‹¤.

![demo](~/assets/tutorials/flutter-weather.gif)

## ν”„λ΅μ νΈ μ”κµ¬μ‚¬ν•­

μ•±μ—μ„ μ‚¬μ©μκ°€ ν•  μ μμ–΄μ•Ό ν•λ” κ²ƒ:

- μ „μ© κ²€μƒ‰ νμ΄μ§€μ—μ„ λ„μ‹ κ²€μƒ‰
- [Open Meteo API](https://open-meteo.com)μ—μ„ λ°ν™λ λ‚ μ”¨ λ°μ΄ν„°λ¥Ό λ³΄κΈ° μΆ‹κ²
  ν‘μ‹
- ν‘μ‹λλ” λ‹¨μ„ λ³€κ²½ (λ―Έν„°λ²• vs μ•Όλ“νμ΄λ“λ²•)

μ¶”κ°€λ΅:

- μ• ν”λ¦¬μΌ€μ΄μ…μ ν…λ§λ” μ„ νƒν• λ„μ‹μ λ‚ μ”¨λ¥Ό λ°μν•΄μ•Ό ν•¨
- μ• ν”λ¦¬μΌ€μ΄μ… μƒνƒλ” μ„Έμ… κ°„μ— μ μ§€λμ–΄μ•Ό ν•¨: μ¦‰, μ•±μ„ λ‹«μ•λ‹¤κ°€ λ‹¤μ‹ μ—΄μ–΄λ„
  μƒνƒλ¥Ό κΈ°μ–µν•΄μ•Ό ν•¨
  ([HydratedBloc](https://github.com/felangel/bloc/tree/master/packages/hydrated_bloc)
  μ‚¬μ©)

## μ£Όμ” κ°λ…

- [BlocObserver](/ko/bloc-concepts#blocobserver)λ΅ μƒνƒ λ³€ν™” κ΄€μ°°.
- [BlocProvider](/ko/flutter-bloc-concepts#blocprovider), μμ‹μ—κ² blocμ„
  μ κ³µν•λ” Flutter μ„μ ―.
- [BlocBuilder](/ko/flutter-bloc-concepts#blocbuilder), μƒλ΅μ΄ μƒνƒμ— λ”°λΌ
  μ„μ ―μ„ λΉλ“ν•λ” Flutter μ„μ ―.
- [Equatable](/ko/faqs#μ–Έμ -equatableλ¥Ό-μ‚¬μ©ν•΄μ•Ό-ν•λ‚μ”)μ„ μ‚¬μ©ν• λ¶ν•„μ”ν•
  λ¦¬λΉλ“ λ°©μ§€.
- [RepositoryProvider](/ko/flutter-bloc-concepts#repositoryprovider), μμ‹μ—κ²
  λ¦¬ν¬μ§€ν† λ¦¬λ¥Ό μ κ³µν•λ” Flutter μ„μ ―.
- [BlocListener](/ko/flutter-bloc-concepts#bloclistener), blocμ μƒνƒ λ³€ν™”μ—
  λ”°λΌ λ¦¬μ¤λ„ μ½”λ“λ¥Ό νΈμ¶ν•λ” Flutter μ„μ ―.
- [MultiBlocProvider](/ko/flutter-bloc-concepts#multiblocprovider), μ—¬λ¬
  BlocProvider μ„μ ―μ„ ν•λ‚λ΅ ν•©μΉλ” Flutter μ„μ ―.
- [BlocConsumer](/ko/flutter-bloc-concepts#blocconsumer), μƒλ΅μ΄ μƒνƒμ— λ°μ‘ν•κΈ°
  μ„ν•΄ builderμ™€ listenerλ¥Ό λ…Έμ¶ν•λ” Flutter μ„μ ―.
- μƒνƒλ¥Ό κ΄€λ¦¬ν•κ³  μ μ§€ν•κΈ° μ„ν•
  [HydratedBloc](https://github.com/felangel/bloc/tree/master/packages/hydrated_bloc).

## μ„¤μ •

μƒ flutter ν”„λ΅μ νΈλ¥Ό μƒμ„±ν•©λ‹λ‹¤

<FlutterCreateSnippet />

### ν”„λ΅μ νΈ κµ¬μ΅°

μ•±μ€ ν•΄λ‹Ή λ””λ ‰ν† λ¦¬μ— λ¶„λ¦¬λ κΈ°λ¥μΌλ΅ κµ¬μ„±λ©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ κΈ°λ¥ μκ°€ μ¦κ°€ν•¨μ—
λ”°λΌ ν™•μ¥ν•  μ μμΌλ©° κ°λ°μκ°€ μ„λ΅ λ‹¤λ¥Έ κΈ°λ¥μ„ λ³‘λ ¬λ΅ μ‘μ—…ν•  μ μμµλ‹λ‹¤.

μ•±μ€ λ„¤ κ°€μ§€ μ£Όμ” κΈ°λ¥μΌλ΅ λ‚λ μ μμµλ‹λ‹¤: **search, settings, theme,
weather**. ν•΄λ‹Ή λ””λ ‰ν† λ¦¬λ¥Ό λ§λ“¤μ–΄ λ΄…μ‹λ‹¤.

<FeatureTreeSnippet />

### μ•„ν‚¤ν…μ²

[bloc μ•„ν‚¤ν…μ²](/ko/architecture) κ°€μ΄λ“λΌμΈμ— λ”°λΌ μ• ν”λ¦¬μΌ€μ΄μ…μ€ μ—¬λ¬ λ μ΄μ–΄λ΅
κµ¬μ„±λ©λ‹λ‹¤.

μ΄ νν† λ¦¬μ–Όμ—μ„ κ° λ μ΄μ–΄κ°€ ν•λ” μΌ:

- **λ°μ΄ν„°**: APIμ—μ„ μ›μ‹ λ‚ μ”¨ λ°μ΄ν„° κ²€μƒ‰
- **λ¦¬ν¬μ§€ν† λ¦¬**: λ°μ΄ν„° λ μ΄μ–΄λ¥Ό μ¶”μƒν™”ν•κ³  μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μ‚¬μ©ν•  λ„λ©”μΈ λ¨λΈ
  λ…Έμ¶
- **λΉ„μ¦λ‹μ¤ λ΅μ§**: κ° κΈ°λ¥μ μƒνƒ κ΄€λ¦¬ (λ‹¨μ„ μ •λ³΄, λ„μ‹ μ •λ³΄, ν…λ§ λ“±)
- **ν”„λ μ  ν…μ΄μ…**: λ‚ μ”¨ μ •λ³΄ ν‘μ‹ λ° μ‚¬μ©μ μ…λ ¥ μμ§‘ (μ„¤μ • νμ΄μ§€, κ²€μƒ‰ νμ΄μ§€
  λ“±)

## λ°μ΄ν„° λ μ΄μ–΄

μ΄ μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„λ” [Open Meteo API](https://open-meteo.com)λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.

λ‘ κ°€μ§€ μ—”λ“ν¬μΈνΈμ— μ§‘μ¤‘ν•©λ‹λ‹¤:

- `https://geocoding-api.open-meteo.com/v1/search?name=$city&count=1` - μ£Όμ–΄μ§„
  λ„μ‹ μ΄λ¦„μ μ„μΉ κ°€μ Έμ¤κΈ°
- `https://api.open-meteo.com/v1/forecast?latitude=$latitude&longitude=$longitude&current_weather=true` -
  μ£Όμ–΄μ§„ μ„μΉμ λ‚ μ”¨ κ°€μ Έμ¤κΈ°

λΈλΌμ°μ €μ—μ„
[https://geocoding-api.open-meteo.com/v1/search?name=chicago&count=1](https://geocoding-api.open-meteo.com/v1/search?name=chicago&count=1)μ„
μ—΄μ–΄ μ‹μΉ΄κ³  λ„μ‹μ μ‘λ‹µμ„ ν™•μΈν•μ„Έμ”. μ‘λ‹µμ `latitude`μ™€ `longitude`λ¥Ό μ‚¬μ©ν•μ—¬
λ‚ μ”¨ μ—”λ“ν¬μΈνΈλ¥Ό νΈμ¶ν•©λ‹λ‹¤.

μ‹μΉ΄κ³ μ `latitude`/`longitude`λ” `41.85003`/`-87.65005`μ…λ‹λ‹¤. λΈλΌμ°μ €μ—μ„
[https://api.open-meteo.com/v1/forecast?latitude=43.0389&longitude=-87.90647&current_weather=true](https://api.open-meteo.com/v1/forecast?latitude=43.0389&longitude=-87.90647&current_weather=true)λ΅
μ΄λ™ν•λ©΄ μ‹μΉ΄κ³ μ λ‚ μ”¨ μ‘λ‹µμ„ λ³Ό μ μμΌλ©°, μ•±μ— ν•„μ”ν• λ¨λ“  λ°μ΄ν„°κ°€ ν¬ν•¨λμ–΄
μμµλ‹λ‹¤.

### OpenMeteo API ν΄λΌμ΄μ–ΈνΈ

OpenMeteo API ν΄λΌμ΄μ–ΈνΈλ” μ• ν”λ¦¬μΌ€μ΄μ…κ³Ό λ…λ¦½μ μ…λ‹λ‹¤. λ”°λΌμ„ λ‚΄λ¶€ ν¨ν‚¤μ§€λ΅
μƒμ„±ν•κ³  ([pub.dev](https://pub.dev)μ— κ²μ‹ν•  μλ„ μμ) λ¦¬ν¬μ§€ν† λ¦¬ λ μ΄μ–΄μ
`pubspec.yaml`μ— μ¶”κ°€ν•μ—¬ λ©”μΈ λ‚ μ”¨ μ• ν”λ¦¬μΌ€μ΄μ…μ λ°μ΄ν„° μ”μ²­μ„ μ²λ¦¬ν•©λ‹λ‹¤.

ν”„λ΅μ νΈ λ λ²¨μ— `packages`λΌλ” μƒ λ””λ ‰ν† λ¦¬λ¥Ό λ§λ“­λ‹λ‹¤. μ΄ λ””λ ‰ν† λ¦¬μ— λ¨λ“  λ‚΄λ¶€
ν¨ν‚¤μ§€λ¥Ό μ €μ¥ν•©λ‹λ‹¤.

μ΄ λ””λ ‰ν† λ¦¬ λ‚΄μ—μ„ λ‚΄μ¥λ `flutter create` λ…λ Ήμ„ μ‹¤ν–‰ν•μ—¬ API ν΄λΌμ΄μ–ΈνΈμ©
`open_meteo_api`λΌλ” μƒ ν¨ν‚¤μ§€λ¥Ό λ§λ“­λ‹λ‹¤.

<FlutterCreateApiClientSnippet />

### λ‚ μ”¨ λ°μ΄ν„° λ¨λΈ

λ‹¤μμΌλ΅ `location` λ° `weather` API μ—”λ“ν¬μΈνΈ μ‘λ‹µμ— λ€ν• λ¨λΈμ„ ν¬ν•¨ν• 
`location.dart`μ™€ `weather.dart`λ¥Ό λ§λ“­λ‹λ‹¤.

<OpenMeteoModelsTreeSnippet />

#### Location λ¨λΈ

`location.dart` λ¨λΈμ€ λ‹¤μκ³Ό κ°™μ€ location APIκ°€ λ°ν™ν•λ” λ°μ΄ν„°λ¥Ό μ €μ¥ν•΄μ•Ό
ν•©λ‹λ‹¤:

<LocationJsonSnippet />

μ„ μ‘λ‹µμ„ μ €μ¥ν•λ” μ§„ν–‰ μ¤‘μΈ `location.dart` νμΌμ…λ‹λ‹¤:

<LocationDartSnippet />

#### Weather λ¨λΈ

λ‹¤μμΌλ΅ `weather.dart`λ¥Ό μ‘μ—…ν•©λ‹λ‹¤. weather λ¨λΈμ€ λ‹¤μκ³Ό κ°™μ€ weather APIκ°€
λ°ν™ν•λ” λ°μ΄ν„°λ¥Ό μ €μ¥ν•΄μ•Ό ν•©λ‹λ‹¤:

<WeatherJsonSnippet />

μ„ μ‘λ‹µμ„ μ €μ¥ν•λ” μ§„ν–‰ μ¤‘μΈ `weather.dart` νμΌμ…λ‹λ‹¤:

<WeatherDartSnippet />

### λ°°λ΄ νμΌ

μ—¬κΈ°μ„ μ„ν¬νΈλ¥Ό μ •λ¦¬ν•κΈ° μ„ν•΄
[λ°°λ΄ νμΌ](https://adrianfaciu.dev/posts/barrel-files/)μ„ λΉ λ¥΄κ² λ§λ“¤μ–΄ λ΄…μ‹λ‹¤.

`models.dart` λ°°λ΄ νμΌμ„ λ§λ“¤κ³  λ‘ λ¨λΈμ„ λ‚΄λ³΄λƒ…λ‹λ‹¤:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/lib/src/models/models.dart"
	title="packages/open_meteo_api/lib/src/models/models.dart"
/>

ν¨ν‚¤μ§€ λ λ²¨ λ°°λ΄ νμΌ `open_meteo_api.dart`λ„ λ§λ“­λ‹λ‹¤

<OpenMeteoModelsBarrelTreeSnippet />

μµμƒμ„ `open_meteo_api.dart`μ—μ„ λ¨λΈμ„ λ‚΄λ³΄λƒ…λ‹λ‹¤:

<OpenMeteoLibrarySnippet />

### μ„¤μ •

API λ°μ΄ν„°λ΅ μ‘μ—…ν•λ ¤λ©΄ λ¨λΈμ„
[μ§λ ¬ν™” λ° μ—­μ§λ ¬ν™”](https://en.wikipedia.org/wiki/Serialization)ν•  μ μμ–΄μ•Ό
ν•©λ‹λ‹¤. μ΄λ¥Ό μ„ν•΄ λ¨λΈμ— `toJson` λ° `fromJson` λ©”μ„λ“λ¥Ό μ¶”κ°€ν•©λ‹λ‹¤.

λν• APIμ—μ„ λ°μ΄ν„°λ¥Ό κ°€μ Έμ¤κΈ° μ„ν•΄
[HTTP λ„¤νΈμ›ν¬ μ”μ²­μ„ λ§λ“λ”](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods)
λ°©λ²•μ΄ ν•„μ”ν•©λ‹λ‹¤. λ‹¤ν–‰ν μ΄λ¥Ό μ„ν• μΈκΈ° μλ” ν¨ν‚¤μ§€κ°€ μ—¬λ¬ κ° μμµλ‹λ‹¤.

`toJson` λ° `fromJson` κµ¬ν„μ„ μƒμ„±ν•κΈ° μ„ν•΄
[json_annotation](https://pub.dev/packages/json_annotation),
[json_serializable](https://pub.dev/packages/json_serializable),
[build_runner](https://pub.dev/packages/build_runner) ν¨ν‚¤μ§€λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.

μ΄ν›„ λ‹¨κ³„μ—μ„λ” [http](https://pub.dev/packages/http) ν¨ν‚¤μ§€λ¥Ό μ‚¬μ©ν•μ—¬ weather
APIμ— λ„¤νΈμ›ν¬ μ”μ²­μ„ λ³΄λ‚΄ μ• ν”λ¦¬μΌ€μ΄μ…μ΄ ν„μ¬ λ‚ μ”¨ λ°μ΄ν„°λ¥Ό ν‘μ‹ν•  μ μλ„λ΅
ν•©λ‹λ‹¤.

μ΄λ¬ν• μμ΅΄μ„±μ„ `pubspec.yaml`μ— μ¶”κ°€ν•©λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/pubspec.yaml"
	title="packages/open_meteo_api/pubspec.yaml"
/>

:::note

μμ΅΄μ„±μ„ μ¶”κ°€ν• ν›„ `flutter pub get`μ„ μ‹¤ν–‰ν•λ” κ²ƒμ„ μμ§€ λ§μ„Έμ”.

:::

### (μ—­)μ§λ ¬ν™”

μ½”λ“ μƒμ„±μ΄ μ‘λ™ν•λ ¤λ©΄ λ‹¤μμ„ μ‚¬μ©ν•μ—¬ μ½”λ“μ— μ–΄λ…Έν…μ΄μ…μ„ λ‹¬μ•„μ•Ό ν•©λ‹λ‹¤:

- `@JsonSerializable` - μ§λ ¬ν™”ν•  μ μλ” ν΄λμ¤μ— λ μ΄λΈ” μ§€μ •
- `@JsonKey` - ν•„λ“ μ΄λ¦„μ λ¬Έμμ—΄ ν‘ν„ μ κ³µ
- `@JsonValue` - ν•„λ“ κ°’μ λ¬Έμμ—΄ ν‘ν„ μ κ³µ
- `JSONConverter` κµ¬ν„ - κ°μ²΄ ν‘ν„μ„ JSON ν‘ν„μΌλ΅ λ³€ν™

κ° νμΌμ— λ€ν•΄ λ‹¤μλ„ ν•„μ”ν•©λ‹λ‹¤:

- `json_annotation` μ„ν¬νΈ
- [part](https://dart.dev/tools/pub/create-packages#organizing-a-package)
  ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν•μ—¬ μƒμ„±λ μ½”λ“ ν¬ν•¨
- μ—­μ§λ ¬ν™”λ¥Ό μ„ν• `fromJson` λ©”μ„λ“ ν¬ν•¨

#### Location λ¨λΈ

μ™„μ„±λ `location.dart` λ¨λΈ νμΌμ…λ‹λ‹¤:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/lib/src/models/location.dart"
	title="packages/open_meteo_api/lib/src/models/location.dart"
/>

#### Weather λ¨λΈ

μ™„μ„±λ `weather.dart` λ¨λΈ νμΌμ…λ‹λ‹¤:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/lib/src/models/weather.dart"
	title="packages/open_meteo_api/lib/src/models/weather.dart"
/>

#### Build νμΌ μƒμ„±

`open_meteo_api` ν΄λ”μ— `build.yaml` νμΌμ„ λ§λ“­λ‹λ‹¤. μ΄ νμΌμ λ©μ μ€
`json_serializable` ν•„λ“ μ΄λ¦„μ λ…λ… κ·μΉ™ κ°„ λ¶μΌμΉλ¥Ό μ²λ¦¬ν•λ” κ²ƒμ…λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/build.yaml"
	title="packages/open_meteo_api/build.yaml"
/>

#### μ½”λ“ μƒμ„±

`build_runner`λ¥Ό μ‚¬μ©ν•μ—¬ μ½”λ“λ¥Ό μƒμ„±ν•©λ‹λ‹¤.

<BuildRunnerBuildSnippet />

`build_runner`κ°€ `location.g.dart`μ™€ `weather.g.dart` νμΌμ„ μƒμ„±ν•΄μ•Ό ν•©λ‹λ‹¤.

### OpenMeteo API ν΄λΌμ΄μ–ΈνΈ

`src` λ””λ ‰ν† λ¦¬ λ‚΄μ— `open_meteo_api_client.dart`μ— API ν΄λΌμ΄μ–ΈνΈλ¥Ό λ§λ“­λ‹λ‹¤.
μ΄μ  ν”„λ΅μ νΈ κµ¬μ΅°λ” λ‹¤μκ³Ό κ°™μ•„μ•Ό ν•©λ‹λ‹¤:

<OpenMeteoApiClientTreeSnippet />

μ΄μ „μ— `pubspec.yaml` νμΌμ— μ¶”κ°€ν• [http](https://pub.dev/packages/http)
ν¨ν‚¤μ§€λ¥Ό μ‚¬μ©ν•μ—¬ weather APIμ— HTTP μ”μ²­μ„ ν•κ³  μ΄ μ •λ³΄λ¥Ό μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„
μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

API ν΄λΌμ΄μ–ΈνΈλ” λ‘ κ°€μ§€ λ©”μ„λ“λ¥Ό λ…Έμ¶ν•©λ‹λ‹¤:

- `locationSearch` - `Future<Location>` λ°ν™
- `getWeather` - `Future<Weather>` λ°ν™

#### Location κ²€μƒ‰

`locationSearch` λ©”μ„λ“λ” location APIλ¥Ό νΈμ¶ν•κ³  ν•΄λ‹Ήλλ” κ²½μ°
`LocationRequestFailure` μ—λ¬λ¥Ό throwν•©λ‹λ‹¤. μ™„μ„±λ λ©”μ„λ“λ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤:

<LocationSearchMethodSnippet />

#### λ‚ μ”¨ κ°€μ Έμ¤κΈ°

λ§μ°¬κ°€μ§€λ΅ `getWeather` λ©”μ„λ“λ” weather APIλ¥Ό νΈμ¶ν•κ³  ν•΄λ‹Ήλλ” κ²½μ°
`WeatherRequestFailure` μ—λ¬λ¥Ό throwν•©λ‹λ‹¤. μ™„μ„±λ λ©”μ„λ“λ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤:

<GetWeatherMethodSnippet />

μ™„μ„±λ νμΌμ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/lib/src/open_meteo_api_client.dart"
	title="packages/open_meteo_api/lib/src/open_meteo_api_client.dart"
/>

#### λ°°λ΄ νμΌ μ—…λ°μ΄νΈ

λ°°λ΄ νμΌμ— API ν΄λΌμ΄μ–ΈνΈλ¥Ό μ¶”κ°€ν•μ—¬ μ΄ ν¨ν‚¤μ§€λ¥Ό λ§λ¬΄λ¦¬ν•©λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/lib/open_meteo_api.dart"
	title="packages/open_meteo_api/lib/open_meteo_api.dart"
/>

### μ λ‹› ν…μ¤νΈ

λ°μ΄ν„° λ μ΄μ–΄λ” μ• ν”λ¦¬μΌ€μ΄μ…μ κΈ°λ°μ΄λ―€λ΅ μ λ‹› ν…μ¤νΈλ¥Ό μ‘μ„±ν•λ” κ²ƒμ΄ νΉν
μ¤‘μ”ν•©λ‹λ‹¤. μ λ‹› ν…μ¤νΈλ” ν¨ν‚¤μ§€κ°€ μμƒλ€λ΅ λ™μ‘ν•λ‹¤λ” ν™•μ‹ μ„ μ¤λ‹λ‹¤.

#### μ„¤μ •

μ΄μ „μ— pubspec.yamlμ— [test](https://pub.dev/packages/test) ν¨ν‚¤μ§€λ¥Ό μ¶”κ°€ν•μ—¬
μ λ‹› ν…μ¤νΈλ¥Ό μ‰½κ² μ‘μ„±ν•  μ μμµλ‹λ‹¤.

API ν΄λΌμ΄μ–ΈνΈμ™€ λ‘ λ¨λΈμ— λ€ν• ν…μ¤νΈ νμΌμ„ λ§λ“¤ κ²ƒμ…λ‹λ‹¤.

#### Location ν…μ¤νΈ

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/test/location_test.dart"
	title="packages/open_meteo_api/test/location_test.dart"
/>

#### Weather ν…μ¤νΈ

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/test/weather_test.dart"
	title="packages/open_meteo_api/test/weather_test.dart"
/>

#### API ν΄λΌμ΄μ–ΈνΈ ν…μ¤νΈ

λ‹¤μμΌλ΅ API ν΄λΌμ΄μ–ΈνΈλ¥Ό ν…μ¤νΈν•©λ‹λ‹¤. API ν΄λΌμ΄μ–ΈνΈκ°€ μ—£μ§€ μΌ€μ΄μ¤λ¥Ό ν¬ν•¨ν•μ—¬
λ‘ API νΈμ¶μ„ μ¬λ°”λ¥΄κ² μ²λ¦¬ν•λ”μ§€ ν…μ¤νΈν•΄μ•Ό ν•©λ‹λ‹¤.

:::note

μ°λ¦¬μ λ©ν‘λ” API μμ²΄κ°€ μ•„λ‹ API ν΄λΌμ΄μ–ΈνΈ λ΅μ§(λ¨λ“  μ—£μ§€ μΌ€μ΄μ¤ ν¬ν•¨)μ„
ν…μ¤νΈν•λ” κ²ƒμ΄λ―€λ΅ ν…μ¤νΈμ—μ„ μ‹¤μ  API νΈμ¶μ„ ν•μ§€ μ•μµλ‹λ‹¤. μΌκ΄€λκ³  μ μ–΄λ
ν…μ¤νΈ ν™κ²½μ„ κ°–κΈ° μ„ν•΄ μ΄μ „μ— pubspec.yaml νμΌμ— μ¶”κ°€ν•
[mocktail](https://github.com/felangel/mocktail)μ„ μ‚¬μ©ν•μ—¬ `http` ν΄λΌμ΄μ–ΈνΈλ¥Ό
λ¨ν‚Ήν•©λ‹λ‹¤.

:::

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/open_meteo_api/test/open_meteo_api_client_test.dart"
	title="packages/open_meteo_api/test/open_meteo_api_client_test.dart"
/>

#### ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€

λ§μ§€λ§‰μΌλ΅ κ° μ½”λ“ λΌμΈμ΄ μµμ†ν• ν•λ‚μ ν…μ¤νΈ μΌ€μ΄μ¤λ΅ μ»¤λ²„λμ—λ”μ§€ ν™•μΈν•κΈ°
μ„ν•΄ ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€λ¥Ό μμ§‘ν•©λ‹λ‹¤.

<FlutterTestCoverageSnippet />

## λ¦¬ν¬μ§€ν† λ¦¬ λ μ΄μ–΄

λ¦¬ν¬μ§€ν† λ¦¬ λ μ΄μ–΄μ λ©ν‘λ” λ°μ΄ν„° λ μ΄μ–΄λ¥Ό μ¶”μƒν™”ν•κ³  bloc λ μ΄μ–΄μ™€μ ν†µμ‹ μ„
μ©μ΄ν•κ² ν•λ” κ²ƒμ…λ‹λ‹¤. μ΄λ ‡κ² ν•λ©΄ μ½”λ“λ² μ΄μ¤μ λ‚λ¨Έμ§€ λ¶€λ¶„μ€ νΉμ • λ°μ΄ν„°
ν”„λ΅λ°”μ΄λ” κµ¬ν„μ΄ μ•„λ‹ λ¦¬ν¬μ§€ν† λ¦¬ λ μ΄μ–΄μ—μ„ λ…Έμ¶ν•λ” ν•¨μμ—λ§ μμ΅΄ν•©λ‹λ‹¤. μ΄λ¥Ό
ν†µν•΄ μ• ν”λ¦¬μΌ€μ΄μ… λ λ²¨ μ½”λ“λ¥Ό λ°©ν•΄ν•μ§€ μ•κ³  λ°μ΄ν„° ν”„λ΅λ°”μ΄λ”λ¥Ό λ³€κ²½ν•  μ
μμµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄, μ΄ νΉμ • weather APIμ—μ„ λ§μ΄κ·Έλ μ΄μ…ν•κΈ°λ΅ κ²°μ •ν•λ©΄
λ¦¬ν¬μ§€ν† λ¦¬ λλ” μ• ν”λ¦¬μΌ€μ΄μ… λ μ΄μ–΄μ κ³µκ° APIλ¥Ό λ³€κ²½ν•μ§€ μ•κ³ λ„ μƒ API
ν΄λΌμ΄μ–ΈνΈλ¥Ό λ§λ“¤μ–΄ κµμ²΄ν•  μ μμ–΄μ•Ό ν•©λ‹λ‹¤.

### μ„¤μ •

packages λ””λ ‰ν† λ¦¬ λ‚΄μ—μ„ λ‹¤μ λ…λ Ήμ„ μ‹¤ν–‰ν•©λ‹λ‹¤:

<FlutterCreateRepositorySnippet />

λ§μ§€λ§‰ λ‹¨κ³„μ `open_meteo_api` ν¨ν‚¤μ§€λ¥Ό ν¬ν•¨ν•μ—¬ `open_meteo_api` ν¨ν‚¤μ§€μ™€
λ™μΌν• ν¨ν‚¤μ§€λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤. `pubspec.yaml`μ„ μ—…λ°μ΄νΈν•κ³  `flutter pub get`μ„
μ‹¤ν–‰ν•©λ‹λ‹¤.

:::note

`open_meteo_api`μ μ„μΉλ¥Ό μ§€μ •ν•κΈ° μ„ν•΄ `path`λ¥Ό μ‚¬μ©ν•λ©°, μ΄λ¥Ό ν†µν•΄ `pub.dev`μ
μ™Έλ¶€ ν¨ν‚¤μ§€μ²λΌ μ·¨κΈ‰ν•  μ μμµλ‹λ‹¤.

:::

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/weather_repository/pubspec.yaml"
	title="packages/weather_repository/pubspec.yaml"
/>

### Weather Repository λ¨λΈ

λ„λ©”μΈλ³„ λ‚ μ”¨ λ¨λΈμ„ λ…Έμ¶ν•κΈ° μ„ν•΄ μƒ `weather.dart` νμΌμ„ λ§λ“­λ‹λ‹¤. μ΄ λ¨λΈμ€
λΉ„μ¦λ‹μ¤ μΌ€μ΄μ¤μ™€ κ΄€λ ¨λ λ°μ΄ν„°λ§ ν¬ν•¨ν•©λ‹λ‹¤ -- μ¦‰, API ν΄λΌμ΄μ–ΈνΈ λ° μ›μ‹
λ°μ΄ν„° ν•μ‹κ³Ό μ™„μ „ν λ¶„λ¦¬λμ–΄μ•Ό ν•©λ‹λ‹¤. ν‰μ†μ²λΌ `models.dart` λ°°λ΄ νμΌλ„
λ§λ“­λ‹λ‹¤.

<RepositoryModelsBarrelTreeSnippet />

μ΄λ²μ—λ” weather λ¨λΈμ΄ `location, temperature, condition` ν”„λ΅νΌν‹°λ§
μ €μ¥ν•©λ‹λ‹¤. μ§λ ¬ν™” λ° μ—­μ§λ ¬ν™”λ¥Ό μ„ν•΄ μ½”λ“μ— μ–΄λ…Έν…μ΄μ…μ„ κ³„μ† λ‹¬ κ²ƒμ…λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/weather_repository/lib/src/models/weather.dart"
	title="packages/weather_repository/lib/src/models/weather.dart"
/>

μ΄μ „μ— λ§λ“  λ°°λ΄ νμΌμ„ μ—…λ°μ΄νΈν•μ—¬ λ¨λΈμ„ ν¬ν•¨ν•©λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/weather_repository/lib/src/models/models.dart"
	title="packages/weather_repository/lib/src/models/models.dart"
/>

#### Build νμΌ μƒμ„±

μ΄μ „κ³Ό λ§μ°¬κ°€μ§€λ΅ λ‹¤μ λ‚΄μ©μΌλ΅ `build.yaml` νμΌμ„ λ§λ“¤μ–΄μ•Ό ν•©λ‹λ‹¤:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/weather_repository/build.yaml"
	title="packages/weather_repository/build.yaml"
/>

#### μ½”λ“ μƒμ„±

μ΄μ „μ— ν–λ κ²ƒμ²λΌ λ‹¤μ λ…λ Ήμ„ μ‹¤ν–‰ν•μ—¬ (μ—­)μ§λ ¬ν™” κµ¬ν„μ„ μƒμ„±ν•©λ‹λ‹¤.

<BuildRunnerBuildSnippet />

#### λ°°λ΄ νμΌ

λ¨λΈμ„ λ‚΄λ³΄λ‚΄κΈ° μ„ν•΄
`packages/weather_repository/lib/weather_repository.dart`λΌλ” ν¨ν‚¤μ§€ λ λ²¨ λ°°λ΄
νμΌλ„ λ§λ“­λ‹λ‹¤:

<WeatherRepositoryLibrarySnippet />

### Weather Repository

`WeatherRepository`μ μ£Όμ” λ©ν‘λ” λ°μ΄ν„° ν”„λ΅λ°”μ΄λ”λ¥Ό μ¶”μƒν™”ν•λ” μΈν„°νμ΄μ¤λ¥Ό
μ κ³µν•λ” κ²ƒμ…λ‹λ‹¤. μ΄ κ²½μ° `WeatherRepository`λ” `WeatherApiClient`μ— μμ΅΄ν•κ³ 
λ‹¨μΌ κ³µκ° λ©”μ„λ“ `getWeather(String city)`λ¥Ό λ…Έμ¶ν•©λ‹λ‹¤.

:::note

`WeatherRepository`μ μ†λΉ„μλ” λ‚ μ”¨ APIμ— λ‘ λ²μ λ„¤νΈμ›ν¬ μ”μ²­μ΄ μ΄λ£¨μ–΄μ§„λ‹¤λ”
μ‚¬μ‹¤κ³Ό κ°™μ€ κΈ°μ € κµ¬ν„ μ„Έλ¶€ μ‚¬ν•­μ„ μ• μ μ—†μµλ‹λ‹¤. `WeatherRepository`μ λ©ν‘λ”
"λ¬΄μ—‡"κ³Ό "μ–΄λ–»κ²"λ¥Ό λ¶„λ¦¬ν•λ” κ²ƒμ…λ‹λ‹¤ -- μ¦‰, μ£Όμ–΄μ§„ λ„μ‹μ λ‚ μ”¨λ¥Ό κ°€μ Έμ¤λ”
λ°©λ²•μ„ κ°–κ³  μ‹¶μ§€λ§, λ°μ΄ν„°κ°€ μ–΄λ””μ„ μ–΄λ–»κ² μ¤λ”μ§€λ” μ‹ κ²½ μ“°μ§€ μ•μµλ‹λ‹¤.

:::

#### μ„¤μ •

ν¨ν‚¤μ§€μ `src` λ””λ ‰ν† λ¦¬ λ‚΄μ— `weather_repository.dart` νμΌμ„ λ§λ“¤κ³  λ¦¬ν¬μ§€ν† λ¦¬
κµ¬ν„μ„ μ‘μ—…ν•©λ‹λ‹¤.

μ§‘μ¤‘ν•  μ£Όμ” λ©”μ„λ“λ” `getWeather(String city)`μ…λ‹λ‹¤. λ‹¤μκ³Ό κ°™μ΄ API
ν΄λΌμ΄μ–ΈνΈμ— λ€ν• λ‘ λ²μ νΈμ¶μ„ μ‚¬μ©ν•μ—¬ κµ¬ν„ν•  μ μμµλ‹λ‹¤:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/weather_repository/lib/src/weather_repository.dart"
	title="packages/weather_repository/lib/src/weather_repository.dart"
/>

#### λ°°λ΄ νμΌ

μ΄μ „μ— λ§λ“  λ°°λ΄ νμΌμ„ μ—…λ°μ΄νΈν•©λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/weather_repository/lib/weather_repository.dart"
	title="packages/weather_repository/lib/weather_repository.dart"
/>

### μ λ‹› ν…μ¤νΈ

λ°μ΄ν„° λ μ΄μ–΄μ™€ λ§μ°¬κ°€μ§€λ΅ λ„λ©”μΈ λ λ²¨ λ΅μ§μ΄ μ¬λ°”λ¥Έμ§€ ν™•μΈν•κΈ° μ„ν•΄ λ¦¬ν¬μ§€ν† λ¦¬
λ μ΄μ–΄λ¥Ό ν…μ¤νΈν•λ” κ²ƒμ΄ μ¤‘μ”ν•©λ‹λ‹¤. `WeatherRepository`λ¥Ό ν…μ¤νΈν•κΈ° μ„ν•΄
[mocktail](https://github.com/felangel/mocktail) λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.
κ²©λ¦¬λ, μ μ–΄λ ν™κ²½μ—μ„ `WeatherRepository` λ΅μ§μ„ μ λ‹› ν…μ¤νΈν•κΈ° μ„ν•΄ κΈ°μ € api
ν΄λΌμ΄μ–ΈνΈλ¥Ό λ¨ν‚Ήν•©λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/packages/weather_repository/test/weather_repository_test.dart"
	title="packages/weather_repository/test/weather_repository_test.dart"
/>

## λΉ„μ¦λ‹μ¤ λ΅μ§ λ μ΄μ–΄

λΉ„μ¦λ‹μ¤ λ΅μ§ λ μ΄μ–΄μ—μ„λ” `WeatherRepository`μ λ‚ μ”¨ λ„λ©”μΈ λ¨λΈμ„ μ‚¬μ©ν•κ³ 
UIλ¥Ό ν†µν•΄ μ‚¬μ©μμ—κ² ν‘μ‹λ  κΈ°λ¥ λ λ²¨ λ¨λΈμ„ λ…Έμ¶ν•©λ‹λ‹¤.

:::note

μ΄κ²ƒμ΄ μ°λ¦¬κ°€ κµ¬ν„ν•λ” μ„Έ λ²μ§Έ λ‹¤λ¥Έ μ ν•μ λ‚ μ”¨ λ¨λΈμ…λ‹λ‹¤. API ν΄λΌμ΄μ–ΈνΈμ—μ„
weather λ¨λΈμ€ APIκ°€ λ°ν™ν• λ¨λ“  μ •λ³΄λ¥Ό ν¬ν•¨ν–μµλ‹λ‹¤. λ¦¬ν¬μ§€ν† λ¦¬ λ μ΄μ–΄μ—μ„
weather λ¨λΈμ€ λΉ„μ¦λ‹μ¤ μΌ€μ΄μ¤λ¥Ό κΈ°λ°μΌλ΅ μ¶”μƒν™”λ λ¨λΈλ§ ν¬ν•¨ν–μµλ‹λ‹¤. μ΄
λ μ΄μ–΄μ—μ„ weather λ¨λΈμ€ ν„μ¬ κΈ°λ¥ μ„ΈνΈμ— νΉλ³„ν ν•„μ”ν• κ΄€λ ¨ μ •λ³΄λ¥Ό ν¬ν•¨ν•©λ‹λ‹¤.

:::

### μ„¤μ •

λΉ„μ¦λ‹μ¤ λ΅μ§ λ μ΄μ–΄κ°€ λ©”μΈ μ•±μ— μμΌλ―€λ΅ μ „μ²΄ `flutter_weather` ν”„λ΅μ νΈμ
`pubspec.yaml`μ„ νΈμ§‘ν•κ³  μ‚¬μ©ν•  λ¨λ“  ν¨ν‚¤μ§€λ¥Ό ν¬ν•¨ν•΄μ•Ό ν•©λ‹λ‹¤.

- [equatable](https://pub.dev/packages/equatable)μ„ μ‚¬μ©ν•λ©΄ μ•±μ μƒνƒ ν΄λμ¤
  μΈμ¤ν„΄μ¤λ¥Ό equals `==` μ—°μ‚°μλ¥Ό μ‚¬μ©ν•μ—¬ λΉ„κµν•  μ μμµλ‹λ‹¤. λ‚΄λ¶€μ μΌλ΅ blocμ€
  μƒνƒκ°€ κ°™μ€μ§€ λΉ„κµν•κ³ , κ°™μ§€ μ•μΌλ©΄ λ¦¬λΉλ“λ¥Ό νΈλ¦¬κ±°ν•©λ‹λ‹¤. μ΄λ” μ„μ ― νΈλ¦¬κ°€
  ν•„μ”ν•  λ•λ§ λ¦¬λΉλ“λλ„λ΅ ν•μ—¬ μ„±λ¥μ„ λΉ λ¥΄κ³  λ°μ‘μ μΌλ΅ μ μ§€ν•©λ‹λ‹¤.
- [google_fonts](https://pub.dev/packages/google_fonts)λ΅ μ‚¬μ©μ μΈν„°νμ΄μ¤λ¥Ό
  κΎΈλ°€ μ μμµλ‹λ‹¤.
- [HydratedBloc](https://pub.dev/packages/hydrated_bloc)μ„ μ‚¬μ©ν•λ©΄ μ•±μ„
  λ‹«μ•λ‹¤κ°€ λ‹¤μ‹ μ—΄ λ• μ• ν”λ¦¬μΌ€μ΄μ… μƒνƒλ¥Ό μ μ§€ν•  μ μμµλ‹λ‹¤.
- λ°©κΈ λ§λ“  `weather_repository` ν¨ν‚¤μ§€λ¥Ό ν¬ν•¨ν•μ—¬ ν„μ¬ λ‚ μ”¨ λ°μ΄ν„°λ¥Ό κ°€μ Έμ¬ μ
  μμµλ‹λ‹¤!

ν…μ¤νΈλ¥Ό μ„ν•΄ μΌλ°μ μΈ `test` ν¨ν‚¤μ§€μ™€ μμ΅΄μ„± λ¨ν‚Ήμ„ μ„ν• `mocktail`, λΉ„μ¦λ‹μ¤
λ΅μ§ λ‹¨μ„ λλ” blocμ μ‰¬μ΄ ν…μ¤νΈλ¥Ό κ°€λ¥ν•κ² ν•λ”
[bloc_test](https://pub.dev/packages/bloc_test)λ¥Ό ν¬ν•¨ν•©λ‹λ‹¤!

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/pubspec.yaml"
	title="pubspec.yaml"
/>

λ‹¤μμΌλ΅ `weather` κΈ°λ¥ λ””λ ‰ν† λ¦¬ λ‚΄μ μ• ν”λ¦¬μΌ€μ΄μ… λ μ΄μ–΄λ¥Ό μ‘μ—…ν•©λ‹λ‹¤.

### Weather λ¨λΈ

weather λ¨λΈμ λ©ν‘λ” μ•±μ— ν‘μ‹λλ” λ‚ μ”¨ λ°μ΄ν„°μ™€ μ¨λ„ μ„¤μ •(μ„­μ”¨ λλ” ν™”μ”¨)μ„
μ¶”μ ν•λ” κ²ƒμ…λ‹λ‹¤.

`flutter_weather/lib/weather/models/weather.dart`λ¥Ό λ§λ“­λ‹λ‹¤:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/models/weather.dart"
	title="lib/weather/models/weather.dart"
/>

### Build νμΌ μƒμ„±

λΉ„μ¦λ‹μ¤ λ΅μ§ λ μ΄μ–΄λ¥Ό μ„ν• `build.yaml` νμΌμ„ λ§λ“­λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/build.yaml"
	title="build.yaml"
/>

### μ½”λ“ μƒμ„±

`build_runner`λ¥Ό μ‹¤ν–‰ν•μ—¬ (μ—­)μ§λ ¬ν™” κµ¬ν„μ„ μƒμ„±ν•©λ‹λ‹¤.

<BuildRunnerBuildSnippet />

### λ°°λ΄ νμΌ

λ°°λ΄ νμΌ(`flutter_weather/lib/weather/models/models.dart`)μ—μ„ λ¨λΈμ„
λ‚΄λ³΄λƒ…λ‹λ‹¤:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/models/models.dart"
	title="lib/weather/models/models.dart"
/>

κ·Έλ° λ‹¤μ μµμƒμ„ weather λ°°λ΄ νμΌ(`flutter_weather/lib/weather/weather.dart`)μ„
λ§λ“­λ‹λ‹¤;

<WeatherBarrelDartSnippet />

### Weather

`HydratedCubit`μ„ μ‚¬μ©ν•μ—¬ μ•±μ΄ λ‹«μ•λ‹¤κ°€ λ‹¤μ‹ μ—΄μ–΄λ„ μ• ν”λ¦¬μΌ€μ΄μ… μƒνƒλ¥Ό κΈ°μ–µν• 
μ μκ² ν•©λ‹λ‹¤.

:::note

`HydratedCubit`μ€ μ„Έμ… κ°„ μƒνƒ μ μ§€ λ° λ³µμ›μ„ μ²λ¦¬ν•λ” `Cubit`μ ν™•μ¥μ…λ‹λ‹¤.

:::

#### Weather μƒνƒ

[Bloc VSCode](https://marketplace.visualstudio.com/items?itemName=FelixAngelov.bloc)
λλ” [Bloc IntelliJ](https://plugins.jetbrains.com/plugin/12129-bloc) ν™•μ¥μ„
μ‚¬μ©ν•μ—¬ `weather` λ””λ ‰ν† λ¦¬λ¥Ό μ°ν΄λ¦­ν•κ³  `Weather`λΌλ” μƒ cubitμ„ λ§λ“­λ‹λ‹¤.
ν”„λ΅μ νΈ κµ¬μ΅°λ” λ‹¤μκ³Ό κ°™μ•„μ•Ό ν•©λ‹λ‹¤:

<WeatherCubitTreeSnippet />

λ‚ μ”¨ μ•±μ΄ μμ„ μ μλ” λ„¤ κ°€μ§€ μƒνƒ:

- `initial` - μ•„λ¬΄κ²ƒλ„ λ΅λ“λκΈ° μ „
- `loading` - API νΈμ¶ μ¤‘
- `success` - API νΈμ¶ μ„±κ³µ
- `failure` - API νΈμ¶ μ‹¤ν¨

`WeatherStatus` enumμ΄ μ„μ λ‚΄μ©μ„ λ‚νƒ€λƒ…λ‹λ‹¤.

μ™„μ„±λ weather μƒνƒλ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤:

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/cubit/weather_state.dart"
	title="lib/weather/cubit/weather_state.dart"
/>

#### Weather Cubit

`WeatherState`λ¥Ό μ •μν–μΌλ‹ μ΄μ  λ‹¤μ λ©”μ„λ“λ¥Ό λ…Έμ¶ν•λ” `WeatherCubit`μ„
μ‘μ„±ν•©λ‹λ‹¤:

- `fetchWeather(String? city)` - weather repositoryλ¥Ό μ‚¬μ©ν•μ—¬ μ£Όμ–΄μ§„ λ„μ‹μ
  weather κ°μ²΄λ¥Ό κ°€μ Έμ¤λ ¤κ³  μ‹λ„
- `refreshWeather()` - ν„μ¬ weather μƒνƒλ¥Ό κΈ°λ°μΌλ΅ weather repositoryλ¥Ό
  μ‚¬μ©ν•μ—¬ μƒ weather κ°μ²΄λ¥Ό κ°€μ Έμ΄
- `toggleUnits()` - μ„­μ”¨μ™€ ν™”μ”¨ μ‚¬μ΄μ—μ„ μƒνƒλ¥Ό ν† κΈ€
- `fromJson(Map<String, dynamic> json)`, `toJson(WeatherState state)` - μ§€μ†μ„±μ—
  μ‚¬μ©

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/cubit/weather_cubit.dart"
	title="lib/weather/cubit/weather_cubit.dart"
/>

:::note

λ‹¤μμ„ ν†µν•΄ (μ—­)μ§λ ¬ν™” μ½”λ“λ¥Ό μƒμ„±ν•λ” κ²ƒμ„ μμ§€ λ§μ„Έμ”:

<BuildRunnerBuildSnippet />
:::

### μ λ‹› ν…μ¤νΈ

λ°μ΄ν„° λ° λ¦¬ν¬μ§€ν† λ¦¬ λ μ΄μ–΄μ™€ λ§μ°¬κ°€μ§€λ΅ κΈ°λ¥ λ λ²¨ λ΅μ§μ΄ μμƒλ€λ΅ λ™μ‘ν•λ”μ§€
ν™•μΈν•κΈ° μ„ν•΄ λΉ„μ¦λ‹μ¤ λ΅μ§ λ μ΄μ–΄λ¥Ό μ λ‹› ν…μ¤νΈν•λ” κ²ƒμ΄ μ¤‘μ”ν•©λ‹λ‹¤. `mocktail`
μ™Έμ—λ„ [bloc_test](https://pub.dev/packages/bloc_test)λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.

`test`, `bloc_test`, `mocktail` ν¨ν‚¤μ§€λ¥Ό `dev_dependencies`μ— μ¶”κ°€ν•©λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/pubspec.yaml"
	title="pubspec.yaml"
/>

:::note

[bloc_test](https://pub.dev/packages/bloc_test) ν¨ν‚¤μ§€λ¥Ό μ‚¬μ©ν•λ©΄ blocμ„
ν…μ¤νΈμ©μΌλ΅ μ‰½κ² μ¤€λΉ„ν•κ³ , μƒνƒ λ³€κ²½μ„ μ²λ¦¬ν•κ³ , μΌκ΄€λ λ°©μ‹μΌλ΅ κ²°κ³Όλ¥Ό ν™•μΈν• 
μ μμµλ‹λ‹¤.

:::

#### Weather Cubit ν…μ¤νΈ

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/test/weather/cubit/weather_cubit_test.dart"
	title="test/weather/cubit/weather_cubit_test.dart"
/>

## ν”„λ μ  ν…μ΄μ… λ μ΄μ–΄

### Weather νμ΄μ§€

`WeatherPage`λ” `BlocProvider`λ¥Ό μ‚¬μ©ν•μ—¬ `WeatherCubit` μΈμ¤ν„΄μ¤λ¥Ό μ„μ ― νΈλ¦¬μ—
μ κ³µν•©λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/view/weather_page.dart"
	title="lib/weather/view/weather_page.dart"
/>

νμ΄μ§€κ°€ `SettingsPage`μ™€ `SearchPage` μ„μ ―μ— μμ΅΄ν•λ” κ²ƒμ„ μ• μ μμΌλ©°, λ‹¤μμ—
λ§λ“¤ κ²ƒμ…λ‹λ‹¤.

### SettingsPage

μ„¤μ • νμ΄μ§€μ—μ„ μ‚¬μ©μλ” μ¨λ„ λ‹¨μ„μ— λ€ν• κΈ°λ³Έ μ„¤μ •μ„ μ—…λ°μ΄νΈν•  μ μμµλ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/settings/view/settings_page.dart"
	title="lib/settings/view/settings_page.dart"
/>

### SearchPage

κ²€μƒ‰ νμ΄μ§€μ—μ„ μ‚¬μ©μλ” μ›ν•λ” λ„μ‹ μ΄λ¦„μ„ μ…λ ¥ν•  μ μμΌλ©°
`Navigator.of(context).pop`μ„ ν†µν•΄ μ΄μ „ λΌμ°νΈμ— κ²€μƒ‰ κ²°κ³Όλ¥Ό μ κ³µν•©λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/search/view/search_page.dart"
	title="lib/search/view/search_page.dart"
/>

### Weather μ„μ ―

μ•±μ€ `WeatherCubit`μ λ„¤ κ°€μ§€ κ°€λ¥ν• μƒνƒμ— λ”°λΌ λ‹¤λ¥Έ ν™”λ©΄μ„ ν‘μ‹ν•©λ‹λ‹¤.

#### WeatherEmpty

μ΄ ν™”λ©΄μ€ μ‚¬μ©μκ°€ μ•„μ§ λ„μ‹λ¥Ό μ„ νƒν•μ§€ μ•μ•„ ν‘μ‹ν•  λ°μ΄ν„°κ°€ μ—†μ„ λ• ν‘μ‹λ©λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/widgets/weather_empty.dart"
	title="lib/weather/widgets/weather_empty.dart"
/>

#### WeatherError

μ—λ¬κ°€ μμ„ λ• μ΄ ν™”λ©΄μ΄ ν‘μ‹λ©λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/widgets/weather_error.dart"
	title="lib/weather/widgets/weather_error.dart"
/>

#### WeatherLoading

μ• ν”λ¦¬μΌ€μ΄μ…μ΄ λ°μ΄ν„°λ¥Ό κ°€μ Έμ¤λ” λ™μ• μ΄ ν™”λ©΄μ΄ ν‘μ‹λ©λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/widgets/weather_loading.dart"
	title="lib/weather/widgets/weather_loading.dart"
/>

#### WeatherPopulated

μ‚¬μ©μκ°€ λ„μ‹λ¥Ό μ„ νƒν•κ³  λ°μ΄ν„°λ¥Ό κ°€μ Έμ¨ ν›„ μ΄ ν™”λ©΄μ΄ ν‘μ‹λ©λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/widgets/weather_populated.dart"
	title="lib/weather/widgets/weather_populated.dart"
/>

### λ°°λ΄ νμΌ

μ„ν¬νΈλ¥Ό μ •λ¦¬ν•κΈ° μ„ν•΄ μ΄λ¬ν• μƒνƒλ¥Ό λ°°λ΄ νμΌμ— μ¶”κ°€ν•©λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/weather/widgets/widgets.dart"
	title="lib/weather/widgets/widgets.dart"
/>

### μ§„μ…μ 

`main.dart` νμΌμ€ `WeatherApp`κ³Ό `BlocObserver`(λ””λ²„κΉ… λ©μ )λ¥Ό μ΄κΈ°ν™”ν•κ³  μ„Έμ…
κ°„ μƒνƒλ¥Ό μ μ§€ν•κΈ° μ„ν•΄ `HydratedStorage`λ¥Ό μ„¤μ •ν•΄μ•Ό ν•©λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/main.dart"
	title="lib/main.dart"
/>

`app.dart` μ„μ ―μ€ μ΄μ „μ— λ§λ“  `WeatherPage` λ·°λ¥Ό λΉλ“ν•κ³  `BlocProvider`λ¥Ό
μ‚¬μ©ν•μ—¬ `WeatherCubit`μ„ μ£Όμ…ν•©λ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/lib/app.dart"
	title="lib/app.dart"
/>

### μ„μ ― ν…μ¤νΈ

[`bloc_test`](https://pub.dev/packages/bloc_test) λΌμ΄λΈλ¬λ¦¬λ” UIλ¥Ό μ‰½κ²
ν…μ¤νΈν•  μ μλ” `MockBlocs`μ™€ `MockCubits`λ„ λ…Έμ¶ν•©λ‹λ‹¤. λ‹¤μ–‘ν• cubitμ μƒνƒλ¥Ό
λ¨ν‚Ήν•κ³  UIκ°€ μ¬λ°”λ¥΄κ² λ°μ‘ν•λ”μ§€ ν™•μΈν•  μ μμµλ‹λ‹¤.

<RemoteCode
	url="https://raw.githubusercontent.com/felangel/bloc/master/examples/flutter_weather/test/weather/view/weather_page_test.dart"
	title="test/weather/view/weather_page_test.dart"
/>

:::note

κ° ν…μ¤νΈ μΌ€μ΄μ¤μ—μ„ cubitμ μƒνƒλ¥Ό μ¤ν…ν•κΈ° μ„ν•΄ `mocktail`μ `when` APIμ™€ ν•¨κ»
`MockWeatherCubit`μ„ μ‚¬μ©ν•©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ λ¨λ“  μƒνƒλ¥Ό μ‹λ®¬λ μ΄μ…ν•κ³  λ¨λ“ 
μƒν™©μ—μ„ UIκ°€ μ¬λ°”λ¥΄κ² λ™μ‘ν•λ”μ§€ ν™•μΈν•  μ μμµλ‹λ‹¤.

:::

## μ”μ•½

νν† λ¦¬μ–Όμ„ μ™„λ£ν–μµλ‹λ‹¤! π‰

`flutter run` λ…λ Ήμ„ μ‚¬μ©ν•μ—¬ μµμΆ… μ•±μ„ μ‹¤ν–‰ν•  μ μμµλ‹λ‹¤.

μ λ‹› ν…μ¤νΈμ™€ μ„μ ― ν…μ¤νΈλ¥Ό ν¬ν•¨ν• μ „μ²΄ μ†μ¤ μ½”λ“λ”
[μ—¬κΈ°](https://github.com/felangel/bloc/tree/master/examples/flutter_weather)μ—μ„
ν™•μΈν•  μ μμµλ‹λ‹¤.
