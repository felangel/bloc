---
title: –ü–æ—Å—ñ–±–Ω–∏–∫ –∑ –º—ñ–≥—Ä–∞—Ü—ñ—ó
description: –ú—ñ–≥—Ä—É–π—Ç–µ –Ω–∞ –æ—Å—Ç–∞–Ω–Ω—é —Å—Ç–∞–±—ñ–ª—å–Ω—É –≤–µ—Ä—Å—ñ—é Bloc.
---

import { Code, Tabs, TabItem } from '@astrojs/starlight/components';

:::tip

–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ
[–∂—É—Ä–Ω–∞–ª—É —Ä–µ–ª—ñ–∑—ñ–≤](https://github.com/felangel/bloc/releases) –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è
–¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —Ç–µ, —â–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è –≤ –∫–æ–∂–Ω–æ–º—É —Ä–µ–ª—ñ–∑—ñ.

:::

## v10.0.0

### `package:bloc_test`

#### ‚ùó‚ú® –í—ñ–¥–æ–∫—Ä–µ–º–ª–µ–Ω–Ω—è `blocTest` –≤—ñ–¥ `BlocBase`

:::note[–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?]

–£ bloc_test v10.0.0 API `blocTest` –±—ñ–ª—å—à–µ –Ω–µ —Ç—ñ—Å–Ω–æ –ø–æ–≤'—è–∑–∞–Ω–∏–π –∑ `BlocBase`.

:::

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

`blocTest` –ø–æ–≤–∏–Ω–µ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ—Å–Ω–æ–≤–Ω—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ bloc, –∫–æ–ª–∏ —Ü–µ –º–æ–∂–ª–∏–≤–æ, –¥–ª—è
–ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –≥–Ω—É—á–∫–æ—Å—Ç—ñ —Ç–∞ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è. –†–∞–Ω—ñ—à–µ —Ü–µ –±—É–ª–æ
–Ω–µ–º–æ–∂–ª–∏–≤–æ, –æ—Å–∫—ñ–ª—å–∫–∏ `BlocBase` —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞–≤ `StateStreamableSource`, —á–æ–≥–æ –±—É–ª–æ
–Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è `blocTest` —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä—ñ—à–Ω—é –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥ API `emit`.

### `package:hydrated_bloc`

#### ‚ùó‚ú® –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ WebAssembly

:::note[–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?]

–£ hydrated_bloc v10.0.0 –±—É–ª–æ –¥–æ–¥–∞–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó —É WebAssembly (wasm).

:::

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–†–∞–Ω—ñ—à–µ –±—É–ª–æ –Ω–µ–º–æ–∂–ª–∏–≤–æ –∫–æ–º–ø—ñ–ª—é–≤–∞—Ç–∏ –¥–æ–¥–∞—Ç–∫–∏ —É wasm –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ
`hydrated_bloc`. –£ v10.0.0 –ø–∞–∫–µ—Ç –±—É–ª–æ –ø–µ—Ä–µ—Ä–æ–±–ª–µ–Ω–æ –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó —É
wasm.

**v9.x.x**

```dart
Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();
  HydratedBloc.storage = await HydratedStorage.build(
    storageDirectory: kIsWeb
        ? HydratedStorage.webStorageDirectory
        : await getTemporaryDirectory(),
  );
  runApp(App());
}
```

**v10.x.x**

```dart
void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  HydratedBloc.storage = await HydratedStorage.build(
    storageDirectory: kIsWeb
        ? HydratedStorageDirectory.web
        : HydratedStorageDirectory((await getTemporaryDirectory()).path),
  );
  runApp(const App());
}
```

## v9.0.0

### `package:bloc`

#### ‚ùóüßπ –í–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏—Ö API

:::note[–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?]

–£ bloc v9.0.0 –≤—Å—ñ —Ä–∞–Ω—ñ—à–µ –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ API –±—É–ª–∏ –≤–∏–¥–∞–ª–µ–Ω—ñ.

:::

##### –ö–æ—Ä–æ—Ç–∫–∏–π –≤–∏–∫–ª–∞–¥

- `BlocOverrides` –≤–∏–¥–∞–ª–µ–Ω–æ –Ω–∞ –∫–æ—Ä–∏—Å—Ç—å `Bloc.observer` —Ç–∞ `Bloc.transformer`

#### ‚ùó‚ú® –í–≤–µ–¥–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É `EmittableStateStreamableSource`

:::note[–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?]

–£ bloc v9.0.0 –±—É–ª–æ –≤–≤–µ–¥–µ–Ω–æ –Ω–æ–≤–∏–π –æ—Å–Ω–æ–≤–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
`EmittableStateStreamableSource`.

:::

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

`package:bloc_test` —Ä–∞–Ω—ñ—à–µ –±—É–≤ —Ç—ñ—Å–Ω–æ –ø–æ–≤'—è–∑–∞–Ω–∏–π –∑ `BlocBase`. –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å
`EmittableStateStreamableSource` –±—É–ª–æ –≤–≤–µ–¥–µ–Ω–æ –¥–ª—è —Ç–æ–≥–æ, —â–æ–± –¥–æ–∑–≤–æ–ª–∏—Ç–∏ `blocTest`
–≤—ñ–¥–æ–∫—Ä–µ–º–∏—Ç–∏—Å—è –≤—ñ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó `BlocBase`.

### `package:hydrated_bloc`

#### ‚ú® –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è API `HydratedBloc.storage`

:::note[–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?]

–£ hydrated_bloc v9.0.0 `HydratedBlocOverrides` –±—É–ª–æ –≤–∏–¥–∞–ª–µ–Ω–æ –Ω–∞ –∫–æ—Ä–∏—Å—Ç—å API
`HydratedBloc.storage`.\*\*

:::

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–ó–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ
[–æ–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω—å Bloc.observer —Ç–∞ Bloc.transformer](/uk/migration#-–ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è-api-blocobserver-—Ç–∞-bloctransformer).

**v8.x.x**

```dart
Future<void> main() async {
  final storage = await HydratedStorage.build(
    storageDirectory: kIsWeb
        ? HydratedStorage.webStorageDirectory
        : await getTemporaryDirectory(),
  );
  HydratedBlocOverrides.runZoned(
    () => runApp(App()),
    storage: storage,
  );
}
```

**v9.0.0**

```dart
Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();
  HydratedBloc.storage = await HydratedStorage.build(
    storageDirectory: kIsWeb
        ? HydratedStorage.webStorageDirectory
        : await getTemporaryDirectory(),
  );
  runApp(App());
}
```

## v8.1.0

### `package:bloc`

#### ‚ú® –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è API `Bloc.observer` —Ç–∞ `Bloc.transformer`

:::note[–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?]

–£ bloc v8.1.0 `BlocOverrides` –±—É–ª–æ –æ–≥–æ–ª–æ—à–µ–Ω–æ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–º –Ω–∞ –∫–æ—Ä–∏—Å—Ç—å API
`Bloc.observer` —Ç–∞ `Bloc.transformer`.

:::

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

API `BlocOverrides` –±—É–ª–æ –≤–≤–µ–¥–µ–Ω–æ —É v8.0.0 —É —Å–ø—Ä–æ–±—ñ –ø—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è –æ–±–ª–∞—Å—Ç—ñ
–¥—ñ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π, —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏—Ö –¥–ª—è bloc, —Ç–∞–∫–∏—Ö —è–∫ `BlocObserver`,
`EventTransformer` —Ç–∞ `HydratedStorage`. –£ —á–∏—Å—Ç–∏—Ö –¥–æ–¥–∞—Ç–∫–∞—Ö Dart –∑–º—ñ–Ω–∏ –ø—Ä–∞—Ü—é–≤–∞–ª–∏
–¥–æ–±—Ä–µ; –æ–¥–Ω–∞–∫ —É –¥–æ–¥–∞—Ç–∫–∞—Ö Flutter –Ω–æ–≤–∏–π API —Å–ø—Ä–∏—á–∏–Ω–∏–≤ –±—ñ–ª—å—à–µ –ø—Ä–æ–±–ª–µ–º, –Ω—ñ–∂ –≤–∏—Ä—ñ—à–∏–≤.

API `BlocOverrides` –±—É–ª–æ –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω–µ –ø–æ–¥—ñ–±–Ω–∏–º–∏ API —É Flutter/Dart:

- [HttpOverrides](https://api.flutter.dev/flutter/dart-io/HttpOverrides-class.html)
- [IOOverrides](https://api.flutter.dev/flutter/dart-io/IOOverrides-class.html)

**–ü—Ä–æ–±–ª–µ–º–∏**

–•–æ—á–∞ —Ü–µ –Ω–µ –±—É–ª–æ –æ—Å–Ω–æ–≤–Ω–æ—é –ø—Ä–∏—á–∏–Ω–æ—é —Ü–∏—Ö –∑–º—ñ–Ω, API `BlocOverrides` –ø—Ä–∏–≤–Ω—ñ—Å –¥–æ–¥–∞—Ç–∫–æ–≤—É
—Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤. –û–∫—Ä—ñ–º –∑–±—ñ–ª—å—à–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –≤–∫–ª–∞–¥–µ–Ω–æ—Å—Ç—ñ —Ç–∞ —Ä—è–¥–∫—ñ–≤ –∫–æ–¥—É,
–Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö –¥–ª—è –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è —Ç–æ–≥–æ –∂ –µ—Ñ–µ–∫—Ç—É, API `BlocOverrides` –≤–∏–º–∞–≥–∞–≤ –≤—ñ–¥
—Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ –≥–ª–∏–±–æ–∫–æ–≥–æ —Ä–æ–∑—É–º—ñ–Ω–Ω—è
[Zones](https://api.dart.dev/stable/2.17.6/dart-async/Zone-class.html) —É Dart.
`Zones` -- —Ü–µ –Ω–µ –∑—Ä—É—á–Ω–∞ –¥–ª—è –ø–æ—á–∞—Ç–∫—ñ–≤—Ü—ñ–≤ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—è, —ñ –Ω–µ—Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫
–ø—Ä–∞—Ü—é—é—Ç—å Zones, –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –ø–æ—è–≤–∏ –ø–æ–º–∏–ª–æ–∫ (—Ç–∞–∫–∏—Ö —è–∫ –Ω–µ—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ
—Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—á—ñ, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–∏, –µ–∫–∑–µ–º–ø–ª—è—Ä–∏ —Å—Ö–æ–≤–∏—â–∞).

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –±–∞–≥–∞—Ç–æ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ –º–∞–ª–∏ –± —â–æ—Å—å –Ω–∞ –∫—à—Ç–∞–ª—Ç:

```dart
void main() {
  WidgetsFlutterBinding.ensureInitialized();
  BlocOverrides.runZoned(...);
}
```

–ù–∞–≤–µ–¥–µ–Ω–∏–π –≤–∏—â–µ –∫–æ–¥, —Ö–æ—á–∞ –π –≤–∏–≥–ª—è–¥–∞—î –Ω–µ—à–∫—ñ–¥–ª–∏–≤–∏–º, –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ
–±–∞–≥–∞—Ç—å–æ—Ö –≤–∞–∂–∫–æ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫. –Ø–∫–∞ –± –∑–æ–Ω–∞ –Ω–µ –≤–∏–∫–ª–∏–∫–∞–ª–∞ –ø–µ—Ä–≤—ñ—Å–Ω–æ
`WidgetsFlutterBinding.ensureInitialized`, –±—É–¥–µ –∑–æ–Ω–æ—é, –≤ —è–∫—ñ–π –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è –ø–æ–¥—ñ—ó
–∂–µ—Å—Ç—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ–ª–±–µ–∫–∏ `onTap`, `onPressed`) —á–µ—Ä–µ–∑
`GestureBinding.initInstances`. –¶–µ –ª–∏—à–µ –æ–¥–Ω–∞ –∑ –±–∞–≥–∞—Ç—å–æ—Ö –ø—Ä–æ–±–ª–µ–º, —Å–ø—Ä–∏—á–∏–Ω–µ–Ω–∏—Ö
–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º `zoneValues`.

–ö—Ä—ñ–º —Ç–æ–≥–æ, Flutter —Ä–æ–±–∏—Ç—å –±–∞–≥–∞—Ç–æ —Ä–µ—á–µ–π –∑–∞ –ª–∞—à—Ç—É–Ω–∫–∞–º–∏, —è–∫—ñ –≤–∫–ª—é—á–∞—é—Ç—å
—Ä–æ–∑–≥–∞–ª—É–∂–µ–Ω–Ω—è/–º–∞–Ω—ñ–ø—É–ª—è—Ü—ñ—é Zones (–æ—Å–æ–±–ª–∏–≤–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É —Ç–µ—Å—Ç—ñ–≤), —â–æ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏
–¥–æ –Ω–µ–æ—á—ñ–∫—É–≤–∞–Ω–æ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ (—ñ —É –±–∞–≥–∞—Ç—å–æ—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –¥–æ –ø–æ–≤–µ–¥—ñ–Ω–∫–∏, —è–∫–∞ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è
–ø–æ–∑–∞ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞ -- –¥–∏–≤. –ø—Ä–æ–±–ª–µ–º–∏ –Ω–∏–∂—á–µ).

–ß–µ—Ä–µ–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
[runZoned](https://api.flutter.dev/flutter/dart-async/runZoned.html), –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞
API `BlocOverrides` –ø—Ä–∏–∑–≤—ñ–≤ –¥–æ –≤–∏—è–≤–ª–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö –ø–æ–º–∏–ª–æ–∫/–æ–±–º–µ–∂–µ–Ω—å —É Flutter
(–∑–æ–∫—Ä–µ–º–∞ —É –≤—ñ–¥–∂–µ—Ç–Ω–∏—Ö —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω–∏—Ö —Ç–µ—Å—Ç–∞—Ö):

- https://github.com/flutter/flutter/issues/96939
- https://github.com/flutter/flutter/issues/94123
- https://github.com/flutter/flutter/issues/93676

—è–∫—ñ –≤–ø–ª–∏–Ω—É–ª–∏ –Ω–∞ –±–∞–≥–∞—Ç—å–æ—Ö —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É bloc:

- https://github.com/felangel/bloc/issues/3394
- https://github.com/felangel/bloc/issues/3350
- https://github.com/felangel/bloc/issues/3319

**v8.0.x**

```dart
void main() {
  BlocOverrides.runZoned(
    () {
      // ...
    },
    blocObserver: CustomBlocObserver(),
    eventTransformer: customEventTransformer(),
  );
}
```

**v8.1.0**

```dart
void main() {
  Bloc.observer = CustomBlocObserver();
  Bloc.transformer = customEventTransformer();

  // ...
}
```

## v8.0.0

### `package:bloc`

#### ‚ùó‚ú® –í–≤–µ–¥–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ API `BlocOverrides`

:::note[–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?]

–£ bloc v8.0.0 `Bloc.observer` —Ç–∞ `Bloc.transformer` –±—É–ª–∏ –≤–∏–¥–∞–ª–µ–Ω—ñ –Ω–∞ –∫–æ—Ä–∏—Å—Ç—å API
`BlocOverrides`.

:::

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π API, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–≤—Å—è –¥–ª—è –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è `BlocObserver` —Ç–∞
`EventTransformer` –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, –ø–æ–∫–ª–∞–¥–∞–≤—Å—è –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω–∏–π —Å—ñ–Ω–≥–ª—Ç–æ–Ω —è–∫ –¥–ª—è
`BlocObserver`, —Ç–∞–∫ —ñ –¥–ª—è `EventTransformer`.

–£ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –±—É–ª–æ –Ω–µ–º–æ–∂–ª–∏–≤–æ:

- –ú–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ–π `BlocObserver` –∞–±–æ `EventTransformer`, –æ–±–º–µ–∂–µ–Ω–∏—Ö —Ä—ñ–∑–Ω–∏–º–∏
  —á–∞—Å—Ç–∏–Ω–∞–º–∏ –¥–æ–¥–∞—Ç–∫—É
- –ú–∞—Ç–∏ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è `BlocObserver` –∞–±–æ `EventTransformer`, –æ–±–º–µ–∂–µ–Ω—ñ –ø–∞–∫–µ—Ç–æ–º
  - –Ø–∫—â–æ –ø–∞–∫–µ—Ç –∑–∞–ª–µ–∂–∞–≤ –≤—ñ–¥ `package:bloc` —ñ —Ä–µ—î—Å—Ç—Ä—É–≤–∞–≤ —Å–≤—ñ–π –≤–ª–∞—Å–Ω–∏–π
    `BlocObserver`, –±—É–¥—å-—è–∫–∏–π —Å–ø–æ–∂–∏–≤–∞—á –ø–∞–∫–µ—Ç—É –ø–æ–≤–∏–Ω–µ–Ω –±—É–≤ –±–∏ –∞–±–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç–∏
    `BlocObserver` –ø–∞–∫–µ—Ç—É, –∞–±–æ –∑–≤—ñ—Ç—É–≤–∞—Ç–∏ –ø–µ—Ä–µ–¥ `BlocObserver` –ø–∞–∫–µ—Ç—É.

–¢–∞–∫–æ–∂ –±—É–ª–æ —Å–∫–ª–∞–¥–Ω—ñ—à–µ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ —Å–ø—ñ–ª—å–Ω–∏–π –≥–ª–æ–±–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω —É —Ç–µ—Å—Ç–∞—Ö.

Bloc v8.0.0 –≤–≤–æ–¥–∏—Ç—å –∫–ª–∞—Å `BlocOverrides`, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º
–ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—Ç–∏ `BlocObserver` —Ç–∞/–∞–±–æ `EventTransformer` –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó `Zone`, –∞
–Ω–µ –ø–æ–∫–ª–∞–¥–∞—Ç–∏—Å—è –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω–∏–π –∑–º—ñ–Ω–Ω–∏–π —Å—ñ–Ω–≥–ª—Ç–æ–Ω.

**v7.x.x**

```dart
void main() {
  Bloc.observer = CustomBlocObserver();
  Bloc.transformer = customEventTransformer();

  // ...
}
```

**v8.0.0**

```dart
void main() {
  BlocOverrides.runZoned(
    () {
      // ...
    },
    blocObserver: CustomBlocObserver(),
    eventTransformer: customEventTransformer(),
  );
}
```

–ï–∫–∑–µ–º–ø–ª—è—Ä–∏ `Bloc` –±—É–¥—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `BlocObserver` —Ç–∞/–∞–±–æ `EventTransformer`
–¥–ª—è –ø–æ—Ç–æ—á–Ω–æ—ó `Zone` —á–µ—Ä–µ–∑ `BlocOverrides.current`. –Ø–∫—â–æ –¥–ª—è –∑–æ–Ω–∏ –Ω–µ–º–∞—î
`BlocOverrides`, –≤–æ–Ω–∏ –±—É–¥—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ñ—Å–Ω—É—é—á—ñ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞
–∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º (–∂–æ–¥–Ω–∏—Ö –∑–º—ñ–Ω —É –ø–æ–≤–µ–¥—ñ–Ω—Ü—ñ/—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ).

–¶–µ –¥–æ–∑–≤–æ–ª—è—î –∫–æ–∂–Ω—ñ–π `Zone` —Ñ—É–Ω–∫—Ü—ñ–æ–Ω—É–≤–∞—Ç–∏ –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –∑—ñ —Å–≤–æ—ó–º–∏ `BlocOverrides`.

```dart
BlocOverrides.runZoned(
  () {
    // BlocObserverA —Ç–∞ eventTransformerA
    final overrides = BlocOverrides.current;

    // Bloc'–∏ –≤ —Ü—ñ–π –∑–æ–Ω—ñ –∑–≤—ñ—Ç—É—é—Ç—å –ø–µ—Ä–µ–¥ BlocObserverA
    // —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å eventTransformerA —è–∫ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º.
    // ...

    // –ü—ñ–∑–Ω—ñ—à–µ...
    BlocOverrides.runZoned(
      () {
        // BlocObserverB —Ç–∞ eventTransformerB
        final overrides = BlocOverrides.current;

        // Bloc'–∏ –≤ —Ü—ñ–π –∑–æ–Ω—ñ –∑–≤—ñ—Ç—É—é—Ç—å –ø–µ—Ä–µ–¥ BlocObserverB
        // —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å eventTransformerB —è–∫ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º.
        // ...
      },
      blocObserver: BlocObserverB(),
      eventTransformer: eventTransformerB(),
    );
  },
  blocObserver: BlocObserverA(),
  eventTransformer: eventTransformerA(),
);
```

#### ‚ùó‚ú® –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –æ–±—Ä–æ–±–∫–∏ —Ç–∞ –∑–≤—ñ—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏

:::note[–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?]

–£ bloc v8.0.0 `BlocUnhandledErrorException` –≤–∏–¥–∞–ª–µ–Ω–æ. –ö—Ä—ñ–º —Ç–æ–≥–æ, –±—É–¥—å-—è–∫—ñ
–Ω–µ–ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω—ñ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è –∑–∞–≤–∂–¥–∏ –ø–æ–≤—ñ–¥–æ–º–ª—è—é—Ç—å—Å—è –≤ `onError` —Ç–∞ –ø—Ä–æ–±—Ä–∞—Å—É—é—Ç—å—Å—è
–ø–æ–≤—Ç–æ—Ä–Ω–æ (–Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ä–µ–∂–∏–º—É –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è —á–∏ —Ä–µ–ª—ñ–∑—É). API `addError` –ø–æ–≤—ñ–¥–æ–º–ª—è—î
–ø—Ä–æ –ø–æ–º–∏–ª–∫–∏ –≤ `onError`, –∞–ª–µ –Ω–µ —Ä–æ–∑–≥–ª—è–¥–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—ñ –ø–æ–º–∏–ª–∫–∏ —è–∫ –Ω–µ–ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω—ñ
–≤–∏–∫–ª—é—á–µ–Ω–Ω—è.

:::

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–ú–µ—Ç–∞ —Ü–∏—Ö –∑–º—ñ–Ω:

- –∑—Ä–æ–±–∏—Ç–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –Ω–µ–æ–±—Ä–æ–±–ª–µ–Ω—ñ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è –Ω–∞–¥–∑–≤–∏—á–∞–π–Ω–æ –æ—á–µ–≤–∏–¥–Ω–∏–º–∏, –∑–±–µ—Ä—ñ–≥–∞—é—á–∏ –ø—Ä–∏
  —Ü—å–æ–º—É —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å bloc
- –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ `addError` –±–µ–∑ –ø–æ—Ä—É—à–µ–Ω–Ω—è –ø–æ—Ç–æ–∫—É –∫–µ—Ä—É–≤–∞–Ω–Ω—è

–†–∞–Ω—ñ—à–µ –æ–±—Ä–æ–±–∫–∞ —Ç–∞ –∑–≤—ñ—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏ –≤—ñ–¥—Ä—ñ–∑–Ω—è–ª–∏—Å—è –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, —á–∏
–ø—Ä–∞—Ü—é–≤–∞–≤ –¥–æ–¥–∞—Ç–æ–∫ —É —Ä–µ–∂–∏–º—ñ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è —á–∏ —Ä–µ–ª—ñ–∑—É. –ö—Ä—ñ–º —Ç–æ–≥–æ, –ø–æ–º–∏–ª–∫–∏, –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—ñ
—á–µ—Ä–µ–∑ `addError`, —Ä–æ–∑–≥–ª—è–¥–∞–ª–∏—Å—è —è–∫ –Ω–µ–ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω—ñ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è —É —Ä–µ–∂–∏–º—ñ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è,
—â–æ –ø—Ä–∏–∑–≤–æ–¥–∏–ª–æ –¥–æ –ø–æ–≥–∞–Ω–æ–≥–æ –¥–æ—Å–≤—ñ–¥—É —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞ –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ API `addError`
(–æ—Å–æ–±–ª–∏–≤–æ –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ñ –º–æ–¥—É–ª—å–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤).

–£ v8.0.0 `addError` –º–æ–∂–Ω–∞ –±–µ–∑–ø–µ—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏,
–∞ `blocTest` –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–æ–≥–æ, —â–æ –ø–æ–º–∏–ª–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª—è—é—Ç—å—Å—è.
–í—Å—ñ –ø–æ–º–∏–ª–∫–∏, —è–∫ —ñ —Ä–∞–Ω—ñ—à–µ, –ø–æ–≤—ñ–¥–æ–º–ª—è—é—Ç—å—Å—è –≤ `onError`, –æ–¥–Ω–∞–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ
–ø—Ä–æ–±—Ä–∞—Å—É—é—Ç—å—Å—è –ª–∏—à–µ –Ω–µ–ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω—ñ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è (–Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ä–µ–∂–∏–º—É –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è —á–∏
—Ä–µ–ª—ñ–∑—É).

#### ‚ùóüßπ –ó—Ä–æ–±–∏—Ç–∏ `BlocObserver` –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–º

:::note[–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?]

–£ bloc v8.0.0 `BlocObserver` –±—É–ª–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–æ –Ω–∞ `abstract` –∫–ª–∞—Å, —â–æ –æ–∑–Ω–∞—á–∞—î, —â–æ
–µ–∫–∑–µ–º–ø–ª—è—Ä `BlocObserver` –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π.

:::

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

`BlocObserver` –ø—Ä–∏–∑–Ω–∞—á–∞–≤—Å—è –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —è–∫ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –û—Å–∫—ñ–ª—å–∫–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è API
–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º -- —Ü–µ no-ops, `BlocObserver` —Ç–µ–ø–µ—Ä —î `abstract` –∫–ª–∞—Å–æ–º, —â–æ–±
—á—ñ—Ç–∫–æ –ø–æ–∫–∞–∑–∞—Ç–∏, —â–æ –∫–ª–∞—Å –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è, –∞ –Ω–µ –¥–ª—è –ø—Ä—è–º–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
–µ–∫–∑–µ–º–ø–ª—è—Ä—É.

**v7.x.x**

```dart
void main() {
  // –ë—É–ª–æ –º–æ–∂–ª–∏–≤–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –µ–∫–∑–µ–º–ø–ª—è—Ä –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—É.
  final observer = BlocObserver();
}
```

**v8.0.0**

```dart
class MyBlocObserver extends BlocObserver {...}

void main() {
  // –ù–µ–º–æ–∂–ª–∏–≤–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –µ–∫–∑–µ–º–ø–ª—è—Ä –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—É.
  final observer = BlocObserver(); // –ü–û–ú–ò–õ–ö–ê

  // –ó–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ —Ä–æ–∑—à–∏—Ä—Ç–µ `BlocObserver`.
  final observer = MyBlocObserver(); // OK
}
```

#### ‚ùó‚ú® `add` –≤–∏–∫–∏–¥–∞—î `StateError`, —è–∫—â–æ Bloc –∑–∞–∫—Ä–∏—Ç–∏–π

:::note[–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?]

–£ bloc v8.0.0 –≤–∏–∫–ª–∏–∫ `add` –Ω–∞ –∑–∞–∫—Ä–∏—Ç–æ–º—É bloc –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ `StateError`.

:::

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–†–∞–Ω—ñ—à–µ –±—É–ª–æ –º–æ–∂–ª–∏–≤–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `add` –Ω–∞ –∑–∞–∫—Ä–∏—Ç–æ–º—É bloc, —ñ –≤–Ω—É—Ç—Ä—ñ—à–Ω—è –ø–æ–º–∏–ª–∫–∞
–ø—Ä–æ–∫–æ–≤—Ç—É–≤–∞–ª–∞—Å—è, —â–æ —É—Å–∫–ª–∞–¥–Ω—é–≤–∞–ª–æ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è —Ç–æ–≥–æ, —á–æ–º—É –¥–æ–¥–∞–Ω–∞ –ø–æ–¥—ñ—è –Ω–µ
–æ–±—Ä–æ–±–ª—è–ª–∞—Å—è. –©–æ–± –∑—Ä–æ–±–∏—Ç–∏ —Ü–µ–π —Å—Ü–µ–Ω–∞—Ä—ñ–π –±—ñ–ª—å—à –≤–∏–¥–∏–º–∏–º, —É v8.0.0 –≤–∏–∫–ª–∏–∫ `add` –Ω–∞
–∑–∞–∫—Ä–∏—Ç–æ–º—É bloc –≤–∏–∫–∏–Ω–µ `StateError`, —è–∫–∏–π –±—É–¥–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–∏–π —è–∫ –Ω–µ–ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–µ
–≤–∏–∫–ª—é—á–µ–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ–¥–∞–Ω–∏–π –≤ `onError`.

#### ‚ùó‚ú® `emit` –≤–∏–∫–∏–¥–∞—î `StateError`, —è–∫—â–æ Bloc –∑–∞–∫—Ä–∏—Ç–∏–π

:::note[–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?]

–£ bloc v8.0.0 –≤–∏–∫–ª–∏–∫ `emit` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∑–∞–∫—Ä–∏—Ç–æ–≥–æ bloc –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ `StateError`.

:::

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–†–∞–Ω—ñ—à–µ –±—É–ª–æ –º–æ–∂–ª–∏–≤–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `emit` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∑–∞–∫—Ä–∏—Ç–æ–≥–æ bloc, —ñ –∂–æ–¥–Ω–æ—ó –∑–º—ñ–Ω–∏
—Å—Ç–∞–Ω—É –Ω–µ –≤—ñ–¥–±—É–≤–∞–ª–æ—Å—è, –∞–ª–µ —Ç–∞–∫–æ–∂ –Ω–µ –±—É–ª–æ –∂–æ–¥–Ω–æ—ó –≤–∫–∞–∑—ñ–≤–∫–∏ –Ω–∞ —Ç–µ, —â–æ –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫,
—â–æ —É—Å–∫–ª–∞–¥–Ω—é–≤–∞–ª–æ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è. –©–æ–± –∑—Ä–æ–±–∏—Ç–∏ —Ü–µ–π —Å—Ü–µ–Ω–∞—Ä—ñ–π –±—ñ–ª—å—à –≤–∏–¥–∏–º–∏–º, —É v8.0.0
–≤–∏–∫–ª–∏–∫ `emit` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∑–∞–∫—Ä–∏—Ç–æ–≥–æ bloc –≤–∏–∫–∏–Ω–µ `StateError`, —è–∫–∏–π –±—É–¥–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–∏–π
—è–∫ –Ω–µ–ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–µ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ–¥–∞–Ω–∏–π –≤ `onError`.

#### ‚ùóüßπ –í–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏—Ö API

:::note[–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?]

–£ bloc v8.0.0 –≤—Å—ñ —Ä–∞–Ω—ñ—à–µ –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ API –±—É–ª–∏ –≤–∏–¥–∞–ª–µ–Ω—ñ.

:::

##### –ö–æ—Ä–æ—Ç–∫–∏–π –≤–∏–∫–ª–∞–¥

- `mapEventToState` –≤–∏–¥–∞–ª–µ–Ω–æ –Ω–∞ –∫–æ—Ä–∏—Å—Ç—å `on<Event>`
- `transformEvents` –≤–∏–¥–∞–ª–µ–Ω–æ –Ω–∞ –∫–æ—Ä–∏—Å—Ç—å API `EventTransformer`
- typedef `TransitionFunction` –≤–∏–¥–∞–ª–µ–Ω–æ –Ω–∞ –∫–æ—Ä–∏—Å—Ç—å API `EventTransformer`
- `listen` –≤–∏–¥–∞–ª–µ–Ω–æ –Ω–∞ –∫–æ—Ä–∏—Å—Ç—å `stream.listen`

### `package:bloc_test`

#### ‚ú® `MockBloc` —Ç–∞ `MockCubit` –±—ñ–ª—å—à–µ –Ω–µ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å `registerFallbackValue`

:::note[–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?]

–£ bloc_test v9.0.0 —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º –±—ñ–ª—å—à–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ —è–≤–Ω–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏
`registerFallbackValue` –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ `MockBloc` –∞–±–æ `MockCubit`.

:::

##### –ö–æ—Ä–æ—Ç–∫–∏–π –≤–∏–∫–ª–∞–¥

`registerFallbackValue` –ø–æ—Ç—Ä—ñ–±–µ–Ω –ª–∏—à–µ –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ –º–∞—Ç—á–µ—Ä–∞ `any()` –∑
`package:mocktail` –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–æ–≥–æ —Ç–∏–ø—É. –†–∞–Ω—ñ—à–µ `registerFallbackValue` –±—É–≤
–Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–π –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ `Event` —Ç–∞ `State` –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ `MockBloc` –∞–±–æ
`MockCubit`.

**v8.x.x**

```dart
class FakeMyEvent extends Fake implements MyEvent {}
class FakeMyState extends Fake implements MyState {}
class MyMockBloc extends MockBloc<MyEvent, MyState> implements MyBloc {}

void main() {
  setUpAll(() {
    registerFallbackValue(FakeMyEvent());
    registerFallbackValue(FakeMyState());
  });

  // –¢–µ—Å—Ç–∏...
}
```

**v9.0.0**

```dart
class MyMockBloc extends MockBloc<MyEvent, MyState> implements MyBloc {}

void main() {
  // –¢–µ—Å—Ç–∏...
}
```

### `package:hydrated_bloc`

#### ‚ùó‚ú® –í–≤–µ–¥–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ API `HydratedBlocOverrides`

:::note[–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?]

–£ hydrated_bloc v8.0.0 `HydratedBloc.storage` –±—É–ª–æ –≤–∏–¥–∞–ª–µ–Ω–æ –Ω–∞ –∫–æ—Ä–∏—Å—Ç—å API
`HydratedBlocOverrides`.

:::

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–†–∞–Ω—ñ—à–µ –¥–ª—è –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó `Storage` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–≤—Å—è –≥–ª–æ–±–∞–ª—å–Ω–∏–π
—Å—ñ–Ω–≥–ª—Ç–æ–Ω.

–£ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –±—É–ª–æ –Ω–µ–º–æ–∂–ª–∏–≤–æ –º–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ–π `Storage`, –æ–±–º–µ–∂–µ–Ω–∏—Ö —Ä—ñ–∑–Ω–∏–º–∏
—á–∞—Å—Ç–∏–Ω–∞–º–∏ –¥–æ–¥–∞—Ç–∫—É. –¢–∞–∫–æ–∂ –±—É–ª–æ —Å–∫–ª–∞–¥–Ω—ñ—à–µ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ —Å–ø—ñ–ª—å–Ω–∏–π –≥–ª–æ–±–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω —É
—Ç–µ—Å—Ç–∞—Ö.

`HydratedBloc` v8.0.0 –≤–≤–æ–¥–∏—Ç—å –∫–ª–∞—Å `HydratedBlocOverrides`, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î
—Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—Ç–∏ `Storage` –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó `Zone`, –∞ –Ω–µ –ø–æ–∫–ª–∞–¥–∞—Ç–∏—Å—è –Ω–∞
–≥–ª–æ–±–∞–ª—å–Ω–∏–π –∑–º—ñ–Ω–Ω–∏–π —Å—ñ–Ω–≥–ª—Ç–æ–Ω.

**v7.x.x**

```dart
void main() async {
  HydratedBloc.storage = await HydratedStorage.build(
    storageDirectory: await getApplicationSupportDirectory(),
  );

  // ...
}
```

**v8.0.0**

```dart
void main() {
  final storage = await HydratedStorage.build(
    storageDirectory: await getApplicationSupportDirectory(),
  );

  HydratedBlocOverrides.runZoned(
    () {
      // ...
    },
    storage: storage,
  );
}
```

–ï–∫–∑–µ–º–ø–ª—è—Ä–∏ `HydratedBloc` –±—É–¥—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `Storage` –¥–ª—è –ø–æ—Ç–æ—á–Ω–æ—ó `Zone`
—á–µ—Ä–µ–∑ `HydratedBlocOverrides.current`.

–¶–µ –¥–æ–∑–≤–æ–ª—è—î –∫–æ–∂–Ω—ñ–π `Zone` —Ñ—É–Ω–∫—Ü—ñ–æ–Ω—É–≤–∞—Ç–∏ –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –∑—ñ —Å–≤–æ—ó–º–∏ `BlocOverrides`.

## v7.2.0

### `package:bloc`

#### ‚ú® –í–≤–µ–¥–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ API `on<Event>`

:::note[–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?]

–£ bloc v7.2.0 `mapEventToState` –±—É–ª–æ –æ–≥–æ–ª–æ—à–µ–Ω–æ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–º –Ω–∞ –∫–æ—Ä–∏—Å—Ç—å `on<Event>`.
`mapEventToState` –±—É–¥–µ –≤–∏–¥–∞–ª–µ–Ω–æ —É bloc v8.0.0.

:::

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

API `on<Event>` –±—É–ª–æ –≤–≤–µ–¥–µ–Ω–æ –≤ —Ä–∞–º–∫–∞—Ö
[[–ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—è] –ó–∞–º—ñ–Ω–∏—Ç–∏ mapEventToState –Ω–∞ on\<Event\> —É Bloc](https://github.com/felangel/bloc/issues/2526).
–ß–µ—Ä–µ–∑ [–ø—Ä–æ–±–ª–µ–º—É –≤ Dart](https://github.com/dart-lang/sdk/issues/44616) –Ω–µ –∑–∞–≤–∂–¥–∏
–æ—á–µ–≤–∏–¥–Ω–æ, —è–∫–∏–º –±—É–¥–µ –∑–Ω–∞—á–µ–Ω–Ω—è `state` –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ –≤–∫–ª–∞–¥–µ–Ω–∏–º–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–º–∏
–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ (`async*`). –ù–µ–∑–≤–∞–∂–∞—é—á–∏ –Ω–∞ —Ç–µ, —â–æ —ñ—Å–Ω—É—é—Ç—å —Å–ø–æ—Å–æ–±–∏ –æ–±—ñ–π—Ç–∏ —Ü—é –ø—Ä–æ–±–ª–µ–º—É,
–æ–¥–Ω–∏–º –∑ –æ—Å–Ω–æ–≤–Ω–∏—Ö –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ bloc —î –ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω—ñ—Å—Ç—å. API `on<Event>`
–±—É–ª–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ, —â–æ–± –∑—Ä–æ–±–∏—Ç–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–µ–∑–ø–µ—á–Ω–æ—é –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–∞
—É—Å—É–Ω—É—Ç–∏ –±—É–¥—å-—è–∫—É –Ω–µ–≤–∏–∑–Ω–∞—á–µ–Ω—ñ—Å—Ç—å —â–æ–¥–æ –∑–º—ñ–Ω —Å—Ç–∞–Ω—É.

:::tip

–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó
[–ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ –ø–æ–≤–Ω—É –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—é](https://github.com/felangel/bloc/issues/2526).

:::

**–ö–æ—Ä–æ—Ç–∫–∏–π –≤–∏–∫–ª–∞–¥**

`on<E>` –¥–æ–∑–≤–æ–ª—è—î –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ–π –¥–ª—è –≤—Å—ñ—Ö –ø–æ–¥—ñ–π —Ç–∏–ø—É `E`. –ó–∞
–∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ø–æ–¥—ñ—ó –±—É–¥—É—Ç—å –æ–±—Ä–æ–±–ª—è—Ç–∏—Å—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ `on<E>`, –Ω–∞
–≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ `mapEventToState`, —è–∫–∏–π –æ–±—Ä–æ–±–ª—è—î –ø–æ–¥—ñ—ó `–ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ`.

**v7.1.0**

```dart
abstract class CounterEvent {}
class Increment extends CounterEvent {}

class CounterBloc extends Bloc<CounterEvent, int> {
  CounterBloc() : super(0);

  @override
  Stream<int> mapEventToState(CounterEvent event) async* {
    if (event is Increment) {
      yield state + 1;
    }
  }
}
```

**v7.2.0**

```dart
abstract class CounterEvent {}
class Increment extends CounterEvent {}

class CounterBloc extends Bloc<CounterEvent, int> {
  CounterBloc() : super(0) {
    on<Increment>((event, emit) => emit(state + 1));
  }
}
```

:::note

–ö–æ–∂–Ω–∞ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è `EventHandler` –ø—Ä–∞—Ü—é—î –Ω–µ–∑–∞–ª–µ–∂–Ω–æ, —Ç–æ–º—É –≤–∞–∂–ª–∏–≤–æ
—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ç–∏–ø—É —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–∞, —è–∫–∏–π –≤–∏ —Ö–æ—á–µ—Ç–µ
–∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏.

:::

–Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –∑–±–µ—Ä–µ–≥—Ç–∏ —Ç–æ—á–Ω–æ —Ç–∞–∫—É –∂ –ø–æ–≤–µ–¥—ñ–Ω–∫—É, —è–∫ —É v7.1.0, –≤–∏ –º–æ–∂–µ—Ç–µ
–∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ –æ–¥–∏–Ω –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ–π –¥–ª—è –≤—Å—ñ—Ö –ø–æ–¥—ñ–π —Ç–∞ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä
`sequential`:

```dart
import 'package:bloc/bloc.dart';
import 'package:bloc_concurrency/bloc_concurrency.dart';

class MyBloc extends Bloc<MyEvent, MyState> {
  MyBloc() : super(MyState()) {
    on<MyEvent>(_onEvent, transformer: sequential())
  }

  FutureOr<void> _onEvent(MyEvent event, Emitter<MyState> emit) async {
    // TODO: –ª–æ–≥—ñ–∫–∞ —Ç—É—Ç...
  }
}
```

–í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∏—Ç–∏ `EventTransformer` –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –¥–ª—è –≤—Å—ñ—Ö
bloc'—ñ–≤ —É –≤–∞—à–æ–º—É –¥–æ–¥–∞—Ç–∫—É:

```dart
import 'package:bloc/bloc.dart';
import 'package:bloc_concurrency/bloc_concurrency.dart';

void main() {
  Bloc.transformer = sequential<dynamic>();
  ...
}
```

#### ‚ú® –í–≤–µ–¥–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ API `EventTransformer`

:::note[–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?]

–£ bloc v7.2.0 `transformEvents` –±—É–ª–æ –æ–≥–æ–ª–æ—à–µ–Ω–æ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–º –Ω–∞ –∫–æ—Ä–∏—Å—Ç—å API
`EventTransformer`. `transformEvents` –±—É–¥–µ –≤–∏–¥–∞–ª–µ–Ω–æ —É bloc v8.0.0.

:::

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

API `on<Event>` –≤—ñ–¥–∫—Ä–∏–≤ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –Ω–∞–¥–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–æ–≥–æ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–∞ –ø–æ–¥—ñ–π –¥–ª—è
–∫–æ–∂–Ω–æ–≥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞ –ø–æ–¥—ñ–π. –ë—É–ª–æ –≤–≤–µ–¥–µ–Ω–æ –Ω–æ–≤–∏–π typedef `EventTransformer`, —è–∫–∏–π
–¥–æ–∑–≤–æ–ª—è—î —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ –≤—Ö—ñ–¥–Ω–∏–π –ø–æ—Ç—ñ–∫ –ø–æ–¥—ñ–π –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞
–ø–æ–¥—ñ–π, –∞ –Ω–µ –≤–∫–∞–∑—É–≤–∞—Ç–∏ –æ–¥–∏–Ω —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä –ø–æ–¥—ñ–π –¥–ª—è –≤—Å—ñ—Ö –ø–æ–¥—ñ–π.

**–ö–æ—Ä–æ—Ç–∫–∏–π –≤–∏–∫–ª–∞–¥**

`EventTransformer` –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –ø—Ä–∏–π–Ω—è—Ç—Ç—è –≤—Ö—ñ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É –ø–æ–¥—ñ–π —Ä–∞–∑–æ–º –∑
`EventMapper` (–≤–∞—à –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó) —Ç–∞ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫—É –ø–æ–¥—ñ–π.

```dart
typedef EventTransformer<Event> = Stream<Event> Function(Stream<Event> events, EventMapper<Event> mapper)
```

`EventTransformer` –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –æ–±—Ä–æ–±–ª—è—î –≤—Å—ñ –ø–æ–¥—ñ—ó –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ —ñ –≤–∏–≥–ª—è–¥–∞—î
–ø—Ä–∏–±–ª–∏–∑–Ω–æ —Ç–∞–∫:

```dart
EventTransformer<E> concurrent<E>() {
  return (events, mapper) => events.flatMap(mapper);
}
```

:::tip

–û–∑–Ω–∞–π–æ–º—Ç–µ—Å—è –∑
[package:bloc_concurrency](https://pub.dev/packages/bloc_concurrency) –¥–ª—è
–æ—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–∞–±–æ—Ä—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏—Ö —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ñ–≤ –ø–æ–¥—ñ–π

:::

**v7.1.0**

```dart
@override
Stream<Transition<MyEvent, MyState>> transformEvents(events, transitionFn) {
  return events
    .debounceTime(const Duration(milliseconds: 300))
    .flatMap(transitionFn);
}
```

**v7.2.0**

```dart
/// –í–∏–∑–Ω–∞—á—Ç–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏–π `EventTransformer`
EventTransformer<MyEvent> debounce<MyEvent>(Duration duration) {
  return (events, mapper) => events.debounceTime(duration).flatMap(mapper);
}

MyBloc() : super(MyState()) {
  /// –ó–∞—Å—Ç–æ—Å—É–π—Ç–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏–π `EventTransformer` –¥–æ `EventHandler`
  on<MyEvent>(_onEvent, transformer: debounce(const Duration(milliseconds: 300)))
}
```

#### ‚ö†Ô∏è –ó–∞—Å—Ç–∞—Ä—ñ–Ω–Ω—è API `transformTransitions`

:::note[–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è?]

–£ bloc v7.2.0 `transformTransitions` –±—É–ª–æ –æ–≥–æ–ª–æ—à–µ–Ω–æ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–º –Ω–∞ –∫–æ—Ä–∏—Å—Ç—å
–ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è API `stream`. `transformTransitions` –±—É–¥–µ –≤–∏–¥–∞–ª–µ–Ω–æ —É bloc v8.0.0.

:::

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–ì–µ—Ç—Ç–µ—Ä `stream` —É `Bloc` —Å–ø—Ä–æ—â—É—î –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É —Å—Ç–∞–Ω—ñ–≤, —Ç–æ–º—É
–±—ñ–ª—å—à–µ –Ω–µ–º–∞—î –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –æ–∫—Ä–µ–º–∏–π API `transformTransitions`.

**–ö–æ—Ä–æ—Ç–∫–∏–π –≤–∏–∫–ª–∞–¥**

**v7.1.0**

```dart
@override
Stream<Transition<Event, State>> transformTransitions(
  Stream<Transition<Event, State>> transitions,
) {
  return transitions.debounceTime(const Duration(milliseconds: 42));
}
```

**v7.2.0**

```dart
@override
Stream<State> get stream => super.stream.debounceTime(const Duration(milliseconds: 42));
```

## v7.0.0

### `package:bloc`

#### ‚ùó Bloc —Ç–∞ Cubit —Ä–æ–∑—à–∏—Ä—é—é—Ç—å BlocBase

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–Ø–∫ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫, –≤—ñ–¥–Ω–æ—Å–∏–Ω–∏ –º—ñ–∂ bloc'–∞–º–∏ —Ç–∞ cubit'–∞–º–∏ –±—É–ª–∏ –¥–µ—â–æ –Ω–µ–∑—Ä—É—á–Ω–∏–º–∏. –ö–æ–ª–∏ cubit
–±—É–ª–æ –≤–ø–µ—Ä—à–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ, –≤—ñ–Ω –ø–æ—á–∏–Ω–∞–≤—Å—è —è–∫ –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å –¥–ª—è bloc'—ñ–≤, —â–æ –º–∞–ª–æ —Å–µ–Ω—Å,
—Ç–æ–º—É —â–æ –≤—ñ–Ω –º–∞–≤ –ø—ñ–¥–º–Ω–æ–∂–∏–Ω—É —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ, –∞ bloc'–∏ –ø—Ä–æ—Å—Ç–æ —Ä–æ–∑—à–∏—Ä—é–≤–∞–ª–∏ Cubit —Ç–∞
–≤–∏–∑–Ω–∞—á–∞–ª–∏ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ API. –¶–µ –ø—Ä–∏–∑–≤–µ–ª–æ –¥–æ –∫—ñ–ª—å–∫–æ—Ö –Ω–µ–¥–æ–ª—ñ–∫—ñ–≤:

- –£—Å—ñ API –ø–æ–≤–∏–Ω–Ω—ñ –±—É–ª–∏ –± –∞–±–æ –±—É—Ç–∏ –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω—ñ, —â–æ–± –ø—Ä–∏–π–º–∞—Ç–∏ cubit –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç—ñ,
  –∞–±–æ –≤–æ–Ω–∏ –ø–æ–≤–∏–Ω–Ω—ñ –±—É–ª–∏ –± –±—É—Ç–∏ –∑–∞–ª–∏—à–µ–Ω—ñ —è–∫ bloc –¥–ª—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ, –Ω–∞–≤—ñ—Ç—å
  –Ω–µ–∑–≤–∞–∂–∞—é—á–∏ –Ω–∞ —Ç–µ, —â–æ —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–æ —Ü–µ –Ω–µ—Ç–æ—á–Ω–æ
  ([#1708](https://github.com/felangel/bloc/issues/1708),
  [#1560](https://github.com/felangel/bloc/issues/1560)).

- Cubit –ø–æ–≤–∏–Ω–µ–Ω –±—É–≤ —Ä–æ–∑—à–∏—Ä—é–≤–∞—Ç–∏ Stream —Ç–∞ —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ EventSink, —â–æ–± –º–∞—Ç–∏
  —Å–ø—ñ–ª—å–Ω—É –±–∞–∑—É, –Ω–∞ –æ—Å–Ω–æ–≤—ñ —è–∫–æ—ó –º–æ–∂–Ω–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤—ñ–¥–∂–µ—Ç–∏, —Ç–∞–∫—ñ —è–∫ BlocBuilder,
  BlocListener —Ç–æ—â–æ ([#1429](https://github.com/felangel/bloc/issues/1429)).

–ü—ñ–∑–Ω—ñ—à–µ –º–∏ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—É–≤–∞–ª–∏ –∑ —ñ–Ω–≤–µ—Ä—Å—ñ—î—é –≤—ñ–¥–Ω–æ—Å–∏–Ω —Ç–∞ –∑—Ä–æ–±–∏–ª–∏ bloc –±–∞–∑–æ–≤–∏–º –∫–ª–∞—Å–æ–º,
—â–æ —á–∞—Å—Ç–∫–æ–≤–æ –≤–∏—Ä—ñ—à–∏–ª–æ –ø–µ—Ä—à–∏–π –ø—É–Ω–∫—Ç –≤–∏—â–µ, –∞–ª–µ –ø—Ä–∏–∑–≤–µ–ª–æ –¥–æ —ñ–Ω—à–∏—Ö –ø—Ä–æ–±–ª–µ–º:

- API cubit —Ä–æ–∑–¥—É—Ç–∏–π —á–µ—Ä–µ–∑ –±–∞–∑–æ–≤—ñ API bloc, —Ç–∞–∫—ñ —è–∫ mapEventToState, add —Ç–æ—â–æ
  ([#2228](https://github.com/felangel/bloc/issues/2228))
  - –†–æ–∑—Ä–æ–±–Ω–∏–∫–∏ —Ç–µ—Ö–Ω—ñ—á–Ω–æ –º–æ–∂—É—Ç—å –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —Ü—ñ API —Ç–∞ –ª–∞–º–∞—Ç–∏ —Ä–µ—á—ñ
- –ú–∏ –≤—Å–µ —â–µ –º–∞—î–º–æ —Ç—É –∂ –ø—Ä–æ–±–ª–µ–º—É –∑ cubit, —â–æ —Ä–æ–∑–∫—Ä–∏–≤–∞—î –≤–µ—Å—å API stream, —è–∫ —ñ
  —Ä–∞–Ω—ñ—à–µ ([#1429](https://github.com/felangel/bloc/issues/1429))

–©–æ–± –≤–∏—Ä—ñ—à–∏—Ç–∏ —Ü—ñ –ø—Ä–æ–±–ª–µ–º–∏, –º–∏ –≤–≤–µ–ª–∏ –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å —è–∫ –¥–ª—è `Bloc`, —Ç–∞–∫ —ñ –¥–ª—è `Cubit`
–ø—ñ–¥ –Ω–∞–∑–≤–æ—é `BlocBase`, —â–æ–± –≤–∏—â–µ—Å—Ç–æ—è—â—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —è–∫ —ñ —Ä–∞–Ω—ñ—à–µ –º–æ–≥–ª–∏ –≤–∑–∞—î–º–æ–¥—ñ—è—Ç–∏ —è–∫
–∑ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ bloc, —Ç–∞–∫ —ñ –∑ cubit, –∞–ª–µ –±–µ–∑ —Ä–æ–∑–∫—Ä–∏—Ç—Ç—è –≤—Å—å–æ–≥–æ API `Stream` —Ç–∞
`EventSink` –Ω–∞–ø—Ä—è–º—É.

**–ö–æ—Ä–æ—Ç–∫–∏–π –≤–∏–∫–ª–∞–¥**

**BlocObserver**

**v6.1.x**

```dart
class SimpleBlocObserver extends BlocObserver {
  @override
  void onCreate(Cubit cubit) {...}

  @override
  void onEvent(Bloc bloc, Object event) {...}

  @override
  void onChange(Cubit cubit, Object event) {...}

  @override
  void onTransition(Bloc bloc, Transition transition) {...}

  @override
  void onError(Cubit cubit, Object error, StackTrace stackTrace) {...}

  @override
  void onClose(Cubit cubit) {...}
}
```

**v7.0.0**

```dart
class SimpleBlocObserver extends BlocObserver {
  @override
  void onCreate(BlocBase bloc) {...}

  @override
  void onEvent(Bloc bloc, Object event) {...}

  @override
  void onChange(BlocBase bloc, Object? event) {...}

  @override
  void onTransition(Bloc bloc, Transition transition) {...}

  @override
  void onError(BlocBase bloc, Object error, StackTrace stackTrace) {...}

  @override
  void onClose(BlocBase bloc) {...}
}
```

**Bloc/Cubit**

**v6.1.x**

```dart
final bloc = MyBloc();
bloc.listen((state) {...});

final cubit = MyCubit();
cubit.listen((state) {...});
```

**v7.0.0**

```dart
final bloc = MyBloc();
bloc.stream.listen((state) {...});

final cubit = MyCubit();
cubit.stream.listen((state) {...});
```

### `package:bloc_test`

#### ‚ùóseed –ø–æ–≤–µ—Ä—Ç–∞—î —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –¥–∏–Ω–∞–º—ñ—á–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–©–æ–± –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–Ω–µ –ø–æ—á–∞—Ç–∫–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è, —è–∫–µ –º–æ–∂–Ω–∞ –¥–∏–Ω–∞–º—ñ—á–Ω–æ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –≤
`setUp`, `seed` –ø–æ–≤–µ—Ä—Ç–∞—î —Ñ—É–Ω–∫—Ü—ñ—é.

**–ö–æ—Ä–æ—Ç–∫–∏–π –≤–∏–∫–ª–∞–¥**

**v7.x.x**

```dart
blocTest(
  '...',
  seed: MyState(),
  ...
);
```

**v8.0.0**

```dart
blocTest(
  '...',
  seed: () => MyState(),
  ...
);
```

#### ‚ùóexpect –ø–æ–≤–µ—Ä—Ç–∞—î —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –¥–∏–Ω–∞–º—ñ—á–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å —Ç–∞ –≤–∫–ª—é—á–∞—î –ø—ñ–¥—Ç—Ä–∏–º–∫—É –º–∞—Ç—á–µ—Ä—ñ–≤

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–©–æ–± –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–Ω–µ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è, —è–∫–µ –º–æ–∂–Ω–∞ –¥–∏–Ω–∞–º—ñ—á–Ω–æ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –≤ `setUp`,
`expect` –ø–æ–≤–µ—Ä—Ç–∞—î —Ñ—É–Ω–∫—Ü—ñ—é. `expect` —Ç–∞–∫–æ–∂ –ø—ñ–¥—Ç—Ä–∏–º—É—î `Matchers`.

**–ö–æ—Ä–æ—Ç–∫–∏–π –≤–∏–∫–ª–∞–¥**

**v7.x.x**

```dart
blocTest(
  '...',
  expect: [MyStateA(), MyStateB()],
  ...
);
```

**v8.0.0**

```dart
blocTest(
  '...',
  expect: () => [MyStateA(), MyStateB()],
  ...
);

// –¶–µ —Ç–∞–∫–æ–∂ –º–æ–∂–µ –±—É—Ç–∏ `Matcher`
blocTest(
  '...',
  expect: () => contains(MyStateA()),
  ...
);
```

#### ‚ùóerrors –ø–æ–≤–µ—Ä—Ç–∞—î —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –¥–∏–Ω–∞–º—ñ—á–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å —Ç–∞ –≤–∫–ª—é—á–∞—î –ø—ñ–¥—Ç—Ä–∏–º–∫—É –º–∞—Ç—á–µ—Ä—ñ–≤

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–©–æ–± –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–Ω—ñ –ø–æ–º–∏–ª–∫–∏, —è–∫—ñ –º–æ–∂–Ω–∞ –¥–∏–Ω–∞–º—ñ—á–Ω–æ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –≤ `setUp`,
`errors` –ø–æ–≤–µ—Ä—Ç–∞—î —Ñ—É–Ω–∫—Ü—ñ—é. `errors` —Ç–∞–∫–æ–∂ –ø—ñ–¥—Ç—Ä–∏–º—É—î `Matchers`.

**–ö–æ—Ä–æ—Ç–∫–∏–π –≤–∏–∫–ª–∞–¥**

**v7.x.x**

```dart
blocTest(
  '...',
  errors: [MyError()],
  ...
);
```

**v8.0.0**

```dart
blocTest(
  '...',
  errors: () => [MyError()],
  ...
);

// –¶–µ —Ç–∞–∫–æ–∂ –º–æ–∂–µ –±—É—Ç–∏ `Matcher`
blocTest(
  '...',
  errors: () => contains(MyError()),
  ...
);
```

#### ‚ùóMockBloc —Ç–∞ MockCubit

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–î–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –∑–∞–≥–ª—É—à–æ–∫ —Ä—ñ–∑–Ω–∏—Ö –æ—Å–Ω–æ–≤–Ω–∏—Ö API `MockBloc` —Ç–∞ `MockCubit`
–µ–∫—Å–ø–æ—Ä—Ç—É—é—Ç—å—Å—è —è–∫ —á–∞—Å—Ç–∏–Ω–∞ –ø–∞–∫–µ—Ç—É `bloc_test`. –†–∞–Ω—ñ—à–µ `MockBloc` –¥–æ–≤–æ–¥–∏–ª–æ—Å—è
–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —è–∫ –¥–ª—è –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ–≤ `Bloc`, —Ç–∞–∫ —ñ –¥–ª—è `Cubit`, —â–æ –±—É–ª–æ
–Ω–µ—ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω–æ.

**–ö–æ—Ä–æ—Ç–∫–∏–π –≤–∏–∫–ª–∞–¥**

**v7.x.x**

```dart
class MockMyBloc extends MockBloc<MyState> implements MyBloc {}
class MockMyCubit extends MockBloc<MyState> implements MyBloc {}
```

**v8.0.0**

```dart
class MockMyBloc extends MockBloc<MyEvent, MyState> implements MyBloc {}
class MockMyCubit extends MockCubit<MyState> implements MyCubit {}
```

#### ‚ùó–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Mocktail

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–ß–µ—Ä–µ–∑ —Ä—ñ–∑–Ω—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è null-safe
[package:mockito](https://pub.dev/packages/mockito), –æ–ø–∏—Å–∞–Ω—ñ
[—Ç—É—Ç](https://github.com/dart-lang/mockito/blob/master/NULL_SAFETY_README.md#problems-with-typical-mocking-and-stubbing),
[package:mocktail](https://pub.dev/packages/mocktail) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `MockBloc`
—Ç–∞ `MockCubit`. –¶–µ –¥–æ–∑–≤–æ–ª—è—î —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º –ø—Ä–æ–¥–æ–≤–∂—É–≤–∞—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑–Ω–∞–π–æ–º–∏–π API
–¥–ª—è –º–æ–∫—ñ–≤ –±–µ–∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ –≤—Ä—É—á–Ω—É –ø–∏—Å–∞—Ç–∏ –∑–∞–≥–ª—É—à–∫–∏ –∞–±–æ –ø–æ–∫–ª–∞–¥–∞—Ç–∏—Å—è –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é
–∫–æ–¥—É.

**–ö–æ—Ä–æ—Ç–∫–∏–π –≤–∏–∫–ª–∞–¥**

**v7.x.x**

```dart
import 'package:mockito/mockito.dart';

...

when(bloc.state).thenReturn(MyState());
verify(bloc.add(any)).called(1);
```

**v8.0.0**

```dart
import 'package:mocktail/mocktail.dart';

...

when(() => bloc.state).thenReturn(MyState());
verify(() => bloc.add(any())).called(1);
```

> –ë—É–¥—å –ª–∞—Å–∫–∞, –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ [#347](https://github.com/dart-lang/mockito/issues/347), –∞ —Ç–∞–∫–æ–∂ –¥–æ
> [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó mocktail](https://github.com/felangel/mocktail/tree/main/packages/mocktail)
> –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó.

### `package:flutter_bloc`

#### ‚ùó –ø–µ—Ä–µ–π–º–µ–Ω—É–≤–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `cubit` –Ω–∞ `bloc`

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–£ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É –≤ `package:bloc` –¥–ª—è –≤–≤–µ–¥–µ–Ω–Ω—è `BlocBase`, —è–∫–∏–π
—Ä–æ–∑—à–∏—Ä—é—é—Ç—å `Bloc` —Ç–∞ `Cubit`, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ `BlocBuilder`, `BlocConsumer` —Ç–∞
`BlocListener` –±—É–ª–∏ –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω—ñ –∑ `cubit` –Ω–∞ `bloc`, —Ç–æ–º—É —â–æ –≤—ñ–¥–∂–µ—Ç–∏ –ø—Ä–∞—Ü—é—é—Ç—å –∑
—Ç–∏–ø–æ–º `BlocBase`. –¶–µ —Ç–∞–∫–æ–∂ –¥–æ–¥–∞—Ç–∫–æ–≤–æ —É–∑–≥–æ–¥–∂—É—î—Ç—å—Å—è –∑ –Ω–∞–∑–≤–æ—é –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ —Ç–∞,
—Å–ø–æ–¥—ñ–≤–∞—î–º–æ—Å—è, –ø–æ–∫—Ä–∞—â—É—î —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å.

**–ö–æ—Ä–æ—Ç–∫–∏–π –≤–∏–∫–ª–∞–¥**

**v6.1.x**

```dart
BlocBuilder(
  cubit: myBloc,
  ...
)

BlocListener(
  cubit: myBloc,
  ...
)

BlocConsumer(
  cubit: myBloc,
  ...
)
```

**v7.0.0**

```dart
BlocBuilder(
  bloc: myBloc,
  ...
)

BlocListener(
  bloc: myBloc,
  ...
)

BlocConsumer(
  bloc: myBloc,
  ...
)
```

### `package:hydrated_bloc`

#### ‚ùóstorageDirectory —î –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–º –ø—Ä–∏ –≤–∏–∫–ª–∏–∫—É HydratedStorage.build

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–©–æ–± –∑—Ä–æ–±–∏—Ç–∏ `package:hydrated_bloc` —á–∏—Å—Ç–∏–º –ø–∞–∫–µ—Ç–æ–º Dart, –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥
[package:path_provider](https://pub.dev/packages/path_provider) –±—É–ª–∞ –≤–∏–¥–∞–ª–µ–Ω–∞, —ñ
–ø–∞—Ä–∞–º–µ—Ç—Ä `storageDirectory` –ø—Ä–∏ –≤–∏–∫–ª–∏–∫—É `HydratedStorage.build` —î –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–º —ñ
–±—ñ–ª—å—à–µ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `getTemporaryDirectory` –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º.

**–ö–æ—Ä–æ—Ç–∫–∏–π –≤–∏–∫–ª–∞–¥**

**v6.x.x**

```dart
HydratedBloc.storage = await HydratedStorage.build();
```

**v7.0.0**

```dart
import 'package:path_provider/path_provider.dart';

...

HydratedBloc.storage = await HydratedStorage.build(
  storageDirectory: await getTemporaryDirectory(),
);
```

## v6.1.0

### `package:flutter_bloc`

#### ‚ùócontext.bloc —Ç–∞ context.repository –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏ –Ω–∞ –∫–æ—Ä–∏—Å—Ç—å context.read —Ç–∞ context.watch

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

`context.read`, `context.watch` —Ç–∞ `context.select` –±—É–ª–∏ –¥–æ–¥–∞–Ω—ñ –¥–ª—è —É–∑–≥–æ–¥–∂–µ–Ω–Ω—è –∑
—ñ—Å–Ω—É—é—á–∏–º API [provider](https://pub.dev/packages/provider), –∑ —è–∫–∏–º –∑–Ω–∞–π–æ–º—ñ
–±–∞–≥–∞—Ç–æ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤, —Ç–∞ –¥–ª—è –≤–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º, –ø—ñ–¥–Ω—è—Ç–∏—Ö —Å–ø—ñ–ª—å–Ω–æ—Ç–æ—é. –©–æ–± –ø—ñ–¥–≤–∏—â–∏—Ç–∏
–±–µ–∑–ø–µ–∫—É –∫–æ–¥—É —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —É–∑–≥–æ–¥–∂–µ–Ω—ñ—Å—Ç—å, `context.bloc` –±—É–ª–æ –æ–≥–æ–ª–æ—à–µ–Ω–æ
–∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–º, —Ç–æ–º—É —â–æ –π–æ–≥–æ –º–æ–∂–Ω–∞ –∑–∞–º—ñ–Ω–∏—Ç–∏ –∞–±–æ `context.read`, –∞–±–æ `context.watch`
–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, —á–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤—ñ–Ω –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `build`.

**context.watch**

`context.watch` –≤–∏—Ä—ñ—à—É—î –∑–∞–ø–∏—Ç –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å
[MultiBlocBuilder](https://github.com/felangel/bloc/issues/538), —Ç–æ–º—É —â–æ –º–∏
–º–æ–∂–µ–º–æ —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—Ç–∏ –∑–∞ –∫—ñ–ª—å–∫–æ–º–∞ bloc'–∞–º–∏ –≤ –æ–¥–Ω–æ–º—É `Builder`, —â–æ–± –≤—ñ–¥—Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏ UI
–Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫—ñ–ª—å–∫–æ—Ö —Å—Ç–∞–Ω—ñ–≤:

```dart
Builder(
  builder: (context) {
    final stateA = context.watch<BlocA>().state;
    final stateB = context.watch<BlocB>().state;
    final stateC = context.watch<BlocC>().state;

    // –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ Widget, —è–∫–∏–π –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Å—Ç–∞–Ω—É BlocA, BlocB —Ç–∞ BlocC
  }
);
```

**context.select**

`context.select` –¥–æ–∑–≤–æ–ª—è—î —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º —Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏/–æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ UI –Ω–∞ –æ—Å–Ω–æ–≤—ñ —á–∞—Å—Ç–∏–Ω–∏
—Å—Ç–∞–Ω—É bloc —Ç–∞ –≤–∏—Ä—ñ—à—É—î –∑–∞–ø–∏—Ç –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å
[–ø—Ä–æ—Å—Ç—ñ—à–æ–≥–æ buildWhen](https://github.com/felangel/bloc/issues/1521).

```dart
final name = context.select((UserBloc bloc) => bloc.state.user.name);
```

–ù–∞–≤–µ–¥–µ–Ω–∏–π –≤–∏—â–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç –¥–æ–∑–≤–æ–ª—è—î –Ω–∞–º –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø —Ç–∞ –ø–µ—Ä–µ–±—É–¥—É–≤–∞—Ç–∏ –≤—ñ–¥–∂–µ—Ç –ª–∏—à–µ
—Ç–æ–¥—ñ, –∫–æ–ª–∏ —ñ–º'—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–º—ñ–Ω—é—î—Ç—å—Å—è.

**context.read**

–•–æ—á–∞ –∑–¥–∞—î—Ç—å—Å—è, —â–æ `context.read` —ñ–¥–µ–Ω—Ç–∏—á–Ω–∏–π `context.bloc`, —î –¥–µ—è–∫—ñ —Ç–æ–Ω–∫—ñ, –∞–ª–µ
–∑–Ω–∞—á–Ω—ñ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ. –û–±–∏–¥–≤–∞ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ bloc –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é
`BuildContext` —ñ –Ω–µ –ø—Ä–∏–∑–≤–æ–¥—è—Ç—å –¥–æ –ø–µ—Ä–µ–±—É–¥–æ–≤; –æ–¥–Ω–∞–∫ `context.read` –Ω–µ –º–æ–∂–µ –±—É—Ç–∏
–≤–∏–∫–ª–∏–∫–∞–Ω–∏–π –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –º–µ—Ç–æ–¥—É `build`. –Ñ –¥–≤—ñ –æ—Å–Ω–æ–≤–Ω—ñ –ø—Ä–∏—á–∏–Ω–∏
–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `context.bloc` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `build`:

1. **–©–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ —Å—Ç–∞–Ω—É bloc**

```dart
@override
Widget build(BuildContext context) {
  final state = context.bloc<MyBloc>().state;
  return Text('$state');
}
```

–ù–∞–≤–µ–¥–µ–Ω–µ –≤–∏—â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å—Ö–∏–ª—å–Ω–µ –¥–æ –ø–æ–º–∏–ª–æ–∫, —Ç–æ–º—É —â–æ –≤—ñ–¥–∂–µ—Ç `Text` –Ω–µ –±—É–¥–µ
–ø–µ—Ä–µ–±—É–¥–æ–≤–∞–Ω–∏–π, —è–∫—â–æ —Å—Ç–∞–Ω bloc –∑–º—ñ–Ω–∏—Ç—å—Å—è. –£ —Ü—å–æ–º—É —Å—Ü–µ–Ω–∞—Ä—ñ—ó —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∞–±–æ
`BlocBuilder`, –∞–±–æ `context.watch`.

```dart
@override
Widget build(BuildContext context) {
  final state = context.watch<MyBloc>().state;
  return Text('$state');
}
```

–∞–±–æ

```dart
@override
Widget build(BuildContext context) {
  return BlocBuilder<MyBloc, MyState>(
    builder: (context, state) => Text('$state'),
  );
}
```

:::note

–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `context.watch` –≤ –∫–æ—Ä–µ–Ω—ñ –º–µ—Ç–æ–¥—É `build` –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ —Ç–æ–≥–æ, —â–æ –≤–µ—Å—å
–≤—ñ–¥–∂–µ—Ç –±—É–¥–µ –ø–µ—Ä–µ–±—É–¥–æ–≤–∞–Ω–∏–π –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Å—Ç–∞–Ω—É bloc. –Ø–∫—â–æ –≤–µ—Å—å –≤—ñ–¥–∂–µ—Ç –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ
–ø–µ—Ä–µ–±—É–¥–æ–≤—É–≤–∞—Ç–∏, –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `BlocBuilder`, —â–æ–± –æ–±–≥–æ—Ä–Ω—É—Ç–∏ —á–∞—Å—Ç–∏–Ω–∏, —è–∫—ñ
–ø–æ–≤–∏–Ω–Ω—ñ –ø–µ—Ä–µ–±—É–¥–æ–≤—É–≤–∞—Ç–∏—Å—è, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `Builder` –∑ `context.watch` –¥–ª—è
–æ–±–º–µ–∂–µ–Ω–Ω—è –ø–µ—Ä–µ–±—É–¥–æ–≤, –∞–±–æ —Ä–æ–∑–±–∏–π—Ç–µ –≤—ñ–¥–∂–µ—Ç –Ω–∞ –º–µ–Ω—à—ñ –≤—ñ–¥–∂–µ—Ç–∏.

:::

2. **–©–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ bloc –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–¥—ñ—ó**

```dart
@override
Widget build(BuildContext context) {
  final bloc = context.bloc<MyBloc>();
  return ElevatedButton(
    onPressed: () => bloc.add(MyEvent()),
    ...
  )
}
```

–ù–∞–≤–µ–¥–µ–Ω–µ –≤–∏—â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–µ, —Ç–æ–º—É —â–æ –≤–æ–Ω–æ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –ø–æ—à—É–∫—É bloc –Ω–∞
–∫–æ–∂–Ω—ñ–π –ø–µ—Ä–µ–±—É–¥–æ–≤—ñ, –∫–æ–ª–∏ bloc –ø–æ—Ç—Ä—ñ–±–µ–Ω –ª–∏—à–µ —Ç–æ–¥—ñ, –∫–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î
`ElevatedButton`. –£ —Ü—å–æ–º—É —Å—Ü–µ–Ω–∞—Ä—ñ—ó –∫—Ä–∞—â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `context.read` –¥–ª—è
–¥–æ—Å—Ç—É–ø—É –¥–æ bloc –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ —Ç–∞–º, –¥–µ –≤—ñ–Ω –ø–æ—Ç—Ä—ñ–±–µ–Ω (—É –¥–∞–Ω–æ–º—É –≤–∏–ø–∞–¥–∫—É –≤ –∫–æ–ª–±–µ—Ü—ñ
`onPressed`).

```dart
@override
Widget build(BuildContext context) {
  return ElevatedButton(
    onPressed: () => context.read<MyBloc>().add(MyEvent()),
    ...
  )
}
```

**–ö–æ—Ä–æ—Ç–∫–∏–π –≤–∏–∫–ª–∞–¥**

**v6.0.x**

```dart
@override
Widget build(BuildContext context) {
  final bloc = context.bloc<MyBloc>();
  return ElevatedButton(
    onPressed: () => bloc.add(MyEvent()),
    ...
  )
}
```

**v6.1.x**

```dart
@override
Widget build(BuildContext context) {
  return ElevatedButton(
    onPressed: () => context.read<MyBloc>().add(MyEvent()),
    ...
  )
}
```

?> –Ø–∫—â–æ –¥–æ—Å—Ç—É–ø –¥–æ bloc –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–¥—ñ—ó, –≤–∏–∫–æ–Ω—É–π—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ bloc,
–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ `context.read` —É –∫–æ–ª–±–µ—Ü—ñ, –¥–µ —Ü–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ.

**v6.0.x**

```dart
@override
Widget build(BuildContext context) {
  final state = context.bloc<MyBloc>().state;
  return Text('$state');
}
```

**v6.1.x**

```dart
@override
Widget build(BuildContext context) {
  final state = context.watch<MyBloc>().state;
  return Text('$state');
}
```

?> –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `context.watch` –ø—Ä–∏ –¥–æ—Å—Ç—É–ø—ñ –¥–æ —Å—Ç–∞–Ω—É bloc, —â–æ–± –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è,
—â–æ –≤—ñ–¥–∂–µ—Ç –ø–µ—Ä–µ–±—É–¥–æ–≤—É—î—Ç—å—Å—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Å—Ç–∞–Ω—É.

## v6.0.0

### `package:bloc`

#### ‚ùóBlocObserver onError –ø—Ä–∏–π–º–∞—î Cubit

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–ß–µ—Ä–µ–∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é `Cubit`, `onError` —Ç–µ–ø–µ—Ä —î —Å–ø—ñ–ª—å–Ω–∏–º —è–∫ –¥–ª—è –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ–≤ `Bloc`,
—Ç–∞–∫ —ñ –¥–ª—è `Cubit`. –û—Å–∫—ñ–ª—å–∫–∏ `Cubit` —î –±–∞–∑–æ–≤–∏–º, `BlocObserver` –±—É–¥–µ –ø—Ä–∏–π–º–∞—Ç–∏ —Ç–∏–ø
`Cubit`, –∞ –Ω–µ —Ç–∏–ø `Bloc` —É –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—ñ `onError`.

**v5.x.x**

```dart
class MyBlocObserver extends BlocObserver {
  @override
  void onError(Bloc bloc, Object error, StackTrace stackTrace) {
    super.onError(bloc, error, stackTrace);
  }
}
```

**v6.0.0**

```dart
class MyBlocObserver extends BlocObserver {
  @override
  void onError(Cubit cubit, Object error, StackTrace stackTrace) {
    super.onError(cubit, error, stackTrace);
  }
}
```

#### ‚ùóBloc –Ω–µ –µ–º—ñ—Ç–∏—Ç—å –æ—Å—Ç–∞–Ω–Ω—ñ–π —Å—Ç–∞–Ω –ø—Ä–∏ –ø—ñ–¥–ø–∏—Å—Ü—ñ

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–¶—é –∑–º—ñ–Ω—É –±—É–ª–æ –≤–Ω–µ—Å–µ–Ω–æ –¥–ª—è —É–∑–≥–æ–¥–∂–µ–Ω–Ω—è `Bloc` —Ç–∞ `Cubit` —ñ–∑ –≤–±—É–¥–æ–≤–∞–Ω–æ—é –ø–æ–≤–µ–¥—ñ–Ω–∫–æ—é
`Stream` —É `Dart`. –ö—Ä—ñ–º —Ç–æ–≥–æ, –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å —Å—Ç–∞—Ä—ñ–π –ø–æ–≤–µ–¥—ñ–Ω—Ü—ñ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ `Cubit`
–ø—Ä–∏–∑–≤–µ–ª–∞ –¥–æ –±–∞–≥–∞—Ç—å–æ—Ö –Ω–µ–ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–∏—Ö –ø–æ–±—ñ—á–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤ —ñ –≤ —Ü—ñ–ª–æ–º—É —É—Å–∫–ª–∞–¥–Ω–∏–ª–∞
–≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó —ñ–Ω—à–∏—Ö –ø–∞–∫–µ—Ç—ñ–≤, —Ç–∞–∫–∏—Ö —è–∫ `flutter_bloc` —Ç–∞ `bloc_test`, –±–µ–∑
–Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ (–ø–æ—Ç—Ä–µ–±—É—é—á–∏ `skip(1)` —Ç–æ—â–æ).

**v5.x.x**

```dart
final bloc = MyBloc();
bloc.listen(print);
```

–†–∞–Ω—ñ—à–µ –Ω–∞–≤–µ–¥–µ–Ω–∏–π –≤–∏—â–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç –≤–∏–≤–æ–¥–∏–≤ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω bloc, –∑–∞ —è–∫–∏–º —Å–ª—ñ–¥—É–≤–∞–ª–∏
–ø–æ–¥–∞–ª—å—à—ñ –∑–º—ñ–Ω–∏ —Å—Ç–∞–Ω—É.

**v6.x.x**

–£ v6.0.0 –Ω–∞–≤–µ–¥–µ–Ω–∏–π –≤–∏—â–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç –Ω–µ –≤–∏–≤–æ–¥–∏—Ç—å –ø–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω —ñ –≤–∏–≤–æ–¥–∏—Ç—å –ª–∏—à–µ
–ø–æ–¥–∞–ª—å—à—ñ –∑–º—ñ–Ω–∏ —Å—Ç–∞–Ω—É. –ü–æ–ø–µ—Ä–µ–¥–Ω—é –ø–æ–≤–µ–¥—ñ–Ω–∫—É –º–æ–∂–Ω–∞ –¥–æ—Å—è–≥—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏–º —á–∏–Ω–æ–º:

```dart
final bloc = MyBloc();
print(bloc.state);
bloc.listen(print);
```

?> **–ü—Ä–∏–º—ñ—Ç–∫–∞**: –¶—è –∑–º—ñ–Ω–∞ –≤–ø–ª–∏–Ω–µ –ª–∏—à–µ –Ω–∞ –∫–æ–¥, —è–∫–∏–π –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –ø—Ä—è–º–∏—Ö –ø—ñ–¥–ø–∏—Å–æ–∫
–Ω–∞ bloc. –ü—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ `BlocBuilder`, `BlocListener` –∞–±–æ `BlocConsumer` –Ω–µ
–±—É–¥–µ –ø–æ–º—ñ—Ç–Ω–æ—ó –∑–º—ñ–Ω–∏ –≤ –ø–æ–≤–µ–¥—ñ–Ω—Ü—ñ.

### `package:bloc_test`

#### ‚ùóMockBloc –ø–æ—Ç—Ä–µ–±—É—î –ª–∏—à–µ —Ç–∏–ø State

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–¶–µ –Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ —ñ —É—Å—É–≤–∞—î –∑–∞–π–≤–∏–π –∫–æ–¥, –∞ —Ç–∞–∫–æ–∂ —Ä–æ–±–∏—Ç—å `MockBloc` —Å—É–º—ñ—Å–Ω–∏–º –∑
`Cubit`.

**v5.x.x**

```dart
class MockCounterBloc extends MockBloc<CounterEvent, int> implements CounterBloc {}
```

**v6.0.0**

```dart
class MockCounterBloc extends MockBloc<int> implements CounterBloc {}
```

#### ‚ùówhenListen –ø–æ—Ç—Ä–µ–±—É—î –ª–∏—à–µ —Ç–∏–ø State

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–¶–µ –Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ —ñ —É—Å—É–≤–∞—î –∑–∞–π–≤–∏–π –∫–æ–¥, –∞ —Ç–∞–∫–æ–∂ —Ä–æ–±–∏—Ç—å `whenListen` —Å—É–º—ñ—Å–Ω–∏–º –∑
`Cubit`.

**v5.x.x**

```dart
whenListen<CounterEvent,int>(bloc, Stream.fromIterable([0, 1, 2, 3]));
```

**v6.0.0**

```dart
whenListen<int>(bloc, Stream.fromIterable([0, 1, 2, 3]));
```

#### ‚ùóblocTest –Ω–µ –ø–æ—Ç—Ä–µ–±—É—î —Ç–∏–ø Event

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–¶–µ –Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ —ñ —É—Å—É–≤–∞—î –∑–∞–π–≤–∏–π –∫–æ–¥, –∞ —Ç–∞–∫–æ–∂ —Ä–æ–±–∏—Ç—å `blocTest` —Å—É–º—ñ—Å–Ω–∏–º –∑
`Cubit`.

**v5.x.x**

```dart
blocTest<CounterBloc, CounterEvent, int>(
  'emits [1] when increment is called',
  build: () async => CounterBloc(),
  act: (bloc) => bloc.add(CounterEvent.increment),
  expect: const <int>[1],
);
```

**v6.0.0**

```dart
blocTest<CounterBloc, int>(
  'emits [1] when increment is called',
  build: () => CounterBloc(),
  act: (bloc) => bloc.add(CounterEvent.increment),
  expect: const <int>[1],
);
```

#### ‚ùóblocTest skip –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –¥–æ—Ä—ñ–≤–Ω—é—î 0

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–û—Å–∫—ñ–ª—å–∫–∏ –µ–∫–∑–µ–º–ø–ª—è—Ä–∏ `bloc` —Ç–∞ `cubit` –±—ñ–ª—å—à–µ –Ω–µ –±—É–¥—É—Ç—å –µ–º—ñ—Ç–∏—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Å—Ç–∞–Ω –¥–ª—è
–Ω–æ–≤–∏—Ö –ø—ñ–¥–ø–∏—Å–æ–∫, –±—ñ–ª—å—à–µ –Ω–µ –±—É–ª–æ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏ `skip` –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
—Ä—ñ–≤–Ω–∏–º `1`.

**v5.x.x**

```dart
blocTest<CounterBloc, CounterEvent, int>(
  'emits [0] when skip is 0',
  build: () async => CounterBloc(),
  skip: 0,
  expect: const <int>[0],
);
```

**v6.0.0**

```dart
blocTest<CounterBloc, int>(
  'emits [] when skip is 0',
  build: () => CounterBloc(),
  skip: 0,
  expect: const <int>[],
);
```

–ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω bloc –∞–±–æ cubit –º–æ–∂–Ω–∞ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏–º —á–∏–Ω–æ–º:

```dart
test('initial state is correct', () {
  expect(MyBloc().state, InitialState());
});
```

#### ‚ùóblocTest —Ä–æ–±–∏—Ç—å build —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–º

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–†–∞–Ω—ñ—à–µ `build` –±—É–ª–æ –∑—Ä–æ–±–ª–µ–Ω–æ `async`, —â–æ–± –º–æ–∂–Ω–∞ –±—É–ª–æ –≤–∏–∫–æ–Ω–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ
–ø—ñ–¥–≥–æ—Ç–æ–≤—á—ñ –¥—ñ—ó –¥–ª—è –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–∞–Ω–æ–≥–æ bloc —É –ø–µ–≤–Ω–∏–π —Å—Ç–∞–Ω. –¶–µ –±—ñ–ª—å—à–µ –Ω–µ
–ø–æ—Ç—Ä—ñ–±–Ω–æ —ñ —Ç–∞–∫–æ–∂ –≤–∏—Ä—ñ—à—É—î –∫—ñ–ª—å–∫–∞ –ø—Ä–æ–±–ª–µ–º —á–µ—Ä–µ–∑ –¥–æ–¥–∞—Ç–∫–æ–≤—É –∑–∞—Ç—Ä–∏–º–∫—É –º—ñ–∂ build —Ç–∞
–ø—ñ–¥–ø–∏—Å–∫–æ—é –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ. –ó–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ, —â–æ–± –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É –ø—ñ–¥–≥–æ—Ç–æ–≤–∫—É –¥–ª—è
–ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—è bloc —É –±–∞–∂–∞–Ω–∏–π —Å—Ç–∞–Ω, –º–∏ —Ç–µ–ø–µ—Ä –º–æ–∂–µ–º–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞–Ω bloc, –∑–≤'—è–∑–∞–≤—à–∏
`emit` –∑ –±–∞–∂–∞–Ω–∏–º —Å—Ç–∞–Ω–æ–º.

**v5.x.x**

```dart
blocTest<CounterBloc, CounterEvent, int>(
  'emits [2] when increment is added',
  build: () async {
    final bloc = CounterBloc();
    bloc.add(CounterEvent.increment);
    await bloc.take(2);
    return bloc;
  }
  act: (bloc) => bloc.add(CounterEvent.increment),
  expect: const <int>[2],
);
```

**v6.0.0**

```dart
blocTest<CounterBloc, int>(
  'emits [2] when increment is added',
  build: () => CounterBloc()..emit(1),
  act: (bloc) => bloc.add(CounterEvent.increment),
  expect: const <int>[2],
);
```

:::note

`emit` –≤–∏–¥–∏–º–∏–π –ª–∏—à–µ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —ñ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è –ø–æ–∑–∞
—Ç–µ—Å—Ç–∞–º–∏.

:::

### `package:flutter_bloc`

#### ‚ùó–ø–∞—Ä–∞–º–µ—Ç—Ä bloc —É BlocBuilder –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–æ –Ω–∞ cubit

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–©–æ–± –∑—Ä–æ–±–∏—Ç–∏ `BlocBuilder` —Å—É–º—ñ—Å–Ω–∏–º –∑ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ `bloc` —Ç–∞ `cubit`, –ø–∞—Ä–∞–º–µ—Ç—Ä
`bloc` –±—É–ª–æ –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–æ –Ω–∞ `cubit` (–æ—Å–∫—ñ–ª—å–∫–∏ `Cubit` —î –±–∞–∑–æ–≤–∏–º –∫–ª–∞—Å–æ–º).

**v5.x.x**

```dart
BlocBuilder(
  bloc: myBloc,
  builder: (context, state) {...}
)
```

**v6.0.0**

```dart
BlocBuilder(
  cubit: myBloc,
  builder: (context, state) {...}
)
```

#### ‚ùó–ø–∞—Ä–∞–º–µ—Ç—Ä bloc —É BlocListener –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–æ –Ω–∞ cubit

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–©–æ–± –∑—Ä–æ–±–∏—Ç–∏ `BlocListener` —Å—É–º—ñ—Å–Ω–∏–º –∑ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ `bloc` —Ç–∞ `cubit`, –ø–∞—Ä–∞–º–µ—Ç—Ä
`bloc` –±—É–ª–æ –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–æ –Ω–∞ `cubit` (–æ—Å–∫—ñ–ª—å–∫–∏ `Cubit` —î –±–∞–∑–æ–≤–∏–º –∫–ª–∞—Å–æ–º).

**v5.x.x**

```dart
BlocListener(
  bloc: myBloc,
  listener: (context, state) {...}
)
```

**v6.0.0**

```dart
BlocListener(
  cubit: myBloc,
  listener: (context, state) {...}
)
```

#### ‚ùó–ø–∞—Ä–∞–º–µ—Ç—Ä bloc —É BlocConsumer –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–æ –Ω–∞ cubit

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–©–æ–± –∑—Ä–æ–±–∏—Ç–∏ `BlocConsumer` —Å—É–º—ñ—Å–Ω–∏–º –∑ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ `bloc` —Ç–∞ `cubit`, –ø–∞—Ä–∞–º–µ—Ç—Ä
`bloc` –±—É–ª–æ –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–æ –Ω–∞ `cubit` (–æ—Å–∫—ñ–ª—å–∫–∏ `Cubit` —î –±–∞–∑–æ–≤–∏–º –∫–ª–∞—Å–æ–º).

**v5.x.x**

```dart
BlocConsumer(
  bloc: myBloc,
  listener: (context, state) {...},
  builder: (context, state) {...}
)
```

**v6.0.0**

```dart
BlocConsumer(
  cubit: myBloc,
  listener: (context, state) {...},
  builder: (context, state) {...}
)
```

---

## v5.0.0

### `package:bloc`

#### ‚ùóinitialState –±—É–ª–æ –≤–∏–¥–∞–ª–µ–Ω–æ

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–Ø–∫ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫, –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ—Å—Ç—å –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—Ç–∏ `initialState` –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ bloc
—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–≤—ñ –æ—Å–Ω–æ–≤–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏:

- `initialState` bloc –º–æ–∂–µ –±—É—Ç–∏ –¥–∏–Ω–∞–º—ñ—á–Ω–∏–º —ñ —Ç–∞–∫–æ–∂ –º–æ–∂–µ –±—É—Ç–∏ –≤–∫–∞–∑–∞–Ω–∏–π –ø—ñ–∑–Ω—ñ—à–µ
  (–Ω–∞–≤—ñ—Ç—å –ø–æ–∑–∞ —Å–∞–º–∏–º bloc). –£ –¥–µ—è–∫–æ–º—É —Å–µ–Ω—Å—ñ —Ü–µ –º–æ–∂–Ω–∞ —Ä–æ–∑–≥–ª—è–¥–∞—Ç–∏ —è–∫ –≤–∏—Ç—ñ–∫
  –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó bloc –Ω–∞ —Ä—ñ–≤–µ–Ω—å UI.
- –¶–µ –±–∞–≥–∞—Ç–æ—Å–ª—ñ–≤–Ω–æ.

**v4.x.x**

```dart
class CounterBloc extends Bloc<CounterEvent, int> {
  @override
  int get initialState => 0;

  ...
}
```

**v5.0.0**

```dart
class CounterBloc extends Bloc<CounterEvent, int> {
  CounterBloc() : super(0);

  ...
}
```

?> –î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –æ–∑–Ω–∞–π–æ–º—Ç–µ—Å—è –∑
[#1304](https://github.com/felangel/bloc/issues/1304)

#### ‚ùóBlocDelegate –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–æ –Ω–∞ BlocObserver

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–ù–∞–∑–≤–∞ `BlocDelegate` –Ω–µ –±—É–ª–∞ —Ç–æ—á–Ω–∏–º –æ–ø–∏—Å–æ–º —Ä–æ–ª—ñ, —è–∫—É –≤—ñ–¥—ñ–≥—Ä–∞–≤–∞–≤ –∫–ª–∞—Å.
`BlocDelegate` –ø–µ—Ä–µ–¥–±–∞—á–∞—î, —â–æ –∫–ª–∞—Å –≤—ñ–¥—ñ–≥—Ä–∞—î –∞–∫—Ç–∏–≤–Ω—É —Ä–æ–ª—å, —Ç–æ–¥—ñ —è–∫ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ
–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∞ —Ä–æ–ª—å `BlocDelegate` –ø–æ–ª—è–≥–∞–ª–∞ —É —Ç–æ–º—É, —â–æ–± –±—É—Ç–∏ –ø–∞—Å–∏–≤–Ω–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º,
—è–∫–∏–π –ø—Ä–æ—Å—Ç–æ —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—î –∑–∞ –≤—Å—ñ–º–∞ bloc'–∞–º–∏ —É –¥–æ–¥–∞—Ç–∫—É.

:::note

–í —ñ–¥–µ–∞–ª—ñ –Ω–µ –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ –∂–æ–¥–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π –∞–±–æ –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π, —â–æ
–æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `BlocObserver`.

:::

**v4.x.x**

```dart
class MyBlocDelegate extends BlocDelegate {
  ...
}
```

**v5.0.0**

```dart
class MyBlocObserver extends BlocObserver {
  ...
}
```

#### ‚ùóBlocSupervisor –±—É–ª–æ –≤–∏–¥–∞–ª–µ–Ω–æ

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

`BlocSupervisor` –±—É–≤ —â–µ –æ–¥–Ω–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º, –ø—Ä–æ —è–∫–∏–π —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ
–∑–Ω–∞—Ç–∏ —Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ—è—Ç–∏ –∑ –Ω–∏–º –≤–∏–∫–ª—é—á–Ω–æ –¥–ª—è –≤–∫–∞–∑—ñ–≤–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–æ–≥–æ `BlocDelegate`. –ó—ñ
–∑–º—ñ–Ω–æ—é –Ω–∞ `BlocObserver` –º–∏ –≤—ñ–¥—á—É–ª–∏, —â–æ —Ü–µ –ø–æ–∫—Ä–∞—â–∏–ª–æ –¥–æ—Å–≤—ñ–¥ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞,
–≤—Å—Ç–∞–Ω–æ–≤–∏–≤—à–∏ —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—á–∞ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –Ω–∞ —Å–∞–º–æ–º—É bloc.

?> –¶—è –∑–º—ñ–Ω–∞ —Ç–∞–∫–æ–∂ –¥–æ–∑–≤–æ–ª–∏–ª–∞ –Ω–∞–º –≤—ñ–¥–æ–∫—Ä–µ–º–∏—Ç–∏ —ñ–Ω—à—ñ –¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è –¥–æ bloc, —Ç–∞–∫—ñ —è–∫
`HydratedStorage`, –≤—ñ–¥ `BlocObserver`.

**v4.x.x**

```dart
BlocSupervisor.delegate = MyBlocDelegate();
```

**v5.0.0**

```dart
Bloc.observer = MyBlocObserver();
```

### `package:flutter_bloc`

#### ‚ùócondition —É BlocBuilder –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–æ –Ω–∞ buildWhen

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–ü—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ `BlocBuilder` –º–∏ —Ä–∞–Ω—ñ—à–µ –º–æ–≥–ª–∏ –≤–∫–∞–∑–∞—Ç–∏ `condition`, —â–æ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏,
—á–∏ –ø–æ–≤–∏–Ω–µ–Ω `builder` –ø–µ—Ä–µ–±—É–¥–æ–≤—É–≤–∞—Ç–∏—Å—è.

```dart
BlocBuilder<MyBloc, MyState>(
  condition: (previous, current) {
    // –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ true/false, —â–æ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏, —á–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ builder
  },
  builder: (context, state) {...}
)
```

–ù–∞–∑–≤–∞ `condition` –Ω–µ –¥—É–∂–µ —Å–∞–º–æ–æ—á–µ–≤–∏–¥–Ω–∞ –∞–±–æ –∑—Ä–æ–∑—É–º—ñ–ª–∞, —ñ, —â–æ –≤–∞–∂–ª–∏–≤—ñ—à–µ, –ø—Ä–∏
–≤–∑–∞—î–º–æ–¥—ñ—ó –∑ `BlocConsumer` API —Å—Ç–∞–≤ –Ω–µ—É–∑–≥–æ–¥–∂–µ–Ω–∏–º, —Ç–æ–º—É —â–æ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∏ –º–æ–∂—É—Ç—å
–Ω–∞–¥–∞—Ç–∏ –¥–≤—ñ —É–º–æ–≤–∏ (–æ–¥–Ω—É –¥–ª—è `builder` —ñ –æ–¥–Ω—É –¥–ª—è `listener`). –£ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ API
`BlocConsumer` —Ä–æ–∑–∫—Ä–∏–≤ `buildWhen` —Ç–∞ `listenWhen`

```dart
BlocConsumer<MyBloc, MyState>(
  listenWhen: (previous, current) {
    // –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ true/false, —â–æ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏, —á–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ listener
  },
  listener: (context, state) {...},
  buildWhen: (previous, current) {
    // –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ true/false, —â–æ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏, —á–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ builder
  },
  builder: (context, state) {...},
)
```

–©–æ–± —É–∑–≥–æ–¥–∏—Ç–∏ API —Ç–∞ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –±—ñ–ª—å—à –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∏–π –¥–æ—Å–≤—ñ–¥ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞, `condition`
–±—É–ª–æ –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–æ –Ω–∞ `buildWhen`.

**v4.x.x**

```dart
BlocBuilder<MyBloc, MyState>(
  condition: (previous, current) {
    // –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ true/false, —â–æ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏, —á–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ builder
  },
  builder: (context, state) {...}
)
```

**v5.0.0**

```dart
BlocBuilder<MyBloc, MyState>(
  buildWhen: (previous, current) {
    // –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ true/false, —â–æ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏, —á–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ builder
  },
  builder: (context, state) {...}
)
```

#### ‚ùócondition —É BlocListener –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–æ –Ω–∞ listenWhen

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–ó —Ç–∏—Ö —Å–∞–º–∏—Ö –ø—Ä–∏—á–∏–Ω, —â–æ –æ–ø–∏—Å–∞–Ω—ñ –≤–∏—â–µ, —É–º–æ–≤—É `BlocListener` —Ç–∞–∫–æ–∂ –±—É–ª–æ
–ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–æ.

**v4.x.x**

```dart
BlocListener<MyBloc, MyState>(
  condition: (previous, current) {
    // –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ true/false, —â–æ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏, —á–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ listener
  },
  listener: (context, state) {...}
)
```

**v5.0.0**

```dart
BlocListener<MyBloc, MyState>(
  listenWhen: (previous, current) {
    // –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ true/false, —â–æ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏, —á–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ listener
  },
  listener: (context, state) {...}
)
```

### `package:hydrated_bloc`

#### ‚ùóHydratedStorage —Ç–∞ HydratedBlocStorage –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω—ñ

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–©–æ–± –ø–æ–∫—Ä–∞—â–∏—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–æ–¥—É –º—ñ–∂
[hydrated_bloc](https://pub.dev/packages/hydrated_bloc) —Ç–∞
[hydrated_cubit](https://pub.dev/packages/hydrated_cubit), –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è
—Å—Ö–æ–≤–∏—â–∞ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –±—É–ª–∞ –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–∞ –∑ `HydratedBlocStorage` –Ω–∞
`HydratedStorage`. –ö—Ä—ñ–º —Ç–æ–≥–æ, —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å `HydratedStorage` –±—É–ª–æ –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–æ –∑
`HydratedStorage` –Ω–∞ `Storage`.

**v4.0.0**

```dart
class MyHydratedStorage implements HydratedStorage {
  ...
}
```

**v5.0.0**

```dart
class MyHydratedStorage implements Storage {
  ...
}
```

#### ‚ùóHydratedStorage –≤—ñ–¥–æ–∫—Ä–µ–º–ª–µ–Ω–æ –≤—ñ–¥ BlocDelegate

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–Ø–∫ –∑–≥–∞–¥—É–≤–∞–ª–æ—Å—è —Ä–∞–Ω—ñ—à–µ, `BlocDelegate` –±—É–ª–æ –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–æ –Ω–∞ `BlocObserver` —ñ –±—É–ª–æ
–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ —è–∫ —á–∞—Å—Ç–∏–Ω—É `bloc` —á–µ—Ä–µ–∑:

```dart
Bloc.observer = MyBlocObserver();
```

–ù–∞—Å—Ç—É–ø–Ω—É –∑–º—ñ–Ω—É –±—É–ª–æ –≤–Ω–µ—Å–µ–Ω–æ –¥–ª—è:

- –ó–∞–ª–∏—à–∞—Ç–∏—Å—è —É–∑–≥–æ–¥–∂–µ–Ω–∏–º –∑ –Ω–æ–≤–∏–º API —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—á–∞ bloc
- –û–±–º–µ–∂–∏—Ç–∏ –æ–±–ª–∞—Å—Ç—å –¥—ñ—ó —Å—Ö–æ–≤–∏—â–∞ –ª–∏—à–µ `HydratedBloc`
- –í—ñ–¥–æ–∫—Ä–µ–º–∏—Ç–∏ `BlocObserver` –≤—ñ–¥ `Storage`

**v4.0.0**

```dart
BlocSupervisor.delegate = await HydratedBlocDelegate.build();
```

**v5.0.0**

```dart
HydratedBloc.storage = await HydratedStorage.build();
```

#### ‚ùó–°–ø—Ä–æ—â–µ–Ω–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è

##### –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è

–†–∞–Ω—ñ—à–µ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º –¥–æ–≤–æ–¥–∏–ª–æ—Å—è –≤—Ä—É—á–Ω—É –≤–∏–∫–ª–∏–∫–∞—Ç–∏
`super.initialState ?? DefaultInitialState()` –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–≤–æ—ó—Ö –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ–≤
`HydratedBloc`. –¶–µ –Ω–µ–∑—Ä—É—á–Ω–æ —ñ –±–∞–≥–∞—Ç–æ—Å–ª—ñ–≤–Ω–æ, –∞ —Ç–∞–∫–æ–∂ –Ω–µ—Å—É–º—ñ—Å–Ω–æ –∑ –∫—Ä–∏—Ç–∏—á–Ω–∏–º–∏
–∑–º—ñ–Ω–∞–º–∏ –≤ `initialState` —É `bloc`. –£ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –≤ v5.0.0 —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
`HydratedBloc` —ñ–¥–µ–Ω—Ç–∏—á–Ω–∞ –∑–≤–∏—á–∞–π–Ω—ñ–π —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó `Bloc`.

**v4.0.0**

```dart
class CounterBloc extends HydratedBloc<CounterEvent, int> {
  @override
  int get initialState => super.initialState ?? 0;
}
```

**v5.0.0**

```dart
class CounterBloc extends HydratedBloc<CounterEvent, int> {
  CounterBloc() : super(0);

  ...
}
```
