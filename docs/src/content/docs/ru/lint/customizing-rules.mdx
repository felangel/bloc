---
title: Настройка правил линтера
description: Настройка правил линтера bloc
sidebar:
  order: 4
---

import InstallBlocLintSnippet from '~/components/lint/InstallBlocLintSnippet.astro';
import BlocLintRecommendedAnalysisOptionsSnippet from '~/components/lint/BlocLintRecommendedAnalysisOptionsSnippet.astro';
import BlocLintEnablingRulesSnippet from '~/components/lint/BlocLintEnablingRulesSnippet.astro';
import BlocLintDisablingRulesSnippet from '~/components/lint/BlocLintDisablingRulesSnippet.astro';
import BlocLintChangingSeveritySnippet from '~/components/lint/BlocLintChangingSeveritySnippet.astro';
import ImportFlutterInfoSnippet from '~/components/lint/ImportFlutterInfoSnippet.mdx';
import ImportFlutterInfoOutputSnippet from '~/components/lint/ImportFlutterInfoOutputSnippet.astro';
import BlocLintExcludingFilesSnippet from '~/components/lint/BlocLintExcludingFilesSnippet.astro';
import BlocLintIgnoreForLineSnippet from '~/components/lint/BlocLintIgnoreForLineSnippet.astro';
import BlocLintIgnoreForFileSnippet from '~/components/lint/BlocLintIgnoreForFileSnippet.astro';

Вы можете настроить поведение линтера bloc, изменив серьёзность
отдельных правил, индивидуально включая или отключая правила, а также исключая файлы
из статического анализа.

## Включение и отключение правил

Линтер bloc поддерживает растущий список правил линтера. Обратите внимание, что правила линтера
не обязательно должны соответствовать друг другу. Например, некоторые разработчики могут предпочитать
использовать блоки (`prefer_bloc`), в то время как другие могут предпочитать использовать кубиты
(`prefer_cubit`).

:::note

В отличие от статического анализа, правила линтера могут содержать ложные срабатывания. Не стесняйтесь
сообщать о любых ложных срабатываниях или других проблемах,
[создав issue](https://github.com/felangel/bloc/issues/new/choose).

:::

### Включение рекомендуемых правил

Библиотека bloc предоставляет набор рекомендуемых правил линтера в составе
пакета [`bloc_lint`](https://pub.dev/packages/bloc_lint).

Для включения рекомендуемого набора линтов добавьте пакет `bloc_lint` как dev-зависимость:

<InstallBlocLintSnippet />

Затем отредактируйте ваш файл `analysis_options.yaml`, чтобы включить набор правил:

<BlocLintRecommendedAnalysisOptionsSnippet />

:::note

Когда публикуется новая версия `bloc_lint`, код, который ранее проходил
статический анализ, может начать проваливаться. Мы рекомендуем обновить ваш код для работы
с новыми правилами, или вы также можете опционально включить или отключить отдельные
правила.

:::

### Включение отдельных правил

Для включения отдельных правил добавьте `bloc:` в файл `analysis_options.yaml` в качестве
ключа верхнего уровня и `rules:` в качестве ключа второго уровня. В последующих строках укажите
правила, которые вы хотите, в виде списка YAML (с префиксом в виде дефисов).

Например:

<BlocLintEnablingRulesSnippet />

### Отключение отдельных правил

Если вы включаете существующий набор правил, такой как набор `recommended`, вы можете захотеть
отключить одно или несколько включённых правил линтера. Отключение правил аналогично
их включению, но требует использования YAML-карты, а не списка.

Например, следующее включает рекомендуемый набор правил линтера за исключением
`avoid_public_bloc_methods` и дополнительно включает правило `prefer_bloc`:

<BlocLintDisablingRulesSnippet />

## Настройка серьёзности правил

Вы можете настроить серьёзность любого правила следующим образом:

<BlocLintChangingSeveritySnippet />

Теперь то же самое правило линтера будет отображаться с серьёзностью `info` вместо
`warning`:

<ImportFlutterInfoSnippet />

Вывод команды `bloc lint` должен выглядеть так:

<ImportFlutterInfoOutputSnippet />

Поддерживаемые варианты серьёзности:

| Серьёзность | Описание                                                        |
| ----------- | --------------------------------------------------------------- |
| `error`     | Указывает, что шаблон не разрешён.                              |
| `warning`   | Указывает, что шаблон подозрителен, но разрешён.                |
| `info`      | Предоставляет информацию пользователям, но не является проблемой |
| `hint`      | Предлагает лучший способ достижения результата.                 |

## Исключение файлов

Иногда нормально, что статический анализ проваливается. Например, вы можете захотеть
игнорировать предупреждения или ошибки, отображаемые в сгенерированном коде, который не был написан вами
и вашей командой. Так же, как и с официальными правилами линтера Dart, вы можете использовать
опцию анализатора `exclude:`, чтобы исключить файлы из статического анализа.

Вы можете либо перечислить отдельные файлы, либо использовать
паттерны [`glob`](https://pub.dev/packages/glob).

:::note

Все использования паттернов glob должны быть относительно каталога, содержащего
соответствующий файл `analysis_options.yaml`.

:::

Например, мы можем исключить весь сгенерированный код Dart с помощью следующих параметров
анализа:

<BlocLintExcludingFilesSnippet />

## Игнорирование правил

Так же, как и с официальными правилами линтера Dart, вы можете игнорировать правила линтера bloc для
данного файла или строки кода, используя `// ignore_for_file` и `// ignore`
соответственно.

:::note

Чтобы игнорировать несколько правил для данной строки или файла, укажите список, разделённый запятыми.

:::

### Игнорирование строк

Мы можем игнорировать конкретные случаи нарушений правил, добавив комментарий `ignore`
либо прямо над проблемной строкой, либо добавив его в конец
проблемной строки.

Например, мы можем игнорировать конкретные случаи
`prefer_file_naming_conventions` в данном файле:

<BlocLintIgnoreForLineSnippet />

### Игнорирование файлов

Мы можем игнорировать все случаи нарушений правил в файле, добавив комментарий
`ignore_for_file` в любом месте файла.

Например, мы можем игнорировать все случаи `prefer_file_naming_conventions`
в данном файле:

<BlocLintIgnoreForFileSnippet />
