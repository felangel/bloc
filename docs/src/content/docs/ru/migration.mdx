---
title: –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏
description: –ú–∏–≥—Ä–∏—Ä—É–π—Ç–µ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç–∞–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é Bloc.
---

import { Code, Tabs, TabItem } from '@astrojs/starlight/components';

:::tip

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫
[–∂—É—Ä–Ω–∞–ª—É —Ä–µ–ª–∏–∑–æ–≤](https://github.com/felangel/bloc/releases) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è
–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–º, —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–∞–∂–¥–æ–º —Ä–µ–ª–∏–∑–µ.

:::

## v10.0.0

### `package:bloc_test`

#### ‚ùó‚ú® –û—Ç–¥–µ–ª–µ–Ω–∏–µ `blocTest` –æ—Ç `BlocBase`

:::note[–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?]

–í bloc_test v10.0.0 API `blocTest` –±–æ–ª—å—à–µ –Ω–µ —Ç–µ—Å–Ω–æ —Å–≤—è–∑–∞–Ω —Å `BlocBase`.

:::

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

`blocTest` –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã bloc, –∫–æ–≥–¥–∞ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ, –¥–ª—è
–ø–æ–≤—ã—à–µ–Ω–∏—è –≥–∏–±–∫–æ—Å—Ç–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –†–∞–Ω–µ–µ —ç—Ç–æ –±—ã–ª–æ
–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ—Å–∫–æ–ª—å–∫—É `BlocBase` —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞–ª `StateStreamableSource`, —á–µ–≥–æ –±—ã–ª–æ
–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è `blocTest` –∏–∑-–∑–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç API `emit`.

### `package:hydrated_bloc`

#### ‚ùó‚ú® –ü–æ–¥–¥–µ—Ä–∂–∫–∞ WebAssembly

:::note[–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?]

–í hydrated_bloc v10.0.0 –±—ã–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ WebAssembly
(wasm).

:::

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–†–∞–Ω–µ–µ –±—ã–ª–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ wasm –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
`hydrated_bloc`. –í v10.0.0 –ø–∞–∫–µ—Ç –±—ã–ª –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤
wasm.

**v9.x.x**

```dart
Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();
  HydratedBloc.storage = await HydratedStorage.build(
    storageDirectory: kIsWeb
        ? HydratedStorage.webStorageDirectory
        : await getTemporaryDirectory(),
  );
  runApp(App());
}
```

**v10.x.x**

```dart
void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  HydratedBloc.storage = await HydratedStorage.build(
    storageDirectory: kIsWeb
        ? HydratedStorageDirectory.web
        : HydratedStorageDirectory((await getTemporaryDirectory()).path),
  );
  runApp(const App());
}
```

## v9.0.0

### `package:bloc`

#### ‚ùóüßπ –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö API

:::note[–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?]

–í bloc v9.0.0 –≤—Å–µ —Ä–∞–Ω–µ–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ API –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã.

:::

##### –ö—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ

- `BlocOverrides` —É–¥–∞–ª–µ–Ω –≤ –ø–æ–ª—å–∑—É `Bloc.observer` –∏ `Bloc.transformer`

#### ‚ùó‚ú® –í–≤–µ–¥–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `EmittableStateStreamableSource`

:::note[–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?]

–í bloc v9.0.0 –±—ã–ª –≤–≤–µ–¥–µ–Ω –Ω–æ–≤—ã–π –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
`EmittableStateStreamableSource`.

:::

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

`package:bloc_test` —Ä–∞–Ω–µ–µ –±—ã–ª —Ç–µ—Å–Ω–æ —Å–≤—è–∑–∞–Ω —Å `BlocBase`. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
`EmittableStateStreamableSource` –±—ã–ª –≤–≤–µ–¥–µ–Ω –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–∑–≤–æ–ª–∏—Ç—å `blocTest`
–æ—Ç–¥–µ–ª–∏—Ç—å—Å—è –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `BlocBase`.

### `package:hydrated_bloc`

#### ‚ú® –í–æ–∑–≤—Ä–∞—Ç API `HydratedBloc.storage`

:::note[–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?]

–í hydrated_bloc v9.0.0 `HydratedBlocOverrides` –±—ã–ª —É–¥–∞–ª–µ–Ω –≤ –ø–æ–ª—å–∑—É API
`HydratedBloc.storage`.\*\*

:::

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫
[–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏—é –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π Bloc.observer –∏ Bloc.transformer](/ru/migration#-–≤–æ–∑–≤—Ä–∞—Ç-api-blocobserver-–∏-bloctransformer).

**v8.x.x**

```dart
Future<void> main() async {
  final storage = await HydratedStorage.build(
    storageDirectory: kIsWeb
        ? HydratedStorage.webStorageDirectory
        : await getTemporaryDirectory(),
  );
  HydratedBlocOverrides.runZoned(
    () => runApp(App()),
    storage: storage,
  );
}
```

**v9.0.0**

```dart
Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();
  HydratedBloc.storage = await HydratedStorage.build(
    storageDirectory: kIsWeb
        ? HydratedStorage.webStorageDirectory
        : await getTemporaryDirectory(),
  );
  runApp(App());
}
```

## v8.1.0

### `package:bloc`

#### ‚ú® –í–æ–∑–≤—Ä–∞—Ç API `Bloc.observer` –∏ `Bloc.transformer`

:::note[–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?]

–í bloc v8.1.0 `BlocOverrides` –±—ã–ª –æ–±—ä—è–≤–ª–µ–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–º –≤ –ø–æ–ª—å–∑—É API
`Bloc.observer` –∏ `Bloc.transformer`.

:::

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

API `BlocOverrides` –±—ã–ª –≤–≤–µ–¥–µ–Ω –≤ v8.0.0 –≤ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ–±–ª–∞—Å—Ç–∏
–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–ª—è bloc, —Ç–∞–∫–∏—Ö –∫–∞–∫ `BlocObserver`,
`EventTransformer`, –∏ `HydratedStorage`. –í —á–∏—Å—Ç—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö Dart –∏–∑–º–µ–Ω–µ–Ω–∏—è
—Ä–∞–±–æ—Ç–∞–ª–∏ —Ö–æ—Ä–æ—à–æ; –æ–¥–Ω–∞–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö Flutter –Ω–æ–≤—ã–π API –≤—ã–∑–≤–∞–ª –±–æ–ª—å—à–µ –ø—Ä–æ–±–ª–µ–º,
—á–µ–º —Ä–µ—à–∏–ª.

API `BlocOverrides` –±—ã–ª –≤–¥–æ—Ö–Ω–æ–≤–ª–µ–Ω –ø–æ—Ö–æ–∂–∏–º–∏ API –≤–æ Flutter/Dart:

- [HttpOverrides](https://api.flutter.dev/flutter/dart-io/HttpOverrides-class.html)
- [IOOverrides](https://api.flutter.dev/flutter/dart-io/IOOverrides-class.html)

**–ü—Ä–æ–±–ª–µ–º—ã**

–•–æ—Ç—è —ç—Ç–æ –Ω–µ –±—ã–ª–æ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏—á–∏–Ω–æ–π —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π, API `BlocOverrides` –ø—Ä–∏–≤–Ω–µ—Å
–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —Å–ª–æ–∂–Ω–æ—Å—Ç—å –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤. –ü–æ–º–∏–º–æ —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
–≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ç–æ–≥–æ –∂–µ —ç—Ñ—Ñ–µ–∫—Ç–∞, API
`BlocOverrides` —Ç—Ä–µ–±–æ–≤–∞–ª –æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è
[Zones](https://api.dart.dev/stable/2.17.6/dart-async/Zone-class.html) –≤ Dart.
`Zones` ‚Äî —ç—Ç–æ –Ω–µ —É–¥–æ–±–Ω–∞—è –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö –∫–æ–Ω—Ü–µ–ø—Ü–∏—è, –∏ –Ω–µ–ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–æ–≥–æ, –∫–∞–∫
—Ä–∞–±–æ—Ç–∞—é—Ç Zones, –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—è–≤–ª–µ–Ω–∏—é –æ—à–∏–±–æ–∫ (—Ç–∞–∫–∏—Ö –∫–∞–∫
–Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–∏, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã, —ç–∫–∑–µ–º–ø–ª—è—Ä—ã —Ö—Ä–∞–Ω–∏–ª–∏—â–∞).

–ù–∞–ø—Ä–∏–º–µ—Ä, –º–Ω–æ–≥–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–º–µ–ª–∏ –±—ã —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:

```dart
void main() {
  WidgetsFlutterBinding.ensureInitialized();
  BlocOverrides.runZoned(...);
}
```

–ü—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –≤—ã—à–µ –∫–æ–¥, —Ö–æ—Ç—è –∏ –≤—ã–≥–ª—è–¥–∏—Ç –±–µ–∑–æ–±–∏–¥–Ω—ã–º, –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏
–∫–æ –º–Ω–æ–≥–∏–º —Ç—Ä—É–¥–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–º –æ—à–∏–±–∫–∞–º. –ö–∞–∫–∞—è –±—ã –∑–æ–Ω–∞ –Ω–∏ –≤—ã–∑–≤–∞–ª–∞ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ
`WidgetsFlutterBinding.ensureInitialized`, –±—É–¥–µ—Ç –∑–æ–Ω–æ–π, –≤ –∫–æ—Ç–æ—Ä–æ–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
—Å–æ–±—ã—Ç–∏—è –∂–µ—Å—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–ª–±—ç–∫–∏ `onTap`, `onPressed`) –∏–∑-–∑–∞
`GestureBinding.initInstances`. –≠—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å –æ–¥–Ω–∞ –∏–∑ –º–Ω–æ–≥–∏—Ö –ø—Ä–æ–±–ª–µ–º, –≤—ã–∑–≤–∞–Ω–Ω—ã—Ö
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `zoneValues`.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, Flutter –¥–µ–ª–∞–µ—Ç –º–Ω–æ–≥–æ –≤–µ—â–µ–π –∑–∞ –∫—É–ª–∏—Å–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–∫–ª—é—á–∞—é—Ç
—Ä–∞–∑–≤–µ—Ç–≤–ª–µ–Ω–∏–µ/–º–∞–Ω–∏–ø—É–ª—è—Ü–∏—é Zones (–æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–æ–≤), —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏
–∫ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é (–∏ –≤–æ –º–Ω–æ–≥–∏—Ö —Å–ª—É—á–∞—è—Ö –∫ –ø–æ–≤–µ–¥–µ–Ω–∏—é, –∫–æ—Ç–æ—Ä–æ–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω–µ
–∫–æ–Ω—Ç—Ä–æ–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ ‚Äî —Å–º. –ø—Ä–æ–±–ª–µ–º—ã –Ω–∏–∂–µ).

–ò–∑-–∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
[runZoned](https://api.flutter.dev/flutter/dart-async/runZoned.html), –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞
API `BlocOverrides` –ø—Ä–∏–≤–µ–ª –∫ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—é –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ—à–∏–±–æ–∫/–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –≤–æ
Flutter (–æ—Å–æ–±–µ–Ω–Ω–æ –≤ –≤–∏–¥–∂–µ—Ç–Ω—ã—Ö –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö):

- https://github.com/flutter/flutter/issues/96939
- https://github.com/flutter/flutter/issues/94123
- https://github.com/flutter/flutter/issues/93676

–∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Ç—Ä–æ–Ω—É–ª–∏ –º–Ω–æ–≥–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫—É bloc:

- https://github.com/felangel/bloc/issues/3394
- https://github.com/felangel/bloc/issues/3350
- https://github.com/felangel/bloc/issues/3319

**v8.0.x**

```dart
void main() {
  BlocOverrides.runZoned(
    () {
      // ...
    },
    blocObserver: CustomBlocObserver(),
    eventTransformer: customEventTransformer(),
  );
}
```

**v8.1.0**

```dart
void main() {
  Bloc.observer = CustomBlocObserver();
  Bloc.transformer = customEventTransformer();

  // ...
}
```

## v8.0.0

### `package:bloc`

#### ‚ùó‚ú® –í–≤–µ–¥–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ API `BlocOverrides`

:::note[–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?]

–í bloc v8.0.0 `Bloc.observer` –∏ `Bloc.transformer` –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã –≤ –ø–æ–ª—å–∑—É API
`BlocOverrides`.

:::

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ü—Ä–µ–¥—ã–¥—É—â–∏–π API, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è `BlocObserver` –∏
`EventTransformer` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ø–æ–ª–∞–≥–∞–ª—Å—è –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å–∏–Ω–≥–ª—Ç–æ–Ω –∫–∞–∫ –¥–ª—è
`BlocObserver`, —Ç–∞–∫ –∏ –¥–ª—è `EventTransformer`.

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –±—ã–ª–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ:

- –ò–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π `BlocObserver` –∏–ª–∏ `EventTransformer`, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö
  —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —á–∞—Å—Ç—è–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ò–º–µ—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è `BlocObserver` –∏–ª–∏ `EventTransformer`, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ
  –ø–∞–∫–µ—Ç–æ–º
  - –ï—Å–ª–∏ –ø–∞–∫–µ—Ç –∑–∞–≤–∏—Å–µ–ª –æ—Ç `package:bloc` –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π
    `BlocObserver`, –ª—é–±–æ–π –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –ø–∞–∫–µ—Ç–∞ –¥–æ–ª–∂–µ–Ω –±—ã–ª –±—ã –ª–∏–±–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å
    `BlocObserver` –ø–∞–∫–µ—Ç–∞, –ª–∏–±–æ –æ—Ç—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –ø–µ—Ä–µ–¥ `BlocObserver` –ø–∞–∫–µ—Ç–∞.

–¢–∞–∫–∂–µ –±—ã–ª–æ —Å–ª–æ–∂–Ω–µ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑-–∑–∞ –æ–±—â–µ–≥–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ç–µ—Å—Ç–∞—Ö.

Bloc v8.0.0 –≤–≤–æ–¥–∏—Ç –∫–ª–∞—Å—Å `BlocOverrides`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º
–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å `BlocObserver` –∏/–∏–ª–∏ `EventTransformer` –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π `Zone`, –∞
–Ω–µ –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∏–∑–º–µ–Ω—è–µ–º—ã–π —Å–∏–Ω–≥–ª—Ç–æ–Ω.

**v7.x.x**

```dart
void main() {
  Bloc.observer = CustomBlocObserver();
  Bloc.transformer = customEventTransformer();

  // ...
}
```

**v8.0.0**

```dart
void main() {
  BlocOverrides.runZoned(
    () {
      // ...
    },
    blocObserver: CustomBlocObserver(),
    eventTransformer: customEventTransformer(),
  );
}
```

–≠–∫–∑–µ–º–ø–ª—è—Ä—ã `Bloc` –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `BlocObserver` –∏/–∏–ª–∏ `EventTransformer` –¥–ª—è
—Ç–µ–∫—É—â–µ–π `Zone` —á–µ—Ä–µ–∑ `BlocOverrides.current`. –ï—Å–ª–∏ –¥–ª—è –∑–æ–Ω—ã –Ω–µ—Ç `BlocOverrides`,
–æ–Ω–∏ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–Ω–∏–∫–∞–∫–∏—Ö
–∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ø–æ–≤–µ–¥–µ–Ω–∏–∏/—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏).

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–∞–∂–¥–æ–π `Zone` —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ —Å–æ —Å–≤–æ–∏–º–∏
`BlocOverrides`.

```dart
BlocOverrides.runZoned(
  () {
    // BlocObserverA –∏ eventTransformerA
    final overrides = BlocOverrides.current;

    // Bloc'–∏ –≤ —ç—Ç–æ–π –∑–æ–Ω–µ –æ—Ç—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ BlocObserverA
    // –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç eventTransformerA –∫–∞–∫ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
    // ...

    // –ü–æ–∑–∂–µ...
    BlocOverrides.runZoned(
      () {
        // BlocObserverB –∏ eventTransformerB
        final overrides = BlocOverrides.current;

        // Bloc'–∏ –≤ —ç—Ç–æ–π –∑–æ–Ω–µ –æ—Ç—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ BlocObserverB
        // –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç eventTransformerB –∫–∞–∫ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
        // ...
      },
      blocObserver: BlocObserverB(),
      eventTransformer: eventTransformerB(),
    );
  },
  blocObserver: BlocObserverA(),
  eventTransformer: eventTransformerA(),
);
```

#### ‚ùó‚ú® –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏ –æ–± –æ—à–∏–±–∫–∞—Ö

:::note[–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?]

–í bloc v8.0.0 `BlocUnhandledErrorException` —É–¥–∞–ª–µ–Ω. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –ª—é–±—ã–µ
–Ω–µ–ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤—Å–µ–≥–¥–∞ —Å–æ–æ–±—â–∞—é—Ç—Å—è –≤ `onError` –∏ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è
–ø–æ–≤—Ç–æ—Ä–Ω–æ (–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä–µ–∂–∏–º–∞ –æ—Ç–ª–∞–¥–∫–∏ –∏–ª–∏ —Ä–µ–ª–∏–∑–∞). API `addError` —Å–æ–æ–±—â–∞–µ—Ç –æ–±
–æ—à–∏–±–∫–∞—Ö –≤ `onError`, –Ω–æ –Ω–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –∫–∞–∫ –Ω–µ–ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω—ã–µ
–∏—Å–∫–ª—é—á–µ–Ω–∏—è.

:::

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–¶–µ–ª—å —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:

- —Å–¥–µ–ª–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è —á—Ä–µ–∑–≤—ã—á–∞–π–Ω–æ –æ—á–µ–≤–∏–¥–Ω—ã–º–∏, —Å–æ—Ö—Ä–∞–Ω—è—è
  –ø—Ä–∏ —ç—Ç–æ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å bloc
- –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å `addError` –±–µ–∑ –Ω–∞—Ä—É—à–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–†–∞–Ω–µ–µ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å –æ–± –æ—à–∏–±–∫–∞—Ö —Ä–∞–∑–ª–∏—á–∞–ª–∏—Å—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ,
—Ä–∞–±–æ—Ç–∞–ª–æ –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏ –∏–ª–∏ —Ä–µ–ª–∏–∑–∞. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –æ—à–∏–±–∫–∏,
—Å–æ–æ–±—â–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `addError`, —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏—Å—å –∫–∞–∫ –Ω–µ–ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤
—Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –ø–ª–æ—Ö–æ–º—É –æ–ø—ã—Ç—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ API
`addError` (–æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –º–æ–¥—É–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤).

–í v8.0.0 `addError` –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö, –∞
`blocTest` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–≥–æ, —á—Ç–æ –æ—à–∏–±–∫–∏ —Å–æ–æ–±—â–∞—é—Ç—Å—è. –í—Å–µ
–æ—à–∏–±–∫–∏ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Å–æ–æ–±—â–∞—é—Ç—Å—è –≤ `onError`, –æ–¥–Ω–∞–∫–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ
–Ω–µ–ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä–µ–∂–∏–º–∞ –æ—Ç–ª–∞–¥–∫–∏ –∏–ª–∏ —Ä–µ–ª–∏–∑–∞).

#### ‚ùóüßπ –°–¥–µ–ª–∞—Ç—å `BlocObserver` –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º

:::note[–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?]

–í bloc v8.0.0 `BlocObserver` –±—ã–ª –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –≤ `abstract` –∫–ª–∞—Å—Å, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç,
—á—Ç–æ —ç–∫–∑–µ–º–ø–ª—è—Ä `BlocObserver` –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω.

:::

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

`BlocObserver` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–∞–ª—Å—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –ü–æ—Å–∫–æ–ª—å–∫—É
—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è API –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî —ç—Ç–æ no-ops, `BlocObserver` —Ç–µ–ø–µ—Ä—å —è–≤–ª—è–µ—Ç—Å—è
`abstract` –∫–ª–∞—Å—Å–æ–º, —á—Ç–æ–±—ã —á–µ—Ç–∫–æ –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –∫–ª–∞—Å—Å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è,
–∞ –Ω–µ –¥–ª—è –ø—Ä—è–º–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞.

**v7.x.x**

```dart
void main() {
  // –ë—ã–ª–æ –≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞.
  final observer = BlocObserver();
}
```

**v8.0.0**

```dart
class MyBlocObserver extends BlocObserver {...}

void main() {
  // –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞.
  final observer = BlocObserver(); // –û–®–ò–ë–ö–ê

  // –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —Ä–∞—Å—à–∏—Ä—å—Ç–µ `BlocObserver`.
  final observer = MyBlocObserver(); // OK
}
```

#### ‚ùó‚ú® `add` –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç `StateError`, –µ—Å–ª–∏ Bloc –∑–∞–∫—Ä—ã—Ç

:::note[–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?]

–í bloc v8.0.0 –≤—ã–∑–æ–≤ `add` –Ω–∞ –∑–∞–∫—Ä—ã—Ç–æ–º bloc –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ `StateError`.

:::

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–†–∞–Ω–µ–µ –±—ã–ª–æ –≤–æ–∑–º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `add` –Ω–∞ –∑–∞–∫—Ä—ã—Ç–æ–º bloc, –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞
–ø—Ä–æ–≥–ª–∞—Ç—ã–≤–∞–ª–∞—Å—å, —á—Ç–æ –∑–∞—Ç—Ä—É–¥–Ω—è–ª–æ –æ—Ç–ª–∞–¥–∫—É —Ç–æ–≥–æ, –ø–æ—á–µ–º—É –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ –Ω–µ
–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–æ—Å—å. –ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π –±–æ–ª–µ–µ –≤–∏–¥–∏–º—ã–º, –≤ v8.0.0 –≤—ã–∑–æ–≤ `add`
–Ω–∞ –∑–∞–∫—Ä—ã—Ç–æ–º bloc –≤—ã–±—Ä–æ—Å–∏—Ç `StateError`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–æ–æ–±—â–µ–Ω –∫–∞–∫
–Ω–µ–ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–¥–∞–Ω –≤ `onError`.

#### ‚ùó‚ú® `emit` –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç `StateError`, –µ—Å–ª–∏ Bloc –∑–∞–∫—Ä—ã—Ç

:::note[–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?]

–í bloc v8.0.0 –≤—ã–∑–æ–≤ `emit` –≤–Ω—É—Ç—Ä–∏ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ bloc –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ `StateError`.

:::

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–†–∞–Ω–µ–µ –±—ã–ª–æ –≤–æ–∑–º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `emit` –≤–Ω—É—Ç—Ä–∏ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ bloc, –∏ –Ω–∏–∫–∞–∫–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
—Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ, –Ω–æ —Ç–∞–∫–∂–µ –Ω–µ –±—ã–ª–æ –Ω–∏–∫–∞–∫–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –Ω–∞ —Ç–æ, —á—Ç–æ –ø–æ—à–ª–æ –Ω–µ
—Ç–∞–∫, —á—Ç–æ –∑–∞—Ç—Ä—É–¥–Ω—è–ª–æ –æ—Ç–ª–∞–¥–∫—É. –ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π –±–æ–ª–µ–µ –≤–∏–¥–∏–º—ã–º, –≤ v8.0.0
–≤—ã–∑–æ–≤ `emit` –≤–Ω—É—Ç—Ä–∏ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ bloc –≤—ã–±—Ä–æ—Å–∏—Ç `StateError`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–æ–æ–±—â–µ–Ω
–∫–∞–∫ –Ω–µ–ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–¥–∞–Ω –≤ `onError`.

#### ‚ùóüßπ –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö API

:::note[–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?]

–í bloc v8.0.0 –≤—Å–µ —Ä–∞–Ω–µ–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ API –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã.

:::

##### –ö—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ

- `mapEventToState` —É–¥–∞–ª–µ–Ω –≤ –ø–æ–ª—å–∑—É `on<Event>`
- `transformEvents` —É–¥–∞–ª–µ–Ω –≤ –ø–æ–ª—å–∑—É API `EventTransformer`
- typedef `TransitionFunction` —É–¥–∞–ª–µ–Ω –≤ –ø–æ–ª—å–∑—É API `EventTransformer`
- `listen` —É–¥–∞–ª–µ–Ω –≤ –ø–æ–ª—å–∑—É `stream.listen`

### `package:bloc_test`

#### ‚ú® `MockBloc` –∏ `MockCubit` –±–æ–ª—å—à–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç `registerFallbackValue`

:::note[–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?]

–í bloc_test v9.0.0 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ —è–≤–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å
`registerFallbackValue` –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `MockBloc` –∏–ª–∏ `MockCubit`.

:::

##### –ö—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ

`registerFallbackValue` —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –º–∞—Ç—á–µ—Ä–∞ `any()` –∏–∑
`package:mocktail` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ç–∏–ø–∞. –†–∞–Ω–µ–µ `registerFallbackValue` –±—ã–ª
–Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ `Event` –∏ `State` –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `MockBloc` –∏–ª–∏
`MockCubit`.

**v8.x.x**

```dart
class FakeMyEvent extends Fake implements MyEvent {}
class FakeMyState extends Fake implements MyState {}
class MyMockBloc extends MockBloc<MyEvent, MyState> implements MyBloc {}

void main() {
  setUpAll(() {
    registerFallbackValue(FakeMyEvent());
    registerFallbackValue(FakeMyState());
  });

  // –¢–µ—Å—Ç—ã...
}
```

**v9.0.0**

```dart
class MyMockBloc extends MockBloc<MyEvent, MyState> implements MyBloc {}

void main() {
  // –¢–µ—Å—Ç—ã...
}
```

### `package:hydrated_bloc`

#### ‚ùó‚ú® –í–≤–µ–¥–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ API `HydratedBlocOverrides`

:::note[–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?]

–í hydrated_bloc v8.0.0 `HydratedBloc.storage` –±—ã–ª —É–¥–∞–ª–µ–Ω –≤ –ø–æ–ª—å–∑—É API
`HydratedBlocOverrides`.

:::

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–†–∞–Ω–µ–µ –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `Storage` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–π
—Å–∏–Ω–≥–ª—Ç–æ–Ω.

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –±—ã–ª–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π `Storage`, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö
—Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —á–∞—Å—Ç—è–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –¢–∞–∫–∂–µ –±—ã–ª–æ —Å–ª–æ–∂–Ω–µ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑-–∑–∞ –æ–±—â–µ–≥–æ
–≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ç–µ—Å—Ç–∞—Ö.

`HydratedBloc` v8.0.0 –≤–≤–æ–¥–∏—Ç –∫–ª–∞—Å—Å `HydratedBlocOverrides`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç
—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å `Storage` –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π `Zone`, –∞ –Ω–µ –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞
–≥–ª–æ–±–∞–ª—å–Ω—ã–π –∏–∑–º–µ–Ω—è–µ–º—ã–π —Å–∏–Ω–≥–ª—Ç–æ–Ω.

**v7.x.x**

```dart
void main() async {
  HydratedBloc.storage = await HydratedStorage.build(
    storageDirectory: await getApplicationSupportDirectory(),
  );

  // ...
}
```

**v8.0.0**

```dart
void main() {
  final storage = await HydratedStorage.build(
    storageDirectory: await getApplicationSupportDirectory(),
  );

  HydratedBlocOverrides.runZoned(
    () {
      // ...
    },
    storage: storage,
  );
}
```

–≠–∫–∑–µ–º–ø–ª—è—Ä—ã `HydratedBloc` –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Storage` –¥–ª—è —Ç–µ–∫—É—â–µ–π `Zone` —á–µ—Ä–µ–∑
`HydratedBlocOverrides.current`.

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–∞–∂–¥–æ–π `Zone` —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ —Å–æ —Å–≤–æ–∏–º–∏
`BlocOverrides`.

## v7.2.0

### `package:bloc`

#### ‚ú® –í–≤–µ–¥–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ API `on<Event>`

:::note[–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?]

–í bloc v7.2.0 `mapEventToState` –±—ã–ª –æ–±—ä—è–≤–ª–µ–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–º –≤ –ø–æ–ª—å–∑—É `on<Event>`.
`mapEventToState` –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –≤ bloc v8.0.0.

:::

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

API `on<Event>` –±—ã–ª –≤–≤–µ–¥–µ–Ω –≤ —Ä–∞–º–∫–∞—Ö
[[–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ] –ó–∞–º–µ–Ω–∏—Ç—å mapEventToState –Ω–∞ on\<Event\> –≤ Bloc](https://github.com/felangel/bloc/issues/2526).
–ò–∑-–∑–∞ [–ø—Ä–æ–±–ª–µ–º—ã –≤ Dart](https://github.com/dart-lang/sdk/issues/44616) –Ω–µ –≤—Å–µ–≥–¥–∞
–æ—á–µ–≤–∏–¥–Ω–æ, –∫–∞–∫–∏–º –±—É–¥–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `state` –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏
–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ (`async*`). –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Å–ø–æ—Å–æ–±—ã –æ–±–æ–π—Ç–∏ —ç—Ç—É
–ø—Ä–æ–±–ª–µ–º—É, –æ–¥–Ω–∏–º –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ bloc —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å.
API `on<Event>` –±—ã–ª —Å–æ–∑–¥–∞–Ω, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –¥–ª—è
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –ª—é–±—É—é –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç—å –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
—Å–æ—Å—Ç–æ—è–Ω–∏—è.

:::tip

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
[–ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ –ø–æ–ª–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ](https://github.com/felangel/bloc/issues/2526).

:::

**–ö—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ**

`on<E>` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π —Ç–∏–ø–∞ `E`.
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ–±—ã—Ç–∏—è –±—É–¥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `on<E>`,
–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç `mapEventToState`, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è `–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ`.

**v7.1.0**

```dart
abstract class CounterEvent {}
class Increment extends CounterEvent {}

class CounterBloc extends Bloc<CounterEvent, int> {
  CounterBloc() : super(0);

  @override
  Stream<int> mapEventToState(CounterEvent event) async* {
    if (event is Increment) {
      yield state + 1;
    }
  }
}
```

**v7.2.0**

```dart
abstract class CounterEvent {}
class Increment extends CounterEvent {}

class CounterBloc extends Bloc<CounterEvent, int> {
  CounterBloc() : super(0) {
    on<Increment>((event, emit) => emit(state + 1));
  }
}
```

:::note

–ö–∞–∂–¥–∞—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `EventHandler` —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ, –ø–æ—ç—Ç–æ–º—É
–≤–∞–∂–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–∏–ø–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã
—Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏–º–µ–Ω–∏—Ç—å.

:::

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ—á–Ω–æ —Ç–∞–∫–æ–µ –∂–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –∫–∞–∫ –≤ v7.1.0, –≤—ã –º–æ–∂–µ—Ç–µ
–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–¥–∏–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å
—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä `sequential`:

```dart
import 'package:bloc/bloc.dart';
import 'package:bloc_concurrency/bloc_concurrency.dart';

class MyBloc extends Bloc<MyEvent, MyState> {
  MyBloc() : super(MyState()) {
    on<MyEvent>(_onEvent, transformer: sequential())
  }

  FutureOr<void> _onEvent(MyEvent event, Emitter<MyState> emit) async {
    // TODO: –ª–æ–≥–∏–∫–∞ –∏–¥–µ—Ç —Å—é–¥–∞...
  }
}
```

–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å `EventTransformer` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—Å–µ—Ö bloc'–æ–≤
–≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

```dart
import 'package:bloc/bloc.dart';
import 'package:bloc_concurrency/bloc_concurrency.dart';

void main() {
  Bloc.transformer = sequential<dynamic>();
  ...
}
```

#### ‚ú® –í–≤–µ–¥–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ API `EventTransformer`

:::note[–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?]

–í bloc v7.2.0 `transformEvents` –±—ã–ª –æ–±—ä—è–≤–ª–µ–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–º –≤ –ø–æ–ª—å–∑—É API
`EventTransformer`. `transformEvents` –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –≤ bloc v8.0.0.

:::

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

API `on<Event>` –æ—Ç–∫—Ä—ã–ª –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–∞
—Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π. –ë—ã–ª –≤–≤–µ–¥–µ–Ω –Ω–æ–≤—ã–π typedef
`EventTransformer`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–π
–ø–æ—Ç–æ–∫ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π, –∞ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å –æ–¥–∏–Ω —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä
—Å–æ–±—ã—Ç–∏–π –¥–ª—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π.

**–ö—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ**

`EventTransformer` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø—Ä–∏–µ–º –≤—Ö–æ–¥—è—â–µ–≥–æ –ø–æ—Ç–æ–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤–º–µ—Å—Ç–µ —Å
`EventMapper` (–≤–∞—à –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è) –∏ –≤–æ–∑–≤—Ä–∞—Ç –Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞ —Å–æ–±—ã—Ç–∏–π.

```dart
typedef EventTransformer<Event> = Stream<Event> Function(Stream<Event> events, EventMapper<Event> mapper)
```

`EventTransformer` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∏ –≤—ã–≥–ª—è–¥–∏—Ç
–ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

```dart
EventTransformer<E> concurrent<E>() {
  return (events, mapper) => events.flatMap(mapper);
}
```

:::tip

–û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å
[package:bloc_concurrency](https://pub.dev/packages/bloc_concurrency) –¥–ª—è
–ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–µ–¥–≤–∑—è—Ç–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–æ–≤ —Å–æ–±—ã—Ç–∏–π

:::

**v7.1.0**

```dart
@override
Stream<Transition<MyEvent, MyState>> transformEvents(events, transitionFn) {
  return events
    .debounceTime(const Duration(milliseconds: 300))
    .flatMap(transitionFn);
}
```

**v7.2.0**

```dart
/// –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π `EventTransformer`
EventTransformer<MyEvent> debounce<MyEvent>(Duration duration) {
  return (events, mapper) => events.debounceTime(duration).flatMap(mapper);
}

MyBloc() : super(MyState()) {
  /// –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π `EventTransformer` –∫ `EventHandler`
  on<MyEvent>(_onEvent, transformer: debounce(const Duration(milliseconds: 300)))
}
```

#### ‚ö†Ô∏è –£—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏–µ API `transformTransitions`

:::note[–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?]

–í bloc v7.2.0 `transformTransitions` –±—ã–ª –æ–±—ä—è–≤–ª–µ–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–º –≤ –ø–æ–ª—å–∑—É
–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è API `stream`. `transformTransitions` –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –≤ bloc v8.0.0.

:::

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ì–µ—Ç—Ç–µ—Ä `stream` –≤ `Bloc` —É–ø—Ä–æ—â–∞–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Å—Ö–æ–¥—è—â–µ–≥–æ –ø–æ—Ç–æ–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π,
–ø–æ—ç—Ç–æ–º—É –±–æ–ª—å—à–µ –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π API
`transformTransitions`.

**–ö—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ**

**v7.1.0**

```dart
@override
Stream<Transition<Event, State>> transformTransitions(
  Stream<Transition<Event, State>> transitions,
) {
  return transitions.debounceTime(const Duration(milliseconds: 42));
}
```

**v7.2.0**

```dart
@override
Stream<State> get stream => super.stream.debounceTime(const Duration(milliseconds: 42));
```

## v7.0.0

### `package:bloc`

#### ‚ùó Bloc –∏ Cubit —Ä–∞—Å—à–∏—Ä—è—é—Ç BlocBase

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ö–∞–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É bloc'–∞–º–∏ –∏ cubit'–∞–º–∏ –±—ã–ª–∏ –Ω–µ–º–Ω–æ–≥–æ –Ω–µ—É–¥–æ–±–Ω—ã–º–∏.
–ö–æ–≥–¥–∞ cubit –±—ã–ª –≤–ø–µ—Ä–≤—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω, –æ–Ω –Ω–∞—á–∏–Ω–∞–ª—Å—è –∫–∞–∫ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è bloc'–æ–≤,
—á—Ç–æ –∏–º–µ–ª–æ —Å–º—ã—Å–ª, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –∏–º–µ–ª –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, –∞ bloc'–∏
–ø—Ä–æ—Å—Ç–æ —Ä–∞—Å—à–∏—Ä—è–ª–∏ Cubit –∏ –æ–ø—Ä–µ–¥–µ–ª—è–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ API. –≠—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º
–Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞–º:

- –í—Å–µ API –¥–æ–ª–∂–Ω—ã –±—ã–ª–∏ –±—ã –ª–∏–±–æ –±—ã—Ç—å –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã, —á—Ç–æ–±—ã –ø—Ä–∏–Ω–∏–º–∞—Ç—å cubit –¥–ª—è
  —Ç–æ—á–Ω–æ—Å—Ç–∏, –ª–∏–±–æ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã–ª–∏ –±—ã –±—ã—Ç—å –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–∫ bloc –¥–ª—è
  –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –¥–∞–∂–µ –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏ —ç—Ç–æ –Ω–µ—Ç–æ—á–Ω–æ
  ([#1708](https://github.com/felangel/bloc/issues/1708),
  [#1560](https://github.com/felangel/bloc/issues/1560)).

- Cubit –¥–æ–ª–∂–µ–Ω –±—ã–ª —Ä–∞—Å—à–∏—Ä—è—Ç—å Stream –∏ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å EventSink, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –æ–±—â—É—é
  –±–∞–∑—É, –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ—Ç–æ—Ä–æ–π –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–∏–¥–∂–µ—Ç—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ BlocBuilder,
  BlocListener –∏ —Ç. –¥. ([#1429](https://github.com/felangel/bloc/issues/1429)).

–ü–æ–∑–∂–µ –º—ã —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏ —Å –∏–Ω–≤–µ—Ä—Å–∏–µ–π –æ—Ç–Ω–æ—à–µ–Ω–∏–π –∏ —Å–¥–µ–ª–∞–ª–∏ bloc –±–∞–∑–æ–≤—ã–º
–∫–ª–∞—Å—Å–æ–º, —á—Ç–æ —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–∏–ª–æ –ø–µ—Ä–≤—ã–π –ø—É–Ω–∫—Ç –≤—ã—à–µ, –Ω–æ –ø—Ä–∏–≤–µ–ª–æ –∫ –¥—Ä—É–≥–∏–º –ø—Ä–æ–±–ª–µ–º–∞–º:

- API cubit —Ä–∞–∑–¥—É—Ç –∏–∑-–∑–∞ –±–∞–∑–æ–≤—ã—Ö API bloc, —Ç–∞–∫–∏—Ö –∫–∞–∫ mapEventToState, add –∏ —Ç.
  –¥. ([#2228](https://github.com/felangel/bloc/issues/2228))
  - –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å —ç—Ç–∏ API –∏ –ª–æ–º–∞—Ç—å –≤–µ—â–∏
- –£ –Ω–∞—Å –≤—Å–µ –µ—â–µ –µ—Å—Ç—å —Ç–∞ –∂–µ –ø—Ä–æ–±–ª–µ–º–∞ —Å cubit, —Ä–∞—Å–∫—Ä—ã–≤–∞—é—â–∏–º –≤–µ—Å—å API stream, –∫–∞–∫ –∏
  —Ä–∞–Ω—å—à–µ ([#1429](https://github.com/felangel/bloc/issues/1429))

–ß—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å —ç—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã, –º—ã –≤–≤–µ–ª–∏ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –∫–∞–∫ –¥–ª—è `Bloc`, —Ç–∞–∫ –∏ –¥–ª—è
`Cubit` –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º `BlocBase`, —á—Ç–æ–±—ã –≤—ã—à–µ—Å—Ç–æ—è—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –º–æ–≥–ª–∏
–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –∫–∞–∫ —Å —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ bloc, —Ç–∞–∫ –∏ —Å cubit, –Ω–æ –±–µ–∑ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –≤—Å–µ–≥–æ
API `Stream` –∏ `EventSink` –Ω–∞–ø—Ä—è–º—É—é.

**–ö—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ**

**BlocObserver**

**v6.1.x**

```dart
class SimpleBlocObserver extends BlocObserver {
  @override
  void onCreate(Cubit cubit) {...}

  @override
  void onEvent(Bloc bloc, Object event) {...}

  @override
  void onChange(Cubit cubit, Object event) {...}

  @override
  void onTransition(Bloc bloc, Transition transition) {...}

  @override
  void onError(Cubit cubit, Object error, StackTrace stackTrace) {...}

  @override
  void onClose(Cubit cubit) {...}
}
```

**v7.0.0**

```dart
class SimpleBlocObserver extends BlocObserver {
  @override
  void onCreate(BlocBase bloc) {...}

  @override
  void onEvent(Bloc bloc, Object event) {...}

  @override
  void onChange(BlocBase bloc, Object? event) {...}

  @override
  void onTransition(Bloc bloc, Transition transition) {...}

  @override
  void onError(BlocBase bloc, Object error, StackTrace stackTrace) {...}

  @override
  void onClose(BlocBase bloc) {...}
}
```

**Bloc/Cubit**

**v6.1.x**

```dart
final bloc = MyBloc();
bloc.listen((state) {...});

final cubit = MyCubit();
cubit.listen((state) {...});
```

**v7.0.0**

```dart
final bloc = MyBloc();
bloc.stream.listen((state) {...});

final cubit = MyCubit();
cubit.stream.listen((state) {...});
```

### `package:bloc_test`

#### ‚ùóseed –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ß—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω—è–µ–º–æ–µ –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
–æ–±–Ω–æ–≤–ª—è—Ç—å –≤ `setUp`, `seed` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é.

**–ö—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ**

**v7.x.x**

```dart
blocTest(
  '...',
  seed: MyState(),
  ...
);
```

**v8.0.0**

```dart
blocTest(
  '...',
  seed: () => MyState(),
  ...
);
```

#### ‚ùóexpect –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –º–∞—Ç—á–µ—Ä–æ–≤

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ß—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω—è–µ–º–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –≤
`setUp`, `expect` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é. `expect` —Ç–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `Matchers`.

**–ö—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ**

**v7.x.x**

```dart
blocTest(
  '...',
  expect: [MyStateA(), MyStateB()],
  ...
);
```

**v8.0.0**

```dart
blocTest(
  '...',
  expect: () => [MyStateA(), MyStateB()],
  ...
);

// –≠—Ç–æ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å `Matcher`
blocTest(
  '...',
  expect: () => contains(MyStateA()),
  ...
);
```

#### ‚ùóerrors –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –º–∞—Ç—á–µ—Ä–æ–≤

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ß—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω—è–µ–º—ã–µ –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –≤
`setUp`, `errors` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é. `errors` —Ç–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `Matchers`.

**–ö—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ**

**v7.x.x**

```dart
blocTest(
  '...',
  errors: [MyError()],
  ...
);
```

**v8.0.0**

```dart
blocTest(
  '...',
  errors: () => [MyError()],
  ...
);

// –≠—Ç–æ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å `Matcher`
blocTest(
  '...',
  errors: () => contains(MyError()),
  ...
);
```

#### ‚ùóMockBloc –∏ MockCubit

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∑–∞–≥–ª—É—à–µ–∫ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö API `MockBloc` –∏ `MockCubit`
—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ —á–∞—Å—Ç—å –ø–∞–∫–µ—Ç–∞ `bloc_test`. –†–∞–Ω–µ–µ `MockBloc` –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –¥–ª—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `Bloc`, —Ç–∞–∫ –∏ –¥–ª—è `Cubit`, —á—Ç–æ –±—ã–ª–æ
–Ω–µ–∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ.

**–ö—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ**

**v7.x.x**

```dart
class MockMyBloc extends MockBloc<MyState> implements MyBloc {}
class MockMyCubit extends MockBloc<MyState> implements MyBloc {}
```

**v8.0.0**

```dart
class MockMyBloc extends MockBloc<MyEvent, MyState> implements MyBloc {}
class MockMyCubit extends MockCubit<MyState> implements MyCubit {}
```

#### ‚ùó–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Mocktail

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ò–∑-–∑–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π null-safe
[package:mockito](https://pub.dev/packages/mockito), –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö
[–∑–¥–µ—Å—å](https://github.com/dart-lang/mockito/blob/master/NULL_SAFETY_README.md#problems-with-typical-mocking-and-stubbing),
[package:mocktail](https://pub.dev/packages/mocktail) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `MockBloc` –∏
`MockCubit`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞–∫–æ–º—ã–π API
–¥–ª—è –º–æ–∫–æ–≤ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é –ø–∏—Å–∞—Ç—å –∑–∞–≥–ª—É—à–∫–∏ –∏–ª–∏ –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
–∫–æ–¥–∞.

**–ö—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ**

**v7.x.x**

```dart
import 'package:mockito/mockito.dart';

...

when(bloc.state).thenReturn(MyState());
verify(bloc.add(any)).called(1);
```

**v8.0.0**

```dart
import 'package:mocktail/mocktail.dart';

...

when(() => bloc.state).thenReturn(MyState());
verify(() => bloc.add(any())).called(1);
```

> –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫
> [#347](https://github.com/dart-lang/mockito/issues/347), –∞ —Ç–∞–∫–∂–µ –∫
> [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ mocktail](https://github.com/felangel/mocktail/tree/main/packages/mocktail)
> –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

### `package:flutter_bloc`

#### ‚ùó –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `cubit` –≤ `bloc`

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –≤ `package:bloc` –¥–ª—è –≤–≤–µ–¥–µ–Ω–∏—è `BlocBase`, –∫–æ—Ç–æ—Ä—ã–π
—Ä–∞—Å—à–∏—Ä—è—é—Ç `Bloc` –∏ `Cubit`, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `BlocBuilder`, `BlocConsumer` –∏
`BlocListener` –±—ã–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã –∏–∑ `cubit` –≤ `bloc`, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤–∏–¥–∂–µ—Ç—ã
—Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ç–∏–ø–æ–º `BlocBase`. –≠—Ç–æ —Ç–∞–∫–∂–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å–æ–≥–ª–∞—Å—É–µ—Ç—Å—è —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º
–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏, –Ω–∞–¥–µ—é—Å—å, —É–ª—É—á—à–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å.

**–ö—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ**

**v6.1.x**

```dart
BlocBuilder(
  cubit: myBloc,
  ...
)

BlocListener(
  cubit: myBloc,
  ...
)

BlocConsumer(
  cubit: myBloc,
  ...
)
```

**v7.0.0**

```dart
BlocBuilder(
  bloc: myBloc,
  ...
)

BlocListener(
  bloc: myBloc,
  ...
)

BlocConsumer(
  bloc: myBloc,
  ...
)
```

### `package:hydrated_bloc`

#### ‚ùóstorageDirectory —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –ø—Ä–∏ –≤—ã–∑–æ–≤–µ HydratedStorage.build

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å `package:hydrated_bloc` —á–∏—Å—Ç—ã–º –ø–∞–∫–µ—Ç–æ–º Dart, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç
[package:path_provider](https://pub.dev/packages/path_provider) –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞, –∏
–ø–∞—Ä–∞–º–µ—Ç—Ä `storageDirectory` –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `HydratedStorage.build` —è–≤–ª—è–µ—Ç—Å—è
–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –∏ –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `getTemporaryDirectory` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

**–ö—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ**

**v6.x.x**

```dart
HydratedBloc.storage = await HydratedStorage.build();
```

**v7.0.0**

```dart
import 'package:path_provider/path_provider.dart';

...

HydratedBloc.storage = await HydratedStorage.build(
  storageDirectory: await getTemporaryDirectory(),
);
```

## v6.1.0

### `package:flutter_bloc`

#### ‚ùócontext.bloc –∏ context.repository —É—Å—Ç–∞—Ä–µ–ª–∏ –≤ –ø–æ–ª—å–∑—É context.read –∏ context.watch

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

`context.read`, `context.watch` –∏ `context.select` –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è
—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º API [provider](https://pub.dev/packages/provider), —Å
–∫–æ—Ç–æ—Ä—ã–º –∑–Ω–∞–∫–æ–º—ã –º–Ω–æ–≥–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏, –∏ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º, –ø–æ–¥–Ω—è—Ç—ã—Ö
—Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º. –ß—Ç–æ–±—ã –ø–æ–≤—ã—Å–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–¥–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å,
`context.bloc` –±—ã–ª –æ–±—ä—è–≤–ª–µ–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –µ–≥–æ –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –ª–∏–±–æ
`context.read`, –ª–∏–±–æ `context.watch` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ –æ–Ω
–Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤–Ω—É—Ç—Ä–∏ `build`.

**context.watch**

`context.watch` —Ä–µ—à–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ
[MultiBlocBuilder](https://github.com/felangel/bloc/issues/538), –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã
–º–æ–∂–µ–º –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ bloc'–∞–º–∏ –≤ –æ–¥–Ω–æ–º `Builder`, —á—Ç–æ–±—ã –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å UI
–Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π:

```dart
Builder(
  builder: (context) {
    final stateA = context.watch<BlocA>().state;
    final stateB = context.watch<BlocB>().state;
    final stateC = context.watch<BlocC>().state;

    // –≤–µ—Ä–Ω—É—Ç—å Widget, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è BlocA, BlocB –∏ BlocC
  }
);
```

**context.select**

`context.select` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å/–æ–±–Ω–æ–≤–ª—è—Ç—å UI –Ω–∞ –æ—Å–Ω–æ–≤–µ —á–∞—Å—Ç–∏
—Å–æ—Å—Ç–æ—è–Ω–∏—è bloc –∏ —Ä–µ—à–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ
[–±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–≥–æ buildWhen](https://github.com/felangel/bloc/issues/1521).

```dart
final name = context.select((UserBloc bloc) => bloc.state.user.name);
```

–ü—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –≤—ã—à–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∏ –ø–µ—Ä–µ—Å—Ç—Ä–æ–∏—Ç—å –≤–∏–¥–∂–µ—Ç
—Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –∏–º—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑–º–µ–Ω—è–µ—Ç—Å—è.

**context.read**

–•–æ—Ç—è –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ `context.read` –∏–¥–µ–Ω—Ç–∏—á–µ–Ω `context.bloc`, –µ—Å—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ
—Ç–æ–Ω–∫–∏–µ, –Ω–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è. –û–±–∞ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ bloc —Å –ø–æ–º–æ—â—å—é
`BuildContext` –∏ –Ω–µ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –ø–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω–∏—è–º; –æ–¥–Ω–∞–∫–æ `context.read` –Ω–µ –º–æ–∂–µ—Ç
–±—ã—Ç—å –≤—ã–∑–≤–∞–Ω –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ `build`. –ï—Å—Ç—å –¥–≤–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `context.bloc` –≤–Ω—É—Ç—Ä–∏ `build`:

1. **–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é bloc**

```dart
@override
Widget build(BuildContext context) {
  final state = context.bloc<MyBloc>().state;
  return Text('$state');
}
```

–ü—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–µ –≤—ã—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–¥–≤–µ—Ä–∂–µ–Ω–æ –æ—à–∏–±–∫–∞–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤–∏–¥–∂–µ—Ç `Text` –Ω–µ
–±—É–¥–µ—Ç –ø–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω, –µ—Å–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ bloc –∏–∑–º–µ–Ω–∏—Ç—Å—è. –í —ç—Ç–æ–º —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Å–ª–µ–¥—É–µ—Ç
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏–±–æ `BlocBuilder`, –ª–∏–±–æ `context.watch`.

```dart
@override
Widget build(BuildContext context) {
  final state = context.watch<MyBloc>().state;
  return Text('$state');
}
```

–∏–ª–∏

```dart
@override
Widget build(BuildContext context) {
  return BlocBuilder<MyBloc, MyState>(
    builder: (context, state) => Text('$state'),
  );
}
```

:::note

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `context.watch` –≤ –∫–æ—Ä–Ω–µ –º–µ—Ç–æ–¥–∞ `build` –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ —Ç–æ–º—É, —á—Ç–æ –≤–µ—Å—å
–≤–∏–¥–∂–µ—Ç –±—É–¥–µ—Ç –ø–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è bloc. –ï—Å–ª–∏ –≤–µ—Å—å –≤–∏–¥–∂–µ—Ç –Ω–µ –Ω—É–∂–Ω–æ
–ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞—Ç—å, –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `BlocBuilder`, —á—Ç–æ–±—ã –æ–±–µ—Ä–Ω—É—Ç—å —á–∞—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ
–¥–æ–ª–∂–Ω—ã –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞—Ç—å—Å—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Builder` —Å `context.watch` –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
–ø–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω–∏–π, –ª–∏–±–æ —Ä–∞–∑–±–µ–π—Ç–µ –≤–∏–¥–∂–µ—Ç –Ω–∞ –±–æ–ª–µ–µ –º–µ–ª–∫–∏–µ –≤–∏–¥–∂–µ—Ç—ã.

:::

2. **–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ bloc –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è**

```dart
@override
Widget build(BuildContext context) {
  final bloc = context.bloc<MyBloc>();
  return ElevatedButton(
    onPressed: () => bloc.add(MyEvent()),
    ...
  )
}
```

–ü—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–µ –≤—ã—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–æ–∏—Å–∫—É
bloc –Ω–∞ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω–∏–∏, –∫–æ–≥–¥–∞ bloc –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
–Ω–∞–∂–∏–º–∞–µ—Ç `ElevatedButton`. –í —ç—Ç–æ–º —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
`context.read` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ bloc –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Ç–∞–º, –≥–¥–µ –æ–Ω –Ω—É–∂–µ–Ω (–≤ –¥–∞–Ω–Ω–æ–º
—Å–ª—É—á–∞–µ –≤ –∫–æ–ª–±—ç–∫–µ `onPressed`).

```dart
@override
Widget build(BuildContext context) {
  return ElevatedButton(
    onPressed: () => context.read<MyBloc>().add(MyEvent()),
    ...
  )
}
```

**–ö—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ**

**v6.0.x**

```dart
@override
Widget build(BuildContext context) {
  final bloc = context.bloc<MyBloc>();
  return ElevatedButton(
    onPressed: () => bloc.add(MyEvent()),
    ...
  )
}
```

**v6.1.x**

```dart
@override
Widget build(BuildContext context) {
  return ElevatedButton(
    onPressed: () => context.read<MyBloc>().add(MyEvent()),
    ...
  )
}
```

?> –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø –∫ bloc –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è, –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ –¥–æ—Å—Ç—É–ø –∫ bloc,
–∏—Å–ø–æ–ª—å–∑—É—è `context.read` –≤ –∫–æ–ª–±—ç–∫–µ, –≥–¥–µ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ.

**v6.0.x**

```dart
@override
Widget build(BuildContext context) {
  final state = context.bloc<MyBloc>().state;
  return Text('$state');
}
```

**v6.1.x**

```dart
@override
Widget build(BuildContext context) {
  final state = context.watch<MyBloc>().state;
  return Text('$state');
}
```

?> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `context.watch` –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é bloc, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è,
—á—Ç–æ –≤–∏–¥–∂–µ—Ç –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

## v6.0.0

### `package:bloc`

#### ‚ùóBlocObserver onError –ø—Ä–∏–Ω–∏–º–∞–µ—Ç Cubit

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ò–∑-–∑–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ `Cubit`, `onError` —Ç–µ–ø–µ—Ä—å —è–≤–ª—è–µ—Ç—Å—è –æ–±—â–∏–º –∫–∞–∫ –¥–ª—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
`Bloc`, —Ç–∞–∫ –∏ –¥–ª—è `Cubit`. –ü–æ—Å–∫–æ–ª—å–∫—É `Cubit` —è–≤–ª—è–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–º, `BlocObserver`
–±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ç–∏–ø `Cubit`, –∞ –Ω–µ —Ç–∏–ø `Bloc` –≤ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ `onError`.

**v5.x.x**

```dart
class MyBlocObserver extends BlocObserver {
  @override
  void onError(Bloc bloc, Object error, StackTrace stackTrace) {
    super.onError(bloc, error, stackTrace);
  }
}
```

**v6.0.0**

```dart
class MyBlocObserver extends BlocObserver {
  @override
  void onError(Cubit cubit, Object error, StackTrace stackTrace) {
    super.onError(cubit, error, stackTrace);
  }
}
```

#### ‚ùóBloc –Ω–µ –∏—Å–ø—É—Å–∫–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –ø–æ–¥–ø–∏—Å–∫–µ

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–≠—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±—ã–ª–æ –≤–Ω–µ—Å–µ–Ω–æ –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è `Bloc` –∏ `Cubit` —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º
–ø–æ–≤–µ–¥–µ–Ω–∏–µ–º `Stream` –≤ `Dart`. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞—Ä–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é –≤
–∫–æ–Ω—Ç–µ–∫—Å—Ç–µ `Cubit` –ø—Ä–∏–≤–µ–ª–æ –∫–æ –º–Ω–æ–≥–∏–º –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã–º –ø–æ–±–æ—á–Ω—ã–º —ç—Ñ—Ñ–µ–∫—Ç–∞–º –∏ –≤ —Ü–µ–ª–æ–º
—É—Å–ª–æ–∂–Ω–∏–ª–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥—Ä—É–≥–∏—Ö –ø–∞–∫–µ—Ç–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ `flutter_bloc` –∏
`bloc_test`, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (—Ç—Ä–µ–±—É—é—â–∏–µ `skip(1)` –∏ —Ç. –¥.).

**v5.x.x**

```dart
final bloc = MyBloc();
bloc.listen(print);
```

–†–∞–Ω–µ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –≤—ã—à–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç –≤—ã–≤–æ–¥–∏–ª –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ bloc, –∑–∞ –∫–æ—Ç–æ—Ä—ã–º
—Å–ª–µ–¥–æ–≤–∞–ª–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è.

**v6.x.x**

–í v6.0.0 –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –≤—ã—à–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç –Ω–µ –≤—ã–≤–æ–¥–∏—Ç –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –≤—ã–≤–æ–¥–∏—Ç
—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è. –ü—Ä–µ–¥—ã–¥—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å
–¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```dart
final bloc = MyBloc();
print(bloc.state);
bloc.listen(print);
```

?> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –≠—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–≤–ª–∏—è–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≤–∏—Å–∏—Ç –æ—Ç
–ø—Ä—è–º—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ –Ω–∞ bloc. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `BlocBuilder`, `BlocListener` –∏–ª–∏
`BlocConsumer` –Ω–µ –±—É–¥–µ—Ç –∑–∞–º–µ—Ç–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ–≤–µ–¥–µ–Ω–∏–∏.

### `package:bloc_test`

#### ‚ùóMockBloc —Ç—Ä–µ–±—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–∏–ø State

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–≠—Ç–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –ª–∏—à–Ω–∏–π –∫–æ–¥, –∞ —Ç–∞–∫–∂–µ –¥–µ–ª–∞–µ—Ç `MockBloc` —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º
—Å `Cubit`.

**v5.x.x**

```dart
class MockCounterBloc extends MockBloc<CounterEvent, int> implements CounterBloc {}
```

**v6.0.0**

```dart
class MockCounterBloc extends MockBloc<int> implements CounterBloc {}
```

#### ‚ùówhenListen —Ç—Ä–µ–±—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–∏–ø State

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–≠—Ç–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –ª–∏—à–Ω–∏–π –∫–æ–¥, –∞ —Ç–∞–∫–∂–µ –¥–µ–ª–∞–µ—Ç `whenListen`
—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º —Å `Cubit`.

**v5.x.x**

```dart
whenListen<CounterEvent,int>(bloc, Stream.fromIterable([0, 1, 2, 3]));
```

**v6.0.0**

```dart
whenListen<int>(bloc, Stream.fromIterable([0, 1, 2, 3]));
```

#### ‚ùóblocTest –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Ç–∏–ø Event

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–≠—Ç–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –ª–∏—à–Ω–∏–π –∫–æ–¥, –∞ —Ç–∞–∫–∂–µ –¥–µ–ª–∞–µ—Ç `blocTest` —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º
—Å `Cubit`.

**v5.x.x**

```dart
blocTest<CounterBloc, CounterEvent, int>(
  'emits [1] when increment is called',
  build: () async => CounterBloc(),
  act: (bloc) => bloc.add(CounterEvent.increment),
  expect: const <int>[1],
);
```

**v6.0.0**

```dart
blocTest<CounterBloc, int>(
  'emits [1] when increment is called',
  build: () => CounterBloc(),
  act: (bloc) => bloc.add(CounterEvent.increment),
  expect: const <int>[1],
);
```

#### ‚ùóblocTest skip –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–≤–µ–Ω 0

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–∫–æ–ª—å–∫—É —ç–∫–∑–µ–º–ø–ª—è—Ä—ã `bloc` –∏ `cubit` –±–æ–ª—å—à–µ –Ω–µ –±—É–¥—É—Ç –∏—Å–ø—É—Å–∫–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ
—Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫, –±–æ–ª—å—à–µ –Ω–µ –±—ã–ª–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å `skip`
–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–≤–Ω—ã–º `1`.

**v5.x.x**

```dart
blocTest<CounterBloc, CounterEvent, int>(
  'emits [0] when skip is 0',
  build: () async => CounterBloc(),
  skip: 0,
  expect: const <int>[0],
);
```

**v6.0.0**

```dart
blocTest<CounterBloc, int>(
  'emits [] when skip is 0',
  build: () => CounterBloc(),
  skip: 0,
  expect: const <int>[],
);
```

–ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ bloc –∏–ª–∏ cubit –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```dart
test('initial state is correct', () {
  expect(MyBloc().state, InitialState());
});
```

#### ‚ùóblocTest –¥–µ–ª–∞–µ—Ç build —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–†–∞–Ω–µ–µ `build` –±—ã–ª —Å–¥–µ–ª–∞–Ω `async`, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ
–ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ bloc –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ
—Å–æ—Å—Ç–æ—è–Ω–∏–µ. –≠—Ç–æ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –∏ —Ç–∞–∫–∂–µ —Ä–µ—à–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º –∏–∑-–∑–∞
–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É build –∏ –ø–æ–¥–ø–∏—Å–∫–æ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã
–≤—ã–ø–æ–ª–Ω—è—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –¥–ª—è –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è bloc –≤ –∂–µ–ª–∞–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –º—ã
—Ç–µ–ø–µ—Ä—å –º–æ–∂–µ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ bloc, —Å–≤—è–∑–∞–≤ `emit` —Å –∂–µ–ª–∞–µ–º—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.

**v5.x.x**

```dart
blocTest<CounterBloc, CounterEvent, int>(
  'emits [2] when increment is added',
  build: () async {
    final bloc = CounterBloc();
    bloc.add(CounterEvent.increment);
    await bloc.take(2);
    return bloc;
  }
  act: (bloc) => bloc.add(CounterEvent.increment),
  expect: const <int>[2],
);
```

**v6.0.0**

```dart
blocTest<CounterBloc, int>(
  'emits [2] when increment is added',
  build: () => CounterBloc()..emit(1),
  act: (bloc) => bloc.add(CounterEvent.increment),
  expect: const <int>[2],
);
```

:::note

`emit` –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–Ω–µ
—Ç–µ—Å—Ç–æ–≤.

:::

### `package:flutter_bloc`

#### ‚ùó–ø–∞—Ä–∞–º–µ—Ç—Ä bloc –≤ BlocBuilder –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ cubit

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å `BlocBuilder` —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º —Å —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ `bloc` –∏ `cubit`,
–ø–∞—Ä–∞–º–µ—Ç—Ä `bloc` –±—ã–ª –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `cubit` (–ø–æ—Å–∫–æ–ª—å–∫—É `Cubit` —è–≤–ª—è–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–º
–∫–ª–∞—Å—Å–æ–º).

**v5.x.x**

```dart
BlocBuilder(
  bloc: myBloc,
  builder: (context, state) {...}
)
```

**v6.0.0**

```dart
BlocBuilder(
  cubit: myBloc,
  builder: (context, state) {...}
)
```

#### ‚ùó–ø–∞—Ä–∞–º–µ—Ç—Ä bloc –≤ BlocListener –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ cubit

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å `BlocListener` —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º —Å —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ `bloc` –∏ `cubit`,
–ø–∞—Ä–∞–º–µ—Ç—Ä `bloc` –±—ã–ª –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `cubit` (–ø–æ—Å–∫–æ–ª—å–∫—É `Cubit` —è–≤–ª—è–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–º
–∫–ª–∞—Å—Å–æ–º).

**v5.x.x**

```dart
BlocListener(
  bloc: myBloc,
  listener: (context, state) {...}
)
```

**v6.0.0**

```dart
BlocListener(
  cubit: myBloc,
  listener: (context, state) {...}
)
```

#### ‚ùó–ø–∞—Ä–∞–º–µ—Ç—Ä bloc –≤ BlocConsumer –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ cubit

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å `BlocConsumer` —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º —Å —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ `bloc` –∏ `cubit`,
–ø–∞—Ä–∞–º–µ—Ç—Ä `bloc` –±—ã–ª –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `cubit` (–ø–æ—Å–∫–æ–ª—å–∫—É `Cubit` —è–≤–ª—è–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–º
–∫–ª–∞—Å—Å–æ–º).

**v5.x.x**

```dart
BlocConsumer(
  bloc: myBloc,
  listener: (context, state) {...},
  builder: (context, state) {...}
)
```

**v6.0.0**

```dart
BlocConsumer(
  cubit: myBloc,
  listener: (context, state) {...},
  builder: (context, state) {...}
)
```

---

## v5.0.0

### `package:bloc`

#### ‚ùóinitialState –±—ã–ª —É–¥–∞–ª–µ–Ω

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ö–∞–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å `initialState` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ bloc
–ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –¥–≤–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

- `initialState` bloc –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –∏ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–∫–∞–∑–∞–Ω –ø–æ–∑–∂–µ
  (–¥–∞–∂–µ –≤–Ω–µ —Å–∞–º–æ–≥–æ bloc). –í –Ω–µ–∫–æ—Ç–æ—Ä–æ–º —Å–º—ã—Å–ª–µ —ç—Ç–æ –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ —É—Ç–µ—á–∫—É
  –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ bloc –Ω–∞ —É—Ä–æ–≤–µ–Ω—å UI.
- –≠—Ç–æ –º–Ω–æ–≥–æ—Å–ª–æ–≤–Ω–æ.

**v4.x.x**

```dart
class CounterBloc extends Bloc<CounterEvent, int> {
  @override
  int get initialState => 0;

  ...
}
```

**v5.0.0**

```dart
class CounterBloc extends Bloc<CounterEvent, int> {
  CounterBloc() : super(0);

  ...
}
```

?> –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å
[#1304](https://github.com/felangel/bloc/issues/1304)

#### ‚ùóBlocDelegate –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ BlocObserver

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ù–∞–∑–≤–∞–Ω–∏–µ `BlocDelegate` –Ω–µ –±—ã–ª–æ —Ç–æ—á–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ä–æ–ª–∏, –∫–æ—Ç–æ—Ä—É—é –∏–≥—Ä–∞–ª –∫–ª–∞—Å—Å.
`BlocDelegate` –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ –∫–ª–∞—Å—Å –∏–≥—Ä–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—É—é —Ä–æ–ª—å, —Ç–æ–≥–¥–∞ –∫–∞–∫ –≤
–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–∞—è —Ä–æ–ª—å `BlocDelegate` –∑–∞–∫–ª—é—á–∞–ª–∞—Å—å –≤ —Ç–æ–º, —á—Ç–æ–±—ã
–±—ã—Ç—å –ø–∞—Å—Å–∏–≤–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—Å—Ç–æ –Ω–∞–±–ª—é–¥–∞–µ—Ç –∑–∞ –≤—Å–µ–º–∏ bloc'–∞–º–∏ –≤
–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

:::note

–í –∏–¥–µ–∞–ª–µ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∏–∫–∞–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π,
–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö –≤–Ω—É—Ç—Ä–∏ `BlocObserver`.

:::

**v4.x.x**

```dart
class MyBlocDelegate extends BlocDelegate {
  ...
}
```

**v5.0.0**

```dart
class MyBlocObserver extends BlocObserver {
  ...
}
```

#### ‚ùóBlocSupervisor –±—ã–ª —É–¥–∞–ª–µ–Ω

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

`BlocSupervisor` –±—ã–ª –µ—â–µ –æ–¥–Ω–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º, –æ –∫–æ—Ç–æ—Ä–æ–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –Ω—É–∂–Ω–æ –±—ã–ª–æ
–∑–Ω–∞—Ç—å –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –Ω–∏–º –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ
`BlocDelegate`. –° –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –Ω–∞ `BlocObserver` –º—ã –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏, —á—Ç–æ —ç—Ç–æ
—É–ª—É—á—à–∏–ª–æ –æ–ø—ã—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞, —É—Å—Ç–∞–Ω–æ–≤–∏–≤ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞ —Å–∞–º–æ–º bloc.

?> –≠—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª–∏–ª–æ –Ω–∞–º –æ—Ç–¥–µ–ª–∏—Ç—å –¥—Ä—É–≥–∏–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∫ bloc, —Ç–∞–∫–∏–µ
–∫–∞–∫ `HydratedStorage`, –æ—Ç `BlocObserver`.

**v4.x.x**

```dart
BlocSupervisor.delegate = MyBlocDelegate();
```

**v5.0.0**

```dart
Bloc.observer = MyBlocObserver();
```

### `package:flutter_bloc`

#### ‚ùócondition –≤ BlocBuilder –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ –≤ buildWhen

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `BlocBuilder` –º—ã —Ä–∞–Ω–µ–µ –º–æ–≥–ª–∏ —É–∫–∞–∑–∞—Ç—å `condition`, —á—Ç–æ–±—ã
–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –¥–æ–ª–∂–µ–Ω –ª–∏ `builder` –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞—Ç—å—Å—è.

```dart
BlocBuilder<MyBloc, MyState>(
  condition: (previous, current) {
    // –≤–µ—Ä–Ω—É—Ç—å true/false, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –Ω—É–∂–Ω–æ –ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å builder
  },
  builder: (context, state) {...}
)
```

–ù–∞–∑–≤–∞–Ω–∏–µ `condition` –Ω–µ –æ—á–µ–Ω—å —Å–∞–º–æ–æ–±—ä—è—Å–Ω–∏—Ç–µ–ª—å–Ω–æ –∏–ª–∏ –æ—á–µ–≤–∏–¥–Ω–æ, –∏, —á—Ç–æ –±–æ–ª–µ–µ
–≤–∞–∂–Ω–æ, –ø—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —Å `BlocConsumer` API —Å—Ç–∞–ª –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–º, –ø–æ—Ç–æ–º—É —á—Ç–æ
—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–≤–∞ —É—Å–ª–æ–≤–∏—è (–æ–¥–Ω–æ –¥–ª—è `builder` –∏ –æ–¥–Ω–æ –¥–ª—è
`listener`). –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ API `BlocConsumer` —Ä–∞—Å–∫—Ä—ã–ª `buildWhen` –∏ `listenWhen`

```dart
BlocConsumer<MyBloc, MyState>(
  listenWhen: (previous, current) {
    // –≤–µ—Ä–Ω—É—Ç—å true/false, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –Ω—É–∂–Ω–æ –ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å listener
  },
  listener: (context, state) {...},
  buildWhen: (previous, current) {
    // –≤–µ—Ä–Ω—É—Ç—å true/false, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –Ω—É–∂–Ω–æ –ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å builder
  },
  builder: (context, state) {...},
)
```

–ß—Ç–æ–±—ã —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å API –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–æ–ª–µ–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –æ–ø—ã—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞,
`condition` –±—ã–ª –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `buildWhen`.

**v4.x.x**

```dart
BlocBuilder<MyBloc, MyState>(
  condition: (previous, current) {
    // –≤–µ—Ä–Ω—É—Ç—å true/false, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –Ω—É–∂–Ω–æ –ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å builder
  },
  builder: (context, state) {...}
)
```

**v5.0.0**

```dart
BlocBuilder<MyBloc, MyState>(
  buildWhen: (previous, current) {
    // –≤–µ—Ä–Ω—É—Ç—å true/false, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –Ω—É–∂–Ω–æ –ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å builder
  },
  builder: (context, state) {...}
)
```

#### ‚ùócondition –≤ BlocListener –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ –≤ listenWhen

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ü–æ —Ç–µ–º –∂–µ –ø—Ä–∏—á–∏–Ω–∞–º, —á—Ç–æ –æ–ø–∏—Å–∞–Ω—ã –≤—ã—à–µ, —É—Å–ª–æ–≤–∏–µ `BlocListener` —Ç–∞–∫–∂–µ –±—ã–ª–æ
–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ.

**v4.x.x**

```dart
BlocListener<MyBloc, MyState>(
  condition: (previous, current) {
    // –≤–µ—Ä–Ω—É—Ç—å true/false, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –Ω—É–∂–Ω–æ –ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å listener
  },
  listener: (context, state) {...}
)
```

**v5.0.0**

```dart
BlocListener<MyBloc, MyState>(
  listenWhen: (previous, current) {
    // –≤–µ—Ä–Ω—É—Ç—å true/false, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –Ω—É–∂–Ω–æ –ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å listener
  },
  listener: (context, state) {...}
)
```

### `package:hydrated_bloc`

#### ‚ùóHydratedStorage –∏ HydratedBlocStorage –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ß—Ç–æ–±—ã —É–ª—É—á—à–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –º–µ–∂–¥—É
[hydrated_bloc](https://pub.dev/packages/hydrated_bloc) –∏
[hydrated_cubit](https://pub.dev/packages/hydrated_cubit), –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
—Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—ã–ª–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –∏–∑ `HydratedBlocStorage` –≤
`HydratedStorage`. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `HydratedStorage` –±—ã–ª –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –∏–∑
`HydratedStorage` –≤ `Storage`.

**v4.0.0**

```dart
class MyHydratedStorage implements HydratedStorage {
  ...
}
```

**v5.0.0**

```dart
class MyHydratedStorage implements Storage {
  ...
}
```

#### ‚ùóHydratedStorage –æ—Ç–¥–µ–ª–µ–Ω –æ—Ç BlocDelegate

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ö–∞–∫ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å —Ä–∞–Ω–µ–µ, `BlocDelegate` –±—ã–ª –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `BlocObserver` –∏ –±—ã–ª
—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∫–∞–∫ —á–∞—Å—Ç—å `bloc` —á–µ—Ä–µ–∑:

```dart
Bloc.observer = MyBlocObserver();
```

–°–ª–µ–¥—É—é—â–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±—ã–ª–æ –≤–Ω–µ—Å–µ–Ω–æ –¥–ª—è:

- –û—Å—Ç–∞–≤–∞—Ç—å—Å—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–º —Å –Ω–æ–≤—ã–º API –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è bloc
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –æ–±–ª–∞—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Ç–æ–ª—å–∫–æ `HydratedBloc`
- –û—Ç–¥–µ–ª–∏—Ç—å `BlocObserver` –æ—Ç `Storage`

**v4.0.0**

```dart
BlocSupervisor.delegate = await HydratedBlocDelegate.build();
```

**v5.0.0**

```dart
HydratedBloc.storage = await HydratedStorage.build();
```

#### ‚ùó–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

##### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–†–∞–Ω–µ–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –≤—Ä—É—á–Ω—É—é –≤—ã–∑—ã–≤–∞—Ç—å
`super.initialState ?? DefaultInitialState()` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–≤–æ–∏—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
`HydratedBloc`. –≠—Ç–æ –Ω–µ—É–¥–æ–±–Ω–æ –∏ –º–Ω–æ–≥–æ—Å–ª–æ–≤–Ω–æ, –∞ —Ç–∞–∫–∂–µ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º–∏
–∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ `initialState` –≤ `bloc`. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤ v5.0.0 –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
`HydratedBloc` –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ –æ–±—ã—á–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ `Bloc`.

**v4.0.0**

```dart
class CounterBloc extends HydratedBloc<CounterEvent, int> {
  @override
  int get initialState => super.initialState ?? 0;
}
```

**v5.0.0**

```dart
class CounterBloc extends HydratedBloc<CounterEvent, int> {
  CounterBloc() : super(0);

  ...
}
```
