---
import { Code } from '@astrojs/starlight/components';

const code = `
Future<void> main() async {
  final bloc = CounterBloc();
  final subscription = bloc.stream.listen(print); // 1
  bloc.add(CounterIncrementPressed());
  await Future.delayed(Duration.zero);
  await subscription.cancel();
  await bloc.close();
}
`;
---

<Code code={code} lang="dart" title="main.dart" />
